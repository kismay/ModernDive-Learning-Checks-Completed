<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />


<meta name="author" content="Karolyn Ismay   PhD Candidate, Pacific University" />


<title>ModernDive Learning Checks - Completed</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<script src="site_libs/navigation-1.1/codefolding.js"></script>
<script src="site_libs/navigation-1.1/sourceembed.js"></script>
<link href="site_libs/highlightjs-9.12.0/default.css" rel="stylesheet" />
<script src="site_libs/highlightjs-9.12.0/highlight.js"></script>

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs) {
  hljs.configure({languages: []});
  hljs.initHighlightingOnLoad();
  if (document.readyState && document.readyState === "complete") {
    window.setTimeout(function() { hljs.initHighlighting(); }, 0);
  }
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
#rmd-source-code {
  display: none;
}
</style>




<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
}
.tabbed-pane {
  padding-top: 12px;
}
.html-widget {
  margin-bottom: 20px;
}
button.code-folding-btn:focus {
  outline: none;
}
summary {
  display: list-item;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 51px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h2 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h3 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h4 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h5 {
  padding-top: 56px;
  margin-top: -56px;
}
.section h6 {
  padding-top: 56px;
  margin-top: -56px;
}
.dropdown-submenu {
  position: relative;
}
.dropdown-submenu>.dropdown-menu {
  top: 0;
  left: 100%;
  margin-top: -6px;
  margin-left: -1px;
  border-radius: 0 6px 6px 6px;
}
.dropdown-submenu:hover>.dropdown-menu {
  display: block;
}
.dropdown-submenu>a:after {
  display: block;
  content: " ";
  float: right;
  width: 0;
  height: 0;
  border-color: transparent;
  border-style: solid;
  border-width: 5px 0 5px 5px;
  border-left-color: #cccccc;
  margin-top: 5px;
  margin-right: -10px;
}
.dropdown-submenu:hover>a:after {
  border-left-color: #ffffff;
}
.dropdown-submenu.pull-left {
  float: none;
}
.dropdown-submenu.pull-left>.dropdown-menu {
  left: -100%;
  margin-left: 10px;
  border-radius: 6px 0 6px 6px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>

<!-- tabsets -->

<style type="text/css">
.tabset-dropdown > .nav-tabs {
  display: inline-table;
  max-height: 500px;
  min-height: 44px;
  overflow-y: auto;
  background: white;
  border: 1px solid #ddd;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs > li.active:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li.active:before {
  content: "&#xe258;";
  border: none;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open:before {
  content: "";
  font-family: 'Glyphicons Halflings';
  display: inline-block;
  padding: 10px;
  border-right: 1px solid #ddd;
}

.tabset-dropdown > .nav-tabs > li.active {
  display: block;
}

.tabset-dropdown > .nav-tabs > li > a,
.tabset-dropdown > .nav-tabs > li > a:focus,
.tabset-dropdown > .nav-tabs > li > a:hover {
  border: none;
  display: inline-block;
  border-radius: 4px;
}

.tabset-dropdown > .nav-tabs.nav-tabs-open > li {
  display: block;
  float: none;
}

.tabset-dropdown > .nav-tabs > li {
  display: none;
}
</style>

<!-- code folding -->
<style type="text/css">
.code-folding-btn { margin-bottom: 4px; }
</style>




</head>

<body>


<div class="container-fluid main-container">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html"></a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Home</a>
</li>
<li>
  <a href="moderndive_checks.html">ModernDive Learning Checks</a>
</li>
<li>
  <a href="cv.html">CV</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">

<div class="btn-group pull-right">
<button type="button" class="btn btn-default btn-xs dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"><span>Code</span> <span class="caret"></span></button>
<ul class="dropdown-menu" style="min-width: 50px;">
<li><a id="rmd-download-source" href="#">Download Rmd</a></li>
</ul>
</div>



<h1 class="title toc-ignore">ModernDive Learning Checks - Completed</h1>
<h4 class="author">Karolyn Ismay <br> PhD Candidate, Pacific University</h4>
<h4 class="date">Summer 2019</h4>

</div>


<div id="introduction" class="section level2">
<h2>Introduction</h2>
<p>This page documents my completion of the Learning Checks and practice examples in the <a href="https://moderndive.com/index.html">ModernDive textbook</a>. In addition, this document itself shows my learning and skill development with R.</p>
<p>Below is a chunk of code that is needed to show some of the Learning Checks and the practice examples from the textbook on this document. You’ll see the package <code>nycflights13</code> in red below which contains real flight data from New York City airports from 2013. This is the data I will manipulate in the Learning Checks and practice examples. The other packages are the tools that allow for some of that manipulation. For example, <code>ggplot2</code> is a package that allows for plotting of data.</p>
<pre class="r"><code>c(
  &quot;nycflights13&quot;,
  &quot;dplyr&quot;,
  &quot;knitr&quot;,
  &quot;ggplot2&quot;,
  &quot;rmarkdown&quot;,
  &quot;xaringan&quot;,
  &quot;tidyverse&quot;,
  &quot;bookdown&quot;,
  &quot;kableExtra&quot;,
  &quot;fivethirtyeight&quot;
) -&gt; package_vector

sapply(X = package_vector,
       FUN = library, 
       character.only = TRUE)</code></pre>
</div>
<div id="chapter-1-introduction-to-r-and-rstudio" class="section level2">
<h2>Chapter 1: Introduction to R and Rstudio</h2>
<p>Much of this chapter is about learning basic syntax in R, such as identifying <code>computer_code</code> and understanding the Rstudio interface.</p>
<div id="learning-check-1.1" class="section level3">
<h3>Learning Check 1.1</h3>
<p><em>Repeat the above installing steps, but for the <code>dplyr</code>, <code>nycflights13</code>, and <code>knitr</code> packages. This will install the earlier mentioned <code>dplyr</code> package, the <code>nycflights13</code> package containing data on all domestic flights leaving a NYC airport in 2013, and the <code>knitr</code> package for writing reports in R.</em></p>
<p><strong>Answer:</strong></p>
<pre><code>install.packages(c(&quot;dplyr&quot;, &quot;nycflights13&quot;, knitr&quot;))</code></pre>
<p>Installing a package downloads the package onto your local computer.</p>
</div>
<div id="learning-check-1.2" class="section level3">
<h3>Learning Check 1.2</h3>
<p><em>“Load” the dplyr, nycflights13, and knitr packages as well by repeating the above steps.</em></p>
<p><strong>Answer:</strong></p>
<pre><code>library(&quot;dplyr&quot;) 
library(&quot;nycflights13&quot;)
library(&quot;knitr&quot;)</code></pre>
<p>Loading a package tells Rstudio to switch “on” that particular package.</p>
</div>
<div id="practice-1.4.2" class="section level3">
<h3>Practice 1.4.2</h3>
<p>Explore the <code>flights</code> data frame by calling up the <code>flights</code> tibble.</p>
<pre class="r"><code>flights</code></pre>
<pre><code>## # A tibble: 336,776 x 20
##     year month   day dep_time sched_dep_time dep_delay arr_time
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;
##  1  2013     1     1      517            515         2      830
##  2  2013     1     1      533            529         4      850
##  3  2013     1     1      542            540         2      923
##  4  2013     1     1      544            545        -1     1004
##  5  2013     1     1      554            600        -6      812
##  6  2013     1     1      554            558        -4      740
##  7  2013     1     1      555            600        -5      913
##  8  2013     1     1      557            600        -3      709
##  9  2013     1     1      557            600        -3      838
## 10  2013     1     1      558            600        -2      753
## # … with 336,766 more rows, and 13 more variables: sched_arr_time &lt;int&gt;,
## #   arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;, tailnum &lt;chr&gt;,
## #   origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;, hour &lt;dbl&gt;,
## #   minute &lt;dbl&gt;, time_hour &lt;dttm&gt;, gain &lt;dbl&gt;</code></pre>
</div>
<div id="learning-check-1.3" class="section level3">
<h3>Learning Check 1.3</h3>
<p><em>Run <code>View(flights)</code> in your Console in RStudio…and explore this data frame in the resulting pop-up viewer. What does any ONE row in this flights dataset refer to?</em> <br> * <em>A. Data on an airline</em> <br> * <em>B. Data on a flight</em> <br> * <em>C. Data on an airport</em> <br> * <em>D. Data on multiple flights</em></p>
<p><strong>Answer:</strong> B. Data on a flight <br> Rows correspond to individual observations or data on A flight. <code>airline</code>, and <code>airport</code> are variables and appear in columns not rows and “Data on multiple flights” would not appear on any ONE row.</p>
</div>
<div id="practice-1.4.3.2" class="section level3">
<h3>Practice 1.4.3.2</h3>
<p>Explore a data frame using the <code>glimpse</code> function.</p>
<pre class="r"><code>glimpse(flights)</code></pre>
<pre><code>## Observations: 336,776
## Variables: 20
## $ year           &lt;int&gt; 2013, 2013, 2013, 2013, 2013, 2013, 2013, 2013, 2…
## $ month          &lt;int&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1…
## $ day            &lt;int&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1…
## $ dep_time       &lt;int&gt; 517, 533, 542, 544, 554, 554, 555, 557, 557, 558,…
## $ sched_dep_time &lt;int&gt; 515, 529, 540, 545, 600, 558, 600, 600, 600, 600,…
## $ dep_delay      &lt;dbl&gt; 2, 4, 2, -1, -6, -4, -5, -3, -3, -2, -2, -2, -2, …
## $ arr_time       &lt;int&gt; 830, 850, 923, 1004, 812, 740, 913, 709, 838, 753…
## $ sched_arr_time &lt;int&gt; 819, 830, 850, 1022, 837, 728, 854, 723, 846, 745…
## $ arr_delay      &lt;dbl&gt; 11, 20, 33, -18, -25, 12, 19, -14, -8, 8, -2, -3,…
## $ carrier        &lt;chr&gt; &quot;UA&quot;, &quot;UA&quot;, &quot;AA&quot;, &quot;B6&quot;, &quot;DL&quot;, &quot;UA&quot;, &quot;B6&quot;, &quot;EV&quot;, &quot;…
## $ flight         &lt;int&gt; 1545, 1714, 1141, 725, 461, 1696, 507, 5708, 79, …
## $ tailnum        &lt;chr&gt; &quot;N14228&quot;, &quot;N24211&quot;, &quot;N619AA&quot;, &quot;N804JB&quot;, &quot;N668DN&quot;,…
## $ origin         &lt;chr&gt; &quot;EWR&quot;, &quot;LGA&quot;, &quot;JFK&quot;, &quot;JFK&quot;, &quot;LGA&quot;, &quot;EWR&quot;, &quot;EWR&quot;, …
## $ dest           &lt;chr&gt; &quot;IAH&quot;, &quot;IAH&quot;, &quot;MIA&quot;, &quot;BQN&quot;, &quot;ATL&quot;, &quot;ORD&quot;, &quot;FLL&quot;, …
## $ air_time       &lt;dbl&gt; 227, 227, 160, 183, 116, 150, 158, 53, 140, 138, …
## $ distance       &lt;dbl&gt; 1400, 1416, 1089, 1576, 762, 719, 1065, 229, 944,…
## $ hour           &lt;dbl&gt; 5, 5, 5, 5, 6, 5, 6, 6, 6, 6, 6, 6, 6, 6, 6, 5, 6…
## $ minute         &lt;dbl&gt; 15, 29, 40, 45, 0, 58, 0, 0, 0, 0, 0, 0, 0, 0, 0,…
## $ time_hour      &lt;dttm&gt; 2013-01-01 05:00:00, 2013-01-01 05:00:00, 2013-0…
## $ gain           &lt;dbl&gt; -9, -16, -31, 17, 19, -16, -24, 11, 5, -10, 0, 1,…</code></pre>
</div>
<div id="learning-check-1.4" class="section level3">
<h3>Learning Check 1.4</h3>
<p><em>What are some examples in this dataset of <strong>categorical</strong> variables? What makes them different than <strong>quantitative</strong> variables?</em></p>
<p><strong>Answer:</strong> Categorical variables are labels, such as <code>carrier</code>, or <code>dest</code>. They are often <code>chr</code> or text data but can be numerical. However, <code>1</code> is not “more” or “less” than any other, it is a just a categorization.</p>
</div>
<div id="practice-1.4.3.3" class="section level3">
<h3>Practice 1.4.3.3</h3>
<p>Explore a data frame using the <code>kable</code> function. The <code>kable</code> function cleans up the data into a more legible format.</p>
<pre class="r"><code>airlines</code></pre>
<pre><code>## # A tibble: 16 x 2
##    carrier name                       
##    &lt;chr&gt;   &lt;chr&gt;                      
##  1 9E      Endeavor Air Inc.          
##  2 AA      American Airlines Inc.     
##  3 AS      Alaska Airlines Inc.       
##  4 B6      JetBlue Airways            
##  5 DL      Delta Air Lines Inc.       
##  6 EV      ExpressJet Airlines Inc.   
##  7 F9      Frontier Airlines Inc.     
##  8 FL      AirTran Airways Corporation
##  9 HA      Hawaiian Airlines Inc.     
## 10 MQ      Envoy Air                  
## 11 OO      SkyWest Airlines Inc.      
## 12 UA      United Air Lines Inc.      
## 13 US      US Airways Inc.            
## 14 VX      Virgin America             
## 15 WN      Southwest Airlines Co.     
## 16 YV      Mesa Airlines Inc.</code></pre>
<pre class="r"><code>kable(airlines)</code></pre>
<table>
<thead>
<tr>
<th style="text-align:left;">
carrier
</th>
<th style="text-align:left;">
name
</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align:left;">
9E
</td>
<td style="text-align:left;">
Endeavor Air Inc.
</td>
</tr>
<tr>
<td style="text-align:left;">
AA
</td>
<td style="text-align:left;">
American Airlines Inc.
</td>
</tr>
<tr>
<td style="text-align:left;">
AS
</td>
<td style="text-align:left;">
Alaska Airlines Inc.
</td>
</tr>
<tr>
<td style="text-align:left;">
B6
</td>
<td style="text-align:left;">
JetBlue Airways
</td>
</tr>
<tr>
<td style="text-align:left;">
DL
</td>
<td style="text-align:left;">
Delta Air Lines Inc.
</td>
</tr>
<tr>
<td style="text-align:left;">
EV
</td>
<td style="text-align:left;">
ExpressJet Airlines Inc.
</td>
</tr>
<tr>
<td style="text-align:left;">
F9
</td>
<td style="text-align:left;">
Frontier Airlines Inc.
</td>
</tr>
<tr>
<td style="text-align:left;">
FL
</td>
<td style="text-align:left;">
AirTran Airways Corporation
</td>
</tr>
<tr>
<td style="text-align:left;">
HA
</td>
<td style="text-align:left;">
Hawaiian Airlines Inc.
</td>
</tr>
<tr>
<td style="text-align:left;">
MQ
</td>
<td style="text-align:left;">
Envoy Air
</td>
</tr>
<tr>
<td style="text-align:left;">
OO
</td>
<td style="text-align:left;">
SkyWest Airlines Inc.
</td>
</tr>
<tr>
<td style="text-align:left;">
UA
</td>
<td style="text-align:left;">
United Air Lines Inc.
</td>
</tr>
<tr>
<td style="text-align:left;">
US
</td>
<td style="text-align:left;">
US Airways Inc.
</td>
</tr>
<tr>
<td style="text-align:left;">
VX
</td>
<td style="text-align:left;">
Virgin America
</td>
</tr>
<tr>
<td style="text-align:left;">
WN
</td>
<td style="text-align:left;">
Southwest Airlines Co.
</td>
</tr>
<tr>
<td style="text-align:left;">
YV
</td>
<td style="text-align:left;">
Mesa Airlines Inc.
</td>
</tr>
</tbody>
</table>
</div>
<div id="practice-1.4.3.4" class="section level3">
<h3>Practice 1.4.3.4</h3>
<p>Explore a variable using the <code>$</code> operator.</p>
<pre class="r"><code>airlines</code></pre>
<pre><code>## # A tibble: 16 x 2
##    carrier name                       
##    &lt;chr&gt;   &lt;chr&gt;                      
##  1 9E      Endeavor Air Inc.          
##  2 AA      American Airlines Inc.     
##  3 AS      Alaska Airlines Inc.       
##  4 B6      JetBlue Airways            
##  5 DL      Delta Air Lines Inc.       
##  6 EV      ExpressJet Airlines Inc.   
##  7 F9      Frontier Airlines Inc.     
##  8 FL      AirTran Airways Corporation
##  9 HA      Hawaiian Airlines Inc.     
## 10 MQ      Envoy Air                  
## 11 OO      SkyWest Airlines Inc.      
## 12 UA      United Air Lines Inc.      
## 13 US      US Airways Inc.            
## 14 VX      Virgin America             
## 15 WN      Southwest Airlines Co.     
## 16 YV      Mesa Airlines Inc.</code></pre>
<pre class="r"><code>airlines$name</code></pre>
<pre><code>##  [1] &quot;Endeavor Air Inc.&quot;           &quot;American Airlines Inc.&quot;     
##  [3] &quot;Alaska Airlines Inc.&quot;        &quot;JetBlue Airways&quot;            
##  [5] &quot;Delta Air Lines Inc.&quot;        &quot;ExpressJet Airlines Inc.&quot;   
##  [7] &quot;Frontier Airlines Inc.&quot;      &quot;AirTran Airways Corporation&quot;
##  [9] &quot;Hawaiian Airlines Inc.&quot;      &quot;Envoy Air&quot;                  
## [11] &quot;SkyWest Airlines Inc.&quot;       &quot;United Air Lines Inc.&quot;      
## [13] &quot;US Airways Inc.&quot;             &quot;Virgin America&quot;             
## [15] &quot;Southwest Airlines Co.&quot;      &quot;Mesa Airlines Inc.&quot;</code></pre>
</div>
<div id="learning-check-1.5" class="section level3">
<h3>Learning Check 1.5</h3>
<p><em>What properties of the observational unit do each of <code>lat</code>, <code>lon</code>, <code>alt</code>, <code>tz</code>, <code>dst</code>, and <code>tzone</code> describe for the airports data frame? Note that you may want to use <code>?airports</code> to get more information.</em></p>
<p><strong>Answer:</strong> <code>?airports</code> launches the Help tab which shows that the variables are used to describe individual airports. <code>lat</code> and <code>lon</code> refer to the latitude and longitude. <code>alt</code> refers to the elevation. <code>tz</code> is the GMT while <code>dst</code> is daylight savings time zone and <code>tzone</code> is the IANA time zone.</p>
</div>
<div id="learning-check-1.6" class="section level3">
<h3>Learning Check 1.6</h3>
<p><em>Provide the names of variables in a data frame with at least three variables in which one of them is an identification variable and the other two are not. In other words, create your own tidy data frame that matches these conditions.</em></p>
<p><strong>Answer:</strong> A possible data frame with three variables, one of which is an identification variable and the other two are not would be a data frame about homes. An identification variable could be the color of the house or the architectural style of the house. Two measurement variables could be the number of bathrooms and the square footage.</p>
</div>
</div>
<div id="chapter-2-data-visualization" class="section level2">
<h2>Chapter 2: Data Visualization</h2>
<p>This chapter is about using multiple data visualization techniques on the <code>nycflights13</code> package.</p>
<div id="practice-2.3" class="section level3">
<h3>Practice 2.3</h3>
<p>Utilizing a scatterplot, visualize the relationship between <code>dep_delay</code> on the x-axis and <code>arr_delay</code> on the y-axis for Alaska Airlines flights leaving NYC in 2013.</p>
<p>First, I’ll need to filter only the Alaska Airlines flights.</p>
<pre class="r"><code>alaska_flights &lt;- flights %&gt;%
  filter(carrier == &quot;AS&quot;)</code></pre>
<p>Here I have created a new data frame named <code>alaska_flights</code> and asked R to populate the data frame based off of the data frame <code>flights</code> filtering for only those flights that are from Alaska Airlines.</p>
</div>
<div id="learning-check-2.1" class="section level3">
<h3>Learning Check 2.1</h3>
<p><em>Take a look at both the <code>flights</code> and <code>alaska_flights</code> data frames by running <code>View(flights)</code> and <code>View(alaska_flights)</code>. In what respect do these data frames differ? For example, think about the number of rows in each dataset.</em></p>
<pre class="r"><code>glimpse(flights)</code></pre>
<pre><code>## Observations: 336,776
## Variables: 20
## $ year           &lt;int&gt; 2013, 2013, 2013, 2013, 2013, 2013, 2013, 2013, 2…
## $ month          &lt;int&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1…
## $ day            &lt;int&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1…
## $ dep_time       &lt;int&gt; 517, 533, 542, 544, 554, 554, 555, 557, 557, 558,…
## $ sched_dep_time &lt;int&gt; 515, 529, 540, 545, 600, 558, 600, 600, 600, 600,…
## $ dep_delay      &lt;dbl&gt; 2, 4, 2, -1, -6, -4, -5, -3, -3, -2, -2, -2, -2, …
## $ arr_time       &lt;int&gt; 830, 850, 923, 1004, 812, 740, 913, 709, 838, 753…
## $ sched_arr_time &lt;int&gt; 819, 830, 850, 1022, 837, 728, 854, 723, 846, 745…
## $ arr_delay      &lt;dbl&gt; 11, 20, 33, -18, -25, 12, 19, -14, -8, 8, -2, -3,…
## $ carrier        &lt;chr&gt; &quot;UA&quot;, &quot;UA&quot;, &quot;AA&quot;, &quot;B6&quot;, &quot;DL&quot;, &quot;UA&quot;, &quot;B6&quot;, &quot;EV&quot;, &quot;…
## $ flight         &lt;int&gt; 1545, 1714, 1141, 725, 461, 1696, 507, 5708, 79, …
## $ tailnum        &lt;chr&gt; &quot;N14228&quot;, &quot;N24211&quot;, &quot;N619AA&quot;, &quot;N804JB&quot;, &quot;N668DN&quot;,…
## $ origin         &lt;chr&gt; &quot;EWR&quot;, &quot;LGA&quot;, &quot;JFK&quot;, &quot;JFK&quot;, &quot;LGA&quot;, &quot;EWR&quot;, &quot;EWR&quot;, …
## $ dest           &lt;chr&gt; &quot;IAH&quot;, &quot;IAH&quot;, &quot;MIA&quot;, &quot;BQN&quot;, &quot;ATL&quot;, &quot;ORD&quot;, &quot;FLL&quot;, …
## $ air_time       &lt;dbl&gt; 227, 227, 160, 183, 116, 150, 158, 53, 140, 138, …
## $ distance       &lt;dbl&gt; 1400, 1416, 1089, 1576, 762, 719, 1065, 229, 944,…
## $ hour           &lt;dbl&gt; 5, 5, 5, 5, 6, 5, 6, 6, 6, 6, 6, 6, 6, 6, 6, 5, 6…
## $ minute         &lt;dbl&gt; 15, 29, 40, 45, 0, 58, 0, 0, 0, 0, 0, 0, 0, 0, 0,…
## $ time_hour      &lt;dttm&gt; 2013-01-01 05:00:00, 2013-01-01 05:00:00, 2013-0…
## $ gain           &lt;dbl&gt; -9, -16, -31, 17, 19, -16, -24, 11, 5, -10, 0, 1,…</code></pre>
<pre class="r"><code>glimpse(alaska_flights)</code></pre>
<pre><code>## Observations: 714
## Variables: 20
## $ year           &lt;int&gt; 2013, 2013, 2013, 2013, 2013, 2013, 2013, 2013, 2…
## $ month          &lt;int&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1…
## $ day            &lt;int&gt; 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6, 7, 7, 8, 8, 9…
## $ dep_time       &lt;int&gt; 724, 1808, 722, 1818, 724, 1817, 725, 1808, 725, …
## $ sched_dep_time &lt;int&gt; 725, 1815, 725, 1815, 725, 1815, 725, 1815, 725, …
## $ dep_delay      &lt;dbl&gt; -1, -7, -3, 3, -1, 2, 0, -7, 0, -12, -3, 2, 2, 11…
## $ arr_time       &lt;int&gt; 1020, 2111, 949, 2131, 1012, 2121, 1031, 2101, 10…
## $ sched_arr_time &lt;int&gt; 1030, 2130, 1030, 2130, 1030, 2130, 1030, 2130, 1…
## $ arr_delay      &lt;dbl&gt; -10, -19, -41, 1, -18, -9, 1, -29, -19, -12, -6, …
## $ carrier        &lt;chr&gt; &quot;AS&quot;, &quot;AS&quot;, &quot;AS&quot;, &quot;AS&quot;, &quot;AS&quot;, &quot;AS&quot;, &quot;AS&quot;, &quot;AS&quot;, &quot;…
## $ flight         &lt;int&gt; 11, 7, 11, 7, 11, 7, 11, 7, 11, 7, 11, 7, 11, 7, …
## $ tailnum        &lt;chr&gt; &quot;N594AS&quot;, &quot;N553AS&quot;, &quot;N592AS&quot;, &quot;N552AS&quot;, &quot;N533AS&quot;,…
## $ origin         &lt;chr&gt; &quot;EWR&quot;, &quot;EWR&quot;, &quot;EWR&quot;, &quot;EWR&quot;, &quot;EWR&quot;, &quot;EWR&quot;, &quot;EWR&quot;, …
## $ dest           &lt;chr&gt; &quot;SEA&quot;, &quot;SEA&quot;, &quot;SEA&quot;, &quot;SEA&quot;, &quot;SEA&quot;, &quot;SEA&quot;, &quot;SEA&quot;, …
## $ air_time       &lt;dbl&gt; 338, 336, 314, 332, 325, 327, 345, 338, 330, 343,…
## $ distance       &lt;dbl&gt; 2402, 2402, 2402, 2402, 2402, 2402, 2402, 2402, 2…
## $ hour           &lt;dbl&gt; 7, 18, 7, 18, 7, 18, 7, 18, 7, 18, 7, 18, 7, 18, …
## $ minute         &lt;dbl&gt; 25, 15, 25, 15, 25, 15, 25, 15, 25, 15, 25, 15, 2…
## $ time_hour      &lt;dttm&gt; 2013-01-01 07:00:00, 2013-01-01 18:00:00, 2013-0…
## $ gain           &lt;dbl&gt; 9, 12, 38, 2, 17, 11, -1, 22, 19, 0, 3, -14, -28,…</code></pre>
<p><strong>Answer:</strong> The <code>flights</code> data frame has all the flights departing NYC airports in 2013, over 336,776 rows. The <code>alaska_flights</code> data frame has only those flights departing NYC airports in 2013 that were operated by Alaska Airlines, just 714 rows.</p>
</div>
<div id="practice-2.3.1-scatterplots" class="section level3">
<h3>Practice 2.3.1 Scatterplots</h3>
<p>Utilizing the <code>alaska_flights</code> data frame I created above, now I will use the <code>ggplot2</code> package to create a scatterplot with the <code>ggplot</code> function.</p>
<pre class="r"><code>ggplot(data = alaska_flights,
       mapping = aes(x = dep_delay,
                     y = arr_delay)) + 
  geom_point()</code></pre>
<pre><code>## Warning: Removed 5 rows containing missing values (geom_point).</code></pre>
<p><img src="moderndive_checks_files/figure-html/scatterplot-1.png" width="672" /></p>
<p>Above is a scatterplot of <code>alaska_flights</code> where <code>dep_delay</code> is on the x-axis and <code>arr_delay</code> is on the y-axis and each observation is represented by a point on the plot. Additionally, we see that 5 rows were removed from the 714 because they are missing values.</p>
</div>
<div id="learning-check-2.2" class="section level3">
<h3>Learning Check 2.2</h3>
<p><em>What are some practical reasons why <code>dep_delay</code> and <code>arr_delay</code> have a positive relationship?</em></p>
<p><strong>Answer:</strong> One reason could be that leaving an hour later can mean arriving an hour later. On the other hand, sometimes flights make up time or arrive earlier than expected due to tailwind. The opposite can also be true if there are headwinds.</p>
</div>
<div id="learning-check-2.3" class="section level3">
<h3>Learning Check 2.3</h3>
<p><em>What variables in the <code>weather</code> data frame would you expect to have a negative correlation (i.e. a negative relationship) with <code>dep_delay</code>? Why? Remember that we are focusing on numerical variables here. Hint: Explore the weather dataset by using the <code>View()</code> function.</em></p>
<p><strong>Answer:</strong> Looking at the <code>View(weather)</code> we see there are several variables that could impact <code>dep_delay</code> such as <code>wind_gust</code> and <code>visib</code>.</p>
</div>
<div id="learning-check-2.4" class="section level3">
<h3>Learning Check 2.4</h3>
<p><em>Why do you believe there is a cluster of points near (0, 0)? What does (0, 0) correspond to in terms of the Alaskan flights?</em></p>
<p><strong>Answer:</strong> This is likely because flights which were not delayed upon departure arrived without delays as well. (0, 0) represents flights that departed on time and arrived on time.</p>
</div>
<div id="learning-check-2.5" class="section level3">
<h3>Learning Check 2.5</h3>
<p><em>What are some other features of the plot that stand out to you?</em></p>
<p><strong>Answer:</strong> The scatterplot shows a fairly perfect correlation where the dots could be represented by a straight line with a slope of 1. Also it shows flights that departed early and arrived early and thus had negative <code>dep_delay</code> and <code>arr_delay</code>.</p>
</div>
<div id="learning-check-2.6" class="section level3">
<h3>Learning Check 2.6</h3>
<p><em>Create a new scatterplot using different variables in the <code>alaska_flights</code> data frame by modifying the example above.</em></p>
<p><strong>Answer:</strong></p>
<pre class="r"><code>ggplot(
  data = alaska_flights,
  mapping = aes(
    x = sched_dep_time,
    y = dep_delay)) +
  geom_point()</code></pre>
<pre><code>## Warning: Removed 2 rows containing missing values (geom_point).</code></pre>
<p><img src="moderndive_checks_files/figure-html/unnamed-chunk-7-1.png" width="672" /></p>
<p>This plot shows that more flights scheduled later in the day were delayed compared to much fewer flights delayed that were originally scheduled early in the day. We also see an example of how important it is to understand our data because we see that Alaska Airlines only flew out of NYC in the early morning and the evening as opposed to several times throughout the day. Also, we see that 2 rows were removed for missing values.</p>
</div>
<div id="practice-2.3.2-dealing-with-overplotting" class="section level3">
<h3>Practice 2.3.2 Dealing with overplotting</h3>
<p>In Practice 2.3.1, we saw a plot that had many points near (0, 0) which made it difficult to tell just how many data points were in the overlapping areas. This is called overplotting and it can be mitigated.</p>
<p>Method 1: Adjusting the transparency of the <code>geom</code>etric points:</p>
<pre class="r"><code>ggplot(
  data = alaska_flights,
  mapping = aes(
    x = dep_delay,
    y = arr_delay)) +
geom_point(alpha = .2)  </code></pre>
<p><img src="moderndive_checks_files/figure-html/scatterplot-transparency-1.png" width="672" /></p>
<p>This scatterplot’s points are set to 20% opacity with the <code>geom_point(alpha = .2)</code>. This allows us to more clearly see the density of the points near (0, 0).</p>
<p>Method 2: <em>Jittering</em> the points. This introduces some random movement of the points. This should only be used for visualization and the original data should not be altered.</p>
<pre class="r"><code>ggplot(data = alaska_flights,
       mapping = aes(
         x = dep_delay,
         y = arr_delay)) +
  geom_jitter(
    width = 30,
    height = 30)</code></pre>
<p><img src="moderndive_checks_files/figure-html/scatterplot-jitter-1.png" width="672" /></p>
<p>This plot is similar to the original scatterplot but we can more clearly see how dense the (0, 0) area is.</p>
</div>
<div id="learning-check-2.7" class="section level3">
<h3>Learning Check 2.7</h3>
<p><em>Why is setting the <code>alpha</code> argument value useful with scatterplots? What further information does it give you that a regular scatterplot cannot?</em></p>
<p><strong>Answer:</strong> <code>alpha</code> was used to change the opacity of the <code>geom_point</code> dots. This let us see that there was a high density of data in the (0, 0) area.</p>
</div>
<div id="learning-check-2.8" class="section level3">
<h3>Learning Check 2.8</h3>
<p><em>After viewing the Figure 2.4, give an approximate range of arrival delays and departure delays that occur the most frequently. How has that region changed compared to when you observed the same plot without the alpha = 0.2 set in Figure 2.2?</em></p>
<p><strong>Answer:</strong> Figure 2.2 was the scatterplot without changes to the <code>geom_point</code> opacity whereas Figure 2.4 had opacity set to 20%. We see that most flights depart early or within a few minutes of on-time and most of those flights arrive early or within a few mintes of on-time.</p>
</div>
<div id="practice-2.4-linegraphs" class="section level3">
<h3>Practice 2.4: Linegraphs</h3>
<p>Using the <code>nycflights13</code> package, recall the <code>weather</code> data frame. Pull a list the variables in the <code>weather</code> data frame.</p>
<pre class="r"><code>names(weather)</code></pre>
<pre><code>##  [1] &quot;origin&quot;     &quot;year&quot;       &quot;month&quot;      &quot;day&quot;        &quot;hour&quot;      
##  [6] &quot;temp&quot;       &quot;dewp&quot;       &quot;humid&quot;      &quot;wind_dir&quot;   &quot;wind_speed&quot;
## [11] &quot;wind_gust&quot;  &quot;precip&quot;     &quot;pressure&quot;   &quot;visib&quot;      &quot;time_hour&quot; 
## [16] &quot;temp_in_C&quot;</code></pre>
<p>Here I have listed all the variables in the data frame <code>weather</code>.</p>
<p>Create a sub data frame to look at the <code>temp</code> or temperature of flights with <code>origin</code> Newark (<code>EWR</code>) during the first half of January.</p>
<pre class="r"><code>early_january_weather &lt;- weather %&gt;%
  filter(
    origin == &quot;EWR&quot; &amp;
      month == 1 &amp;
      day &lt;= 15)
early_january_weather</code></pre>
<pre><code>## # A tibble: 358 x 16
##    origin  year month   day  hour  temp  dewp humid wind_dir wind_speed
##    &lt;chr&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;      &lt;dbl&gt;
##  1 EWR     2013     1     1     1  39.0  26.1  59.4      270      10.4 
##  2 EWR     2013     1     1     2  39.0  27.0  61.6      250       8.06
##  3 EWR     2013     1     1     3  39.0  28.0  64.4      240      11.5 
##  4 EWR     2013     1     1     4  39.9  28.0  62.2      250      12.7 
##  5 EWR     2013     1     1     5  39.0  28.0  64.4      260      12.7 
##  6 EWR     2013     1     1     6  37.9  28.0  67.2      240      11.5 
##  7 EWR     2013     1     1     7  39.0  28.0  64.4      240      15.0 
##  8 EWR     2013     1     1     8  39.9  28.0  62.2      250      10.4 
##  9 EWR     2013     1     1     9  39.9  28.0  62.2      260      15.0 
## 10 EWR     2013     1     1    10  41    28.0  59.6      260      13.8 
## # … with 348 more rows, and 6 more variables: wind_gust &lt;dbl&gt;,
## #   precip &lt;dbl&gt;, pressure &lt;dbl&gt;, visib &lt;dbl&gt;, time_hour &lt;dttm&gt;,
## #   temp_in_C &lt;dbl&gt;</code></pre>
<p>Here I’ve created a data frame that is a subset of the original <code>weather</code> dataframe. I did this by creating a new object named <code>early_january_weather</code> and used a <code>filter()</code> to feed in data from <code>weather</code> that matches <code>origin == &quot;EWR&quot;</code> or Newark, during the <code>month == 1</code> or January, where <code>day &lt;= 15</code> or days 1 through 15 on the calendar.</p>
</div>
<div id="learning-check-2.9" class="section level3">
<h3>Learning Check 2.9</h3>
<p><em>Take a look at both the <code>weather</code> and <code>early_january_weather</code> data frames by running <code>View(weather)</code> and <code>View(early_january_weather)</code>. In what respect do these data frames differ?</em></p>
<p><strong>Answer:</strong> <code>early_january_weather</code> is a subset of <code>weather</code> and thus has fewer observations.</p>
</div>
<div id="learning-check-2.10" class="section level3">
<h3>Learning Check 2.10</h3>
<p><em><code>View()</code> the <code>flights</code> data frame again. Why does the <code>time_hour</code> variable uniquely identify the hour of the measurement whereas the <code>hour</code> variable does not?</em></p>
<p><strong>Answer:</strong></p>
</div>
<div id="practice-2.4.1-linegraphs-via-geom_line" class="section level3">
<h3>Practice 2.4.1: Linegraphs via geom_line</h3>
<p>Plot a linegraph of hourly temperatures in <code>early_january_weather</code> by using <code>geom_line()</code> instead of <code>geom_point()</code> like we did for scatterplots.</p>
<pre class="r"><code>ggplot(data = early_january_weather,
       mapping = aes(x = time_hour,
                     y = temp)) +
  geom_line()</code></pre>
<p><img src="moderndive_checks_files/figure-html/unnamed-chunk-8-1.png" width="672" /></p>
</div>
<div id="learning-check-2.11" class="section level3">
<h3>Learning Check 2.11</h3>
<p><em>Why should linegraphs be avoided when there is not a clear ordering of the horizontal axis?</em></p>
<p><strong>Answer:</strong> Because linegraphs don’t make sense without clear ordering. Each point needs to have meaning relative to the next.</p>
</div>
<div id="learning-check-2.12" class="section level3">
<h3>Learning Check 2.12</h3>
<p><em>Why are linegraphs frequently used when time is the explanatory variable on the x-axis?</em></p>
<p><strong>Answer:</strong> Because linegraphs are well suited to linear data and we experience time linearly.</p>
</div>
<div id="learning-check-2.13" class="section level3">
<h3>Learning Check 2.13</h3>
<p><em>Plot a time series of a variable other than <code>temp</code> for Newark Airport in the first 15 days of January 2013.</em></p>
<p><strong>Answer:</strong></p>
<pre class="r"><code>ggplot(data = early_january_weather,
       mapping = aes(x = time_hour,
                     y = humid)) +
  geom_line()</code></pre>
<p><img src="moderndive_checks_files/figure-html/timeseries-EWR-humid-1.png" width="672" /></p>
<p>Here I’ve created a new linegraph showing the hourly humidity, or <code>humid</code>, for Newark Airport in the first 15 days of January 2013.</p>
</div>
<div id="practice-2.5-histograms" class="section level3">
<h3>Practice 2.5: Histograms</h3>
<p>Histograms are useful for showing distributions. The basic <code>geom_histogram</code> is the following:</p>
<pre class="r"><code>ggplot(data = weather,
       mapping = aes(x = temp)) +
  geom_histogram()</code></pre>
<pre><code>## `stat_bin()` using `bins = 30`. Pick better value with `binwidth`.</code></pre>
<pre><code>## Warning: Removed 1 rows containing non-finite values (stat_bin).</code></pre>
<p><img src="moderndive_checks_files/figure-html/first-histogram-1.png" width="672" /></p>
<p>Here we see a suggestion to “Pick better value with <code>binwidth</code>” but that R has supplied a <code>bins = 30</code> as the default. We also see a warning that one row was removed.</p>
<p>Add a white border to the bins to more clearly see each individual bin and change the fill to color of choice:</p>
<pre class="r"><code>ggplot(data = weather,
       mapping = aes(x = temp)) + 
  geom_histogram(color = &quot;white&quot;, fill = &quot;firebrick1&quot;)</code></pre>
<p><img src="moderndive_checks_files/figure-html/first-histogram-white-borders-1.png" width="672" /></p>
<p>Adjust the number of <code>bins</code> to 40:</p>
<pre class="r"><code>ggplot(data = weather,
       mapping = aes(x = temp)) +
  geom_histogram(color = &quot;white&quot;, fill = &quot;firebrick1&quot;, bins = 40)</code></pre>
<p><img src="moderndive_checks_files/figure-html/1histo-bin45-1.png" width="672" /></p>
<p>Remove the bin number and adjust the <code>binwidth</code> to 10°F:</p>
<pre class="r"><code>ggplot(data = weather,
       mapping = aes(x = temp)) +
  geom_histogram(color = &quot;white&quot;, fill = &quot;firebrick1&quot;, binwidth = 10)</code></pre>
<p><img src="moderndive_checks_files/figure-html/1histo-binwidth10F-1.png" width="672" /></p>
</div>
<div id="learning-check-2.14" class="section level3">
<h3>Learning Check 2.14</h3>
<p><em>What does changing the number of bins from 30 to 40 tell us about the distribution of temperatures?</em></p>
<p><strong>Answer:</strong> There isn’t much that is different, the distribution is fairly similar. The bins here are from 10.94°F to 100.04°F, so having a similar distribution between 30 and 40 bins tells us that <code>temp</code> values are accurate to a high degree. Looking at <code>View(weather)</code> we see that <code>temp</code> is accurate to the second decimal point.</p>
<pre class="r"><code>ggplot(data = weather,
       mapping = aes(x = temp)) +
  geom_histogram(color = &quot;white&quot;, fill = &quot;firebrick1&quot;, bins = 30)</code></pre>
<p><img src="moderndive_checks_files/figure-html/1histo-bin3040-1.png" width="672" /></p>
<pre class="r"><code>ggplot(data = weather,
       mapping = aes(x = temp)) +
  geom_histogram(color = &quot;white&quot;, fill = &quot;firebrick1&quot;, bins = 40)</code></pre>
<p><img src="moderndive_checks_files/figure-html/2histo-bin3040-1.png" width="672" /></p>
</div>
<div id="learning-check-2.15" class="section level3">
<h3>Learning Check 2.15</h3>
<p><em>Would you classify the distribution of temperatures as symmetric or skewed?</em></p>
<p><strong>Answer:</strong> It looks pretty symmetric.</p>
</div>
<div id="learning-check-2.16" class="section level3">
<h3>Learning Check 2.16</h3>
<p><em>What would you guess is the “center” value in this distribution? Why did you make that choice?</em></p>
<p><strong>Answer:</strong> Visually, we see that the temperatures are symmetrically destributed and the range is from about 10-100°, so the “center” value is likely about 55°. When we run <code>summary()</code> on <code>weather</code> and look at <code>temp</code> we see that the median is 55.40° and the mean is 55.26.</p>
<pre class="r"><code>summary(weather$temp)</code></pre>
<pre><code>##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max.    NA&#39;s 
##   10.94   39.92   55.40   55.26   69.98  100.04       1</code></pre>
</div>
<div id="learning-check-2.17" class="section level3">
<h3>Learning Check 2.17</h3>
<p><em>Is the data spread out greatly from the center or is it close? Why?</em></p>
<p><strong>Answer:</strong> That depends on what “greatly” means. Compared to other years? Compared to another city? When compared to Kailua, Hawaii, a place with averages from 69-85°, then yes, the weather in NYC was more spread out.</p>
</div>
<div id="practice-2.6-facets" class="section level3">
<h3>Practice 2.6: Facets</h3>
<p>Facets can break off variable by another variable for visualizations. <code>facet_wrap</code> is a visualization modifier <code>ggplot2</code> that will create multiple plots where the x and y axes match but each plot will look different according to the modifying variable. For example, we can look at <code>weather</code> by <code>temp</code> by <code>month</code>.</p>
<pre class="r"><code>ggplot(data = weather,
       mapping = aes(x = temp)) +
  geom_histogram(binwidth = 5, color = &quot;white&quot;) +
  facet_wrap(~ month)</code></pre>
<p><img src="moderndive_checks_files/figure-html/facetmonth-1.png" width="672" /></p>
<p>Above we see temps by month. We can further modify the output by asking for the plot to have 4 rows.</p>
<pre class="r"><code>ggplot(data = weather,
       mapping = aes(x = temp)) +
  geom_histogram(binwidth = 5, color = &quot;white&quot;) +
  facet_wrap(~ month, nrow = 4)</code></pre>
<p><img src="moderndive_checks_files/figure-html/facetmonthrow4-1.png" width="672" /></p>
<p>Now we see a basic histogram of temps in a 4x3 arrangement, useful if you’re the type that thinks in quarters.</p>
</div>
<div id="learning-check-2.18" class="section level3">
<h3>Learning Check 2.18</h3>
<p><em>What other things do you notice about the faceted plot above? How does a faceted plot help us see relationships between two variables?</em></p>
<p><strong>Answer:</strong> The faceted plot shows that while the original histogram was symmetrically distributed, the temperatures vary from month to month. No month sees both near 0° and near 100° weather.</p>
</div>
<div id="learning-check-2.19" class="section level3">
<h3>Learning Check 2.19</h3>
<p><em>What do the numbers 1-12 correspond to in the plot above? What about 25, 50, 75, 100?</em></p>
<p><strong>Answer:</strong> The numbers 1-12 correspond to months and 25, 50, 75, 100 correspond to temperature.</p>
</div>
<div id="learning-check-2.20" class="section level3">
<h3>Learning Check 2.20</h3>
<p><em>For which types of data sets would these types of faceted plots not work well in comparing relationships between variables? Give an example describing the nature of these variables and other important characteristics.</em></p>
<p><strong>Answer:</strong> Facets plot a variable broken up by another variable. For temperature, we broke it down by month. <code>nycflights13</code> only has temperature data for the year 2013, so if we tried to plot the temperature by year, we’d have only one facet. We would need data from multiple years. Conversely, it would be a little ridiculous <code>facet_wrap</code> by day because we would end up with 365 plots.</p>
</div>
<div id="learning-check-2.21" class="section level3">
<h3>Learning Check 2.21</h3>
<p><em>Does the <code>temp</code> variable in the <code>weather</code> data set have a lot of variability? Why do you say that?</em></p>
<p><strong>Answer:</strong> That depends on what “a lot” means. For New York City, it seems pretty reasonable. For Kailua, Hawaii, it would be… a lot.</p>
</div>
<div id="practice-2.7-boxplots" class="section level3">
<h3>Practice 2.7: Boxplots</h3>
<p>Boxplots require a categorical variable in the x-axis. They show the range of data in quartiles where the center bolded line is the median, the area above the median and within the box is the third quartile, the area below the median within the box is the second quartile, and the whiskers on either end represent the first and fourth quartiles. Of note, the whiskers do not include data points that are 1.5x greater or less than the interquartile range. Those values are considered outliers.</p>
<pre class="r"><code>ggplot(data = weather,
       mapping = aes(x = month, y = temp))+
  geom_boxplot()</code></pre>
<p><img src="moderndive_checks_files/figure-html/boxplot1-1.png" width="672" /></p>
<p>The plot above is not very helpful because the months are numerical instead of categorical. Boxplots require categorical variables in the x-axis.</p>
<pre class="r"><code>ggplot(data = weather, 
       mapping = aes(x = factor(month), y = temp)) +
  geom_boxplot()</code></pre>
<p><img src="moderndive_checks_files/figure-html/boxplotcatmonth-1.png" width="672" /></p>
<p>Here we a have box plot of the temperatures by month with dots identifying values considered outliers. Outliers in these boxplots are those values that are more than 1.5x greater than the interquartile range (IQR).</p>
</div>
<div id="learning-check-2.22" class="section level3">
<h3>Learning Check 2.22</h3>
<p><em>What does the dot at the bottom of the plot for May correspond to? Explain what might have occurred in May to produce this point.</em></p>
<p><strong>Answer:</strong> The dot is an outlier value in the month of May. It is rather extreme, so let’s see if the same temperature was recorded at multiple airports or if perhaps there’s an error in the data.</p>
<pre class="r"><code>weather %&gt;% 
  filter(month==5 &amp; temp &lt; 25)</code></pre>
<pre><code>## # A tibble: 1 x 16
##   origin  year month   day  hour  temp  dewp humid wind_dir wind_speed
##   &lt;chr&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;      &lt;dbl&gt;
## 1 JFK     2013     5     8    22  13.1  12.0  95.3       80       8.06
## # … with 6 more variables: wind_gust &lt;dbl&gt;, precip &lt;dbl&gt;, pressure &lt;dbl&gt;,
## #   visib &lt;dbl&gt;, time_hour &lt;dttm&gt;, temp_in_C &lt;dbl&gt;</code></pre>
<p>Here we see only one airport on one day at 10pm registered a very low temperature. This looks like a data entry error. Just to double check, let’s look at the temperatures leading up to May 8 at 10pm.</p>
<pre class="r"><code>weather %&gt;% 
  filter(month==5 &amp; day==8 &amp; hour &gt;18) %&gt;% 
  arrange(hour)</code></pre>
<pre><code>## # A tibble: 15 x 16
##    origin  year month   day  hour  temp  dewp humid wind_dir wind_speed
##    &lt;chr&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;      &lt;dbl&gt;
##  1 EWR     2013     5     8    19  60.1  52.0  74.6       NA       3.45
##  2 JFK     2013     5     8    19  57.9  52.0  80.6      120      10.4 
##  3 LGA     2013     5     8    19  61.0  51.1  69.9      150       8.06
##  4 EWR     2013     5     8    20  59    53.1  80.6       80       4.60
##  5 JFK     2013     5     8    20  57.0  51.1  80.5      150       8.06
##  6 LGA     2013     5     8    20  60.1  48.9  66.6      140       5.75
##  7 EWR     2013     5     8    21  59    53.1  80.6       80       4.60
##  8 JFK     2013     5     8    21  57.0  48.9  74.3      170      11.5 
##  9 LGA     2013     5     8    21  59    48.9  69.2       NA       5.75
## 10 EWR     2013     5     8    22  59    52.0  77.5       90       3.45
## 11 JFK     2013     5     8    22  13.1  12.0  95.3       80       8.06
## 12 LGA     2013     5     8    22  59    51.1  75.0      100       6.90
## 13 EWR     2013     5     8    23  57.9  52.0  80.6        0       0   
## 14 JFK     2013     5     8    23  57.2  53.6  87.7      120       4.60
## 15 LGA     2013     5     8    23  55.9  51.1  83.7       90       6.90
## # … with 6 more variables: wind_gust &lt;dbl&gt;, precip &lt;dbl&gt;, pressure &lt;dbl&gt;,
## #   visib &lt;dbl&gt;, time_hour &lt;dttm&gt;, temp_in_C &lt;dbl&gt;</code></pre>
<p>Here we see that every row, asid is showing a temperature range of about 50-61°. Row 11 definitely looks like an error.</p>
</div>
<div id="learning-check-2.23" class="section level3">
<h3>Learning Check 2.23</h3>
<p><em>Which months have the highest variability in temperature? What reasons can you give for this?</em></p>
<p><strong>Answer:</strong> It looks like November had the most variability but december and January are close. Below is a plot of the IQRs:</p>
<pre class="r"><code>weather %&gt;% 
  group_by(month) %&gt;% 
  summarize(IQR = IQR(temp, na.rm=TRUE)) %&gt;% 
  arrange(desc(IQR))</code></pre>
<pre><code>## # A tibble: 12 x 2
##    month   IQR
##    &lt;dbl&gt; &lt;dbl&gt;
##  1    11 16.0 
##  2    12 14.0 
##  3     1 13.8 
##  4     9 12.1 
##  5     4 12.1 
##  6     5 11.9 
##  7     6 11.0 
##  8    10 11.0 
##  9     2 10.1 
## 10     7  9.18
## 11     3  9   
## 12     8  7.02</code></pre>
<p>It looks like November, December, January, and September were the most variable.</p>
</div>
<div id="learning-check-2.24" class="section level3">
<h3>Learning Check 2.24</h3>
<p><em>We looked at the distribution of the numerical variable <code>temp</code> split by the numerical variable <code>month</code> that we converted to a categorical variable using the <code>factor()</code> function. Why would a boxplot of <code>temp</code> split by the numerical variable <code>pressure</code> similarly converted to a categorical variable using the <code>factor()</code> not be informative?</em></p>
<p><strong>Answer:</strong> Because there are only 12 months whereas there are significantly more values for <code>pressure</code>.</p>
</div>
<div id="learning-check-2.25" class="section level3">
<h3>Learning Check 2.25</h3>
<p><em>Boxplots provide a simple way to identify outliers. Why may outliers be easier to identify when looking at a boxplot instead of a faceted histogram?</em></p>
<p><strong>Answer:</strong> Because histograms have bins to group values together whereas boxplots clearly labeled outliers.</p>
</div>
<div id="practice-2.8-barplots" class="section level3">
<h3>Practice 2.8: Barplots</h3>
<p>Barplots are useful for categorical variables while histograms and boxplots are for numerical variables. For example, let’s create another data frame.</p>
<pre class="r"><code>dogs &lt;- tibble(
  dog = c(&quot;corgi&quot;, &quot;corgi&quot;, &quot;lab&quot;, &quot;corgi&quot;, &quot;lab&quot;))
dogs_counted &lt;- tibble(
  dog = c(&quot;corgi&quot;, &quot;lab&quot;),
  number = c(3, 2)
)
dogs</code></pre>
<pre><code>## # A tibble: 5 x 1
##   dog  
##   &lt;chr&gt;
## 1 corgi
## 2 corgi
## 3 lab  
## 4 corgi
## 5 lab</code></pre>
<pre class="r"><code>dogs_counted</code></pre>
<pre><code>## # A tibble: 2 x 2
##   dog   number
##   &lt;chr&gt;  &lt;dbl&gt;
## 1 corgi      3
## 2 lab        2</code></pre>
<p>Above there are two tibbles, one that lists dogs and the other that shows the counted values. Depending on how data are saved, there are two different ways of creating a barplot.</p>
<p>To create a barplot without a counted variable:</p>
<pre class="r"><code>ggplot(data = dogs,
       mapping = aes (x = dog)) +
  geom_bar()</code></pre>
<p><img src="moderndive_checks_files/figure-html/barplot2-1.png" width="672" /></p>
<p>To create a barplot with a counted variable:</p>
<pre class="r"><code>ggplot(data = dogs_counted,
       mapping = aes(x = dog, y = number)) +
  geom_col()</code></pre>
<p><img src="moderndive_checks_files/figure-html/barplot3-1.png" width="672" /></p>
<p>Both plots look the same but the coding needed to create them is different because of how the data was entered (counted or not).</p>
<p>Now we can try with the <code>nycflights13</code> data. Let’s create barplot with <code>carrier</code>. The data in the <code>carrier</code> column is not counted, that is to say there is a categorical entry for each row under <code>carrier</code> such as <code>DL</code> for Delta Airlines.</p>
<pre class="r"><code>ggplot(data = flights,
       mapping = aes(x = carrier)) +
  geom_bar()</code></pre>
<p><img src="moderndive_checks_files/figure-html/barplot%204-1.png" width="672" /></p>
<p>Here we can see that <code>UA</code> or United Airlines has the highest number of flights out of NYC.</p>
</div>
<div id="learning-check-2.26" class="section level3">
<h3>Learning Check 2.26</h3>
<p><em>Why are histograms inappropriate for visualizing categorical variables?</em></p>
<p><strong>Answer:</strong> Because histograms are for numerical variables, not categorical variables.</p>
</div>
<div id="learning-check-2.27" class="section level3">
<h3>Learning Check 2.27</h3>
<p><em>What is the difference between histograms and barplots?</em></p>
<p><strong>Answer:</strong> Barplots are for categorical variables while histograms are for numerical variables</p>
</div>
<div id="learning-check-2.28" class="section level3">
<h3>Learning Check 2.28</h3>
<p><em>How many Envoy Air flights departed NYC in 2013</em></p>
<p><strong>Answer:</strong> Below we see that there are 26,397 Envoy Air flights departing NYC in 2013.</p>
<pre class="r"><code>envoy_flights &lt;- flights %&gt;% 
  filter (carrier == &quot;MQ&quot;)
glimpse(envoy_flights)</code></pre>
<pre><code>## Observations: 26,397
## Variables: 20
## $ year           &lt;int&gt; 2013, 2013, 2013, 2013, 2013, 2013, 2013, 2013, 2…
## $ month          &lt;int&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1…
## $ day            &lt;int&gt; 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1…
## $ dep_time       &lt;int&gt; 600, 602, 608, 624, 656, 749, 800, 805, 811, 821,…
## $ sched_dep_time &lt;int&gt; 600, 605, 600, 630, 705, 710, 810, 815, 630, 825,…
## $ dep_delay      &lt;dbl&gt; 0, -3, 8, -6, -9, 39, -10, -10, 101, -4, -5, -8, …
## $ arr_time       &lt;int&gt; 837, 821, 807, 840, 1007, 939, 949, 1006, 1047, 9…
## $ sched_arr_time &lt;int&gt; 825, 805, 735, 830, 940, 850, 955, 1010, 830, 945…
## $ arr_delay      &lt;dbl&gt; 12, 16, 32, 10, 27, 49, -6, -4, 137, -13, -13, -2…
## $ carrier        &lt;chr&gt; &quot;MQ&quot;, &quot;MQ&quot;, &quot;MQ&quot;, &quot;MQ&quot;, &quot;MQ&quot;, &quot;MQ&quot;, &quot;MQ&quot;, &quot;MQ&quot;, &quot;…
## $ flight         &lt;int&gt; 4650, 4401, 3768, 4599, 4534, 3737, 4406, 4490, 4…
## $ tailnum        &lt;chr&gt; &quot;N542MQ&quot;, &quot;N730MQ&quot;, &quot;N9EAMQ&quot;, &quot;N518MQ&quot;, &quot;N722MQ&quot;,…
## $ origin         &lt;chr&gt; &quot;LGA&quot;, &quot;LGA&quot;, &quot;EWR&quot;, &quot;LGA&quot;, &quot;LGA&quot;, &quot;EWR&quot;, &quot;JFK&quot;, …
## $ dest           &lt;chr&gt; &quot;ATL&quot;, &quot;DTW&quot;, &quot;ORD&quot;, &quot;MSP&quot;, &quot;XNA&quot;, &quot;ORD&quot;, &quot;RDU&quot;, …
## $ air_time       &lt;dbl&gt; 134, 105, 139, 166, 233, 148, 80, 101, 118, 52, 1…
## $ distance       &lt;dbl&gt; 762, 502, 719, 1020, 1147, 719, 427, 479, 544, 21…
## $ hour           &lt;dbl&gt; 6, 6, 6, 6, 7, 7, 8, 8, 6, 8, 8, 8, 8, 18, 9, 8, …
## $ minute         &lt;dbl&gt; 0, 5, 0, 30, 5, 10, 10, 15, 30, 25, 35, 40, 50, 3…
## $ time_hour      &lt;dttm&gt; 2013-01-01 06:00:00, 2013-01-01 06:00:00, 2013-0…
## $ gain           &lt;dbl&gt; -12, -19, -24, -16, -36, -10, -4, -6, -36, 9, 8, …</code></pre>
</div>
<div id="learning-check-2.29" class="section level3">
<h3>Learning Check 2.29</h3>
<p><em>What was the seventh highest airline in terms of departed flights from NYC in 2013? How could we better present the table to get this answer quickly?</em></p>
<p><strong>Answer:</strong> Looking at the barplot above, it appears that US Airways had the seventh most flights. Creating a new tibble to show airlines by count would be helpful.</p>
</div>
<div id="learning-check-2.30" class="section level3">
<h3>Learning Check 2.30</h3>
<p><em>Why should pie charts be avoided and replaced by barplots?</em></p>
<p><strong>Answer:</strong> Because they are difficult to read, especially when there are more than 2 or three variables</p>
</div>
<div id="learning-check-2.31" class="section level3">
<h3>Learning Check 2.31</h3>
<p><em>Why do you think people continue to use pie charts?</em></p>
<p><strong>Answer:</strong> Because they’ve never had to make an important decision based off one.</p>
</div>
<div id="practice-2.8.3-stacked-barplots" class="section level3">
<h3>Practice 2.8.3: Stacked Barplots</h3>
<p>Barplots can have more than one categorical variable. For example, let’s create a barplot for the number of flights by <code>carrier</code> and <code>origin</code>.</p>
<pre class="r"><code>ggplot(data = flights,
       mapping = aes(x = carrier, fill = origin)) +
  geom_bar()</code></pre>
<p><img src="moderndive_checks_files/figure-html/barplotcarori-1.png" width="672" /></p>
<p>This plot shows the count of flights by carrier and filled in with three different colors according to the origin of the flight. This is a stacked barplot. This isn’t the most ideal plot because it is difficult to compare the stacks based on origin unless there are significant differences. This plot suffers from a similar issue as a pie chart, though this is definitely an improvement.</p>
</div>
<div id="learning-check-2.32" class="section level3">
<h3>Learning Check 2.32</h3>
<p><em>What kinds of questions are not easily answered by looking at the above figure?</em></p>
<p><strong>Answer:</strong> The stacked barplot isn’t useful for telling us exactly how many flights were with which carrier or which origin. If there were only two airports of origin, it might be a little easier to compare using this kind of plot.</p>
</div>
<div id="learning-check-2.33" class="section level3">
<h3>Learning Check 2.33</h3>
<p><em>What can you say, if anything, about the relationship between airline and airport in NYC in 2013 in regards to the number of departing flights?</em></p>
<p><strong>Answer:</strong> We might be able to guess which airports are a hub for which airlines. For example, it is likely that Newark, <code>EWR</code>, is a hub for United Airlines, <code>UA</code>.</p>
</div>
<div id="practice-2.8.4-dodged-barplots" class="section level3">
<h3>Practice 2.8.4: Dodged Barplots</h3>
<p>Stacked barplots can also be broken down so that they are side-by-side, also called dodged barplots. For example:</p>
<pre class="r"><code>ggplot(data = flights,
       mapping = aes(x = carrier, fill = origin)) +
  geom_bar(position = &quot;dodge&quot;)</code></pre>
<p><img src="moderndive_checks_files/figure-html/dodgedbp-1.png" width="672" /></p>
<p>This plot has all the bars starting at 0, making it easier for us to compare the number of flights by carrier and origin. Looking at Delta Airlines, <code>DL</code>, it looks like they use both JFK and LaGuardia as hubs.</p>
</div>
<div id="learning-check-2.34" class="section level3">
<h3>Learning Check 2.34</h3>
<p><em>Why might the side-by-side (AKA dodged) barplot be preferable to a stacked barplot in this case?</em></p>
<p><strong>Answer:</strong> In this case, it is easier to compare differences in carrier and origin counts with a dodged barplot because some of the counts are very similar to one another and there are many carriers.</p>
</div>
<div id="learning-check-2.35" class="section level3">
<h3>Learning Check 2.35</h3>
<p><em>What are the disadvantages of using a side-by-side (AKA dodged) barplot, in general?</em></p>
<p><strong>Answer:</strong> There’s a lot to look at in this type of plot with the data we’re using for it. We still can’t see the actual counts for each origin by carrier.</p>
</div>
<div id="practice-2.8.5-faceted-barplots" class="section level3">
<h3>Practice 2.8.5: Faceted Barplots</h3>
<p>Another variation on the barplot is a faceted barplot. Here we can split off the barplot into three different plots by origin.</p>
<pre class="r"><code>ggplot(data = flights,
       mapping = aes(x = carrier)) +
  geom_bar() +
  facet_wrap(~ origin, ncol = 1)</code></pre>
<p><img src="moderndive_checks_files/figure-html/facbarplot-1.png" width="672" /></p>
<p>Here I’ve removed the <code>mapping</code> of <code>origin</code> and added a <code>facet_wrap</code> with <code>~ origin</code>. I’ve also included a <code>ncol = 1</code> so that all three origins aren’t on one row. It could also be written <code>nrow = 3</code> since I know how many origins there are.</p>
</div>
<div id="learning-check-2.35-1" class="section level3">
<h3>Learning Check 2.35</h3>
<p><em>Why is the faceted barplot preferred to the side-by-side and stacked barplots in this case?</em></p>
<p><strong>Answer:</strong> Well, it depends on what question(s) you’re trying to answer, but here there is a bit more visual space between each carrier.</p>
</div>
<div id="learning-check-2.36" class="section level3">
<h3>Learning Check 2.36</h3>
<p><em>What information about the different carriers at different airports is more easily seen in the faceted barplot?</em></p>
<p><strong>Answer:</strong> We can see which carriers prefer which airports. Again, Delta is pretty evenly split between JFK and LGA.</p>
</div>
</div>
<div id="chapter-3-data-wrangling" class="section level2">
<h2>Chapter 3: Data Wrangling</h2>
<p>This chapter is about taking existing data and learning to transform it via <code>filter()</code>, <code>summarize()</code>, <code>group_by()</code>, <code>mutate()</code>, <code>arrange()</code>, and <code>join()</code>. The pipe operator <code>%&gt;%</code> allows for multiple functions to be used sequentially.</p>
<div id="practice-3.1-the-pipe-operator" class="section level3">
<h3>Practice 3.1: The pipe operator: <code>%&gt;%</code></h3>
<p>The pipe operator <code>%&gt;%</code> is a tool in the <code>dplyr</code> package. It allows for functions to be nested <code>c(b(a(x)))</code>. Though it looks backwards, it would be like taking data frame <code>x</code>, using it in function <code>a()</code> which would be <code>a(x)</code>, taking that output <code>a(x)</code> and using it in function <code>b()</code> which would be <code>b(a(x))</code>, and so on.</p>
<p>The <code>%&gt;%</code> is used in nested code to make it easier to read. It would look like:</p>
<pre class="r"><code>x %&gt;% 
  a() %&gt;% 
  b() %&gt;% 
  c()</code></pre>
<p>Often times it is helpful to read <code>%&gt;%</code> as “then”. This is similar to in <code>ggplot()</code> using the <code>+</code> symbol to add a chain of actions. With <code>%&gt;%</code> we can chain two pieces of code together.</p>
<p>For example, if I wanted to create a new data frame named <code>alaska_flights</code> the code would be <code>alaska_flights &lt;- flights</code>. This code is telling R to take the data frame <code>flights</code> and create a new data frame named <code>alaska_flights</code>. Next, I want to <code>filter</code> the data frame <code>flights</code> by carrier <code>AS</code>. This code would be <code>filter(carrier == &quot;AS&quot;)</code>. Put all together, it would be:</p>
<pre class="r"><code>alaska_flights &lt;- flights %&gt;% 
  filter(carrier == &quot;AS&quot;)
as_tibble(alaska_flights)</code></pre>
<pre><code>## # A tibble: 714 x 20
##     year month   day dep_time sched_dep_time dep_delay arr_time
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;
##  1  2013     1     1      724            725        -1     1020
##  2  2013     1     1     1808           1815        -7     2111
##  3  2013     1     2      722            725        -3      949
##  4  2013     1     2     1818           1815         3     2131
##  5  2013     1     3      724            725        -1     1012
##  6  2013     1     3     1817           1815         2     2121
##  7  2013     1     4      725            725         0     1031
##  8  2013     1     4     1808           1815        -7     2101
##  9  2013     1     5      725            725         0     1011
## 10  2013     1     5     1803           1815       -12     2118
## # … with 704 more rows, and 13 more variables: sched_arr_time &lt;int&gt;,
## #   arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;, tailnum &lt;chr&gt;,
## #   origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;, hour &lt;dbl&gt;,
## #   minute &lt;dbl&gt;, time_hour &lt;dttm&gt;, gain &lt;dbl&gt;</code></pre>
</div>
<div id="practice-3.2-filter-rows" class="section level3">
<h3>Practice 3.2: <code>filter</code> rows</h3>
<p>The <code>filter()</code> function is pretty straightforward, it will select only the rows that fit your parameters. This means it is often best to start with <code>filter()</code> before moving on to other functions because it narrows down the number of observations for the functions that follow after it. One thing to note is the double <code>==</code> here. Other operations are:</p>
<ul>
<li><code>&gt;</code> greater than</li>
<li><code>&lt;</code> less than</li>
<li><code>&gt;=</code> greater than or equal to</li>
<li><code>&lt;=</code> less than or equal to</li>
<li><code>!=</code> not equal to</li>
</ul>
<p>You can also add the following:</p>
<ul>
<li><code>|</code> or</li>
<li><code>&amp;</code> and</li>
</ul>
<p>For example, this is how to filter <code>flights</code> for all rows that departed from JFK, were headed to Burlington, Vermont or Seattle, Washington and departed in the months of October, November, or December:</p>
<pre class="r"><code>btv_sea_flights_fall &lt;- flights %&gt;% 
  filter(origin == &quot;JFK&quot; &amp; 
           (dest == &quot;BTV&quot; | dest == &quot;SEA&quot;) &amp;
           month &gt;= 10)
as_tibble(btv_sea_flights_fall)</code></pre>
<pre><code>## # A tibble: 815 x 20
##     year month   day dep_time sched_dep_time dep_delay arr_time
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;
##  1  2013    10     1      729            735        -6     1049
##  2  2013    10     1      853            900        -7     1217
##  3  2013    10     1      916            925        -9     1016
##  4  2013    10     1     1216           1221        -5     1326
##  5  2013    10     1     1452           1459        -7     1602
##  6  2013    10     1     1459           1500        -1     1817
##  7  2013    10     1     1754           1800        -6     2102
##  8  2013    10     1     1825           1830        -5     2159
##  9  2013    10     1     1925           1930        -5     2227
## 10  2013    10     1     2238           2245        -7     2348
## # … with 805 more rows, and 13 more variables: sched_arr_time &lt;int&gt;,
## #   arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;, tailnum &lt;chr&gt;,
## #   origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;, hour &lt;dbl&gt;,
## #   minute &lt;dbl&gt;, time_hour &lt;dttm&gt;, gain &lt;dbl&gt;</code></pre>
<p>Or we can look at flights that were not going to Burlington or Seattle with:</p>
<pre class="r"><code>not_btv_sea &lt;- flights %&gt;% 
  filter(!(dest == &quot;BTV&quot; | dest == &quot;SEA&quot;))
as_tibble(not_btv_sea)</code></pre>
<pre><code>## # A tibble: 330,264 x 20
##     year month   day dep_time sched_dep_time dep_delay arr_time
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;
##  1  2013     1     1      517            515         2      830
##  2  2013     1     1      533            529         4      850
##  3  2013     1     1      542            540         2      923
##  4  2013     1     1      544            545        -1     1004
##  5  2013     1     1      554            600        -6      812
##  6  2013     1     1      554            558        -4      740
##  7  2013     1     1      555            600        -5      913
##  8  2013     1     1      557            600        -3      709
##  9  2013     1     1      557            600        -3      838
## 10  2013     1     1      558            600        -2      753
## # … with 330,254 more rows, and 13 more variables: sched_arr_time &lt;int&gt;,
## #   arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;, tailnum &lt;chr&gt;,
## #   origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;, hour &lt;dbl&gt;,
## #   minute &lt;dbl&gt;, time_hour &lt;dttm&gt;, gain &lt;dbl&gt;</code></pre>
<p>If we have many airports, we can use the <code>%in%</code> operator:</p>
<pre class="r"><code>many_airports &lt;- flights %&gt;% 
  filter(dest %in% c(&quot;BTV&quot;, &quot;SEA&quot;, &quot;PDX&quot;, &quot;SFO&quot;, &quot;BDL&quot;))
as_tibble(many_airports)</code></pre>
<pre><code>## # A tibble: 21,640 x 20
##     year month   day dep_time sched_dep_time dep_delay arr_time
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;
##  1  2013     1     1      558            600        -2      923
##  2  2013     1     1      611            600        11      945
##  3  2013     1     1      655            700        -5     1037
##  4  2013     1     1      724            725        -1     1020
##  5  2013     1     1      729            730        -1     1049
##  6  2013     1     1      734            737        -3     1047
##  7  2013     1     1      743            730        13     1059
##  8  2013     1     1      745            745         0     1135
##  9  2013     1     1      746            746         0     1119
## 10  2013     1     1      803            800         3     1132
## # … with 21,630 more rows, and 13 more variables: sched_arr_time &lt;int&gt;,
## #   arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;, tailnum &lt;chr&gt;,
## #   origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;, hour &lt;dbl&gt;,
## #   minute &lt;dbl&gt;, time_hour &lt;dttm&gt;, gain &lt;dbl&gt;</code></pre>
</div>
<div id="learning-check-3.1" class="section level3">
<h3>Learning Check 3.1</h3>
<p><em>What’s another way of using the “not” operator <code>!</code> to filter only the rows that are not going to Burlington VT nor Seattle WA in the <code>flights</code> data frame? Test this out using the code above</em></p>
<p><strong>Answer:</strong> The original was <code>filter(!(dest == &quot;BTV&quot; | dest == &quot;SEA&quot;))</code> which could be read as “not(BTV or SEA)”. An alternative could be <code>filter(!dest == &quot;BTV&quot; &amp; !dest == &quot;SEA&quot;)</code> which would read as “not BTV and not SEA”. <code>!=</code> or “not equal to” could also be used, for example <code>filter(dest != &quot;BTV&quot; &amp; dest != &quot;SEA&quot;)</code>.</p>
</div>
<div id="practice-3.3-summarize-variables" class="section level3">
<h3>Practice 3.3: <code>summarize</code> variables</h3>
<p>The <code>summarize()</code> function shows the summary statistics for a variable. It can show several summary statistic values such as:</p>
<ul>
<li><code>mean()</code>: mean or average</li>
<li><code>sd()</code>: the standard deviation</li>
<li><code>min()</code> and <code>max()</code></li>
<li><code>IQR</code> Interquartile range</li>
<li><code>sum()</code>: the sum</li>
<li><code>n()</code>: count of the number of rows in each group</li>
</ul>
<p>For example, let’s calculate the mean and standard deviation of the variable <code>temp</code> in the <code>weather</code> data frame.</p>
<pre class="r"><code>summary_temp &lt;- weather %&gt;% 
  summarize(mean = mean(temp), 
            std_dev = sd(temp))
summary_temp</code></pre>
<pre><code>## # A tibble: 1 x 2
##    mean std_dev
##   &lt;dbl&gt;   &lt;dbl&gt;
## 1    NA      NA</code></pre>
<p>Here we see that R will return <code>NA</code> if any of the values is missing, so we need to add <code>na.rm = TRUE</code> so that R will remove those rows However, it is important to be aware of what might be causing these missing values and the ramifications of missing values in data.</p>
<pre class="r"><code>summary_temp &lt;- weather %&gt;% 
  summarize(mean = mean(temp, na.rm = TRUE), 
            std_dev = sd(temp, na.rm = TRUE))
summary_temp</code></pre>
<pre><code>## # A tibble: 1 x 2
##    mean std_dev
##   &lt;dbl&gt;   &lt;dbl&gt;
## 1  55.3    17.8</code></pre>
</div>
<div id="learning-check-3.2" class="section level3">
<h3>Learning Check 3.2</h3>
<p><em>Say a doctor is studying the effect of smoking on lung cancer for a large number of patients who have records measured at five year intervals. She notices that a large number of patients have missing data points because the patient has died, so she chooses to ignore these patients in her analysis. What is wrong with this doctor’s approach?</em></p>
<p><strong>Answer:</strong> I would think that dying from lung cancer is a pretty big effect of smoking! This is not an instance of a one-off data entry mistake, this could have a big impact on the analysis.</p>
</div>
<div id="learning-check-3.3" class="section level3">
<h3>Learning Check 3.3</h3>
<p><em>Modify the above <code>summarize</code> function to create <code>summary_temp</code> to also use the <code>n()</code> summary function: <code>summarize(count = n())</code>. What does the returned value correspond to?</em></p>
<p><strong>Answer:</strong></p>
<pre class="r"><code>summary_temp2 &lt;- weather %&gt;% 
  summarize(count = n())
summary_temp2</code></pre>
<pre><code>## # A tibble: 1 x 1
##   count
##   &lt;int&gt;
## 1 26115</code></pre>
<p>Here we see there are 26,115 rows.</p>
</div>
<div id="learning-check-3.4" class="section level3">
<h3>Learning Check 3.4</h3>
<p><em>Why doesn’t the following code work? Run the code line by line instead of all at once, and then look at the data. In other words, run <code>summary_temp &lt;- weather %&gt;% summarize(mean = mean(temp, na.rm = TRUE))</code> first.</em></p>
<pre class="r"><code>summary_temp3 &lt;- weather %&gt;% 
  summarize(mean = mean(temp, na.rm = TRUE)) %&gt;% 
  summarize(std_dev = sd(temp, na.rm = TRUE))</code></pre>
<p><strong>Answer:</strong> This code doesn’t work because it isn’t nested within the first <code>summarize()</code> function. This means that <code>temp</code> has already been summarized by <code>mean()</code>. The <code>%&gt;%</code> is like saying “then” with functions. Since <code>temp</code> has already been summarized, there isn’t anything left for <code>sd()</code> to do!</p>
</div>
<div id="practice-3.4-group_by-rows" class="section level3">
<h3>Practice 3.4: <code>group_by</code> rows</h3>
<p>The <code>group_by()</code> function allows us to look at rows (observations) by a variable. This is reminiscent of faceting. For example, if we wanted to look at the mean temperatures of <code>weather</code> by month, the code would look like:</p>
<pre class="r"><code>sum_monthly_temp &lt;- weather %&gt;% 
  group_by(month) %&gt;% 
  summarize(mean = mean(temp, na.rm = TRUE),
            std_dev = sd(temp, na.rm = TRUE))
sum_monthly_temp</code></pre>
<pre><code>## # A tibble: 12 x 3
##    month  mean std_dev
##    &lt;dbl&gt; &lt;dbl&gt;   &lt;dbl&gt;
##  1     1  35.6   10.2 
##  2     2  34.3    6.98
##  3     3  39.9    6.25
##  4     4  51.7    8.79
##  5     5  61.8    9.68
##  6     6  72.2    7.55
##  7     7  80.1    7.12
##  8     8  74.5    5.19
##  9     9  67.4    8.47
## 10    10  60.1    8.85
## 11    11  45.0   10.4 
## 12    12  38.4    9.98</code></pre>
<p>Here, the <code>group_by()</code> does’t change the data but it adds some meta-data. If we run <code>weather</code> before and after <code>group_by</code>, it would look the same except that <code># Groups: month [12]</code> would be added under <code># A tibble: 26,115 x 15</code>:</p>
<pre class="r"><code>weather</code></pre>
<pre><code>## # A tibble: 26,115 x 16
##    origin  year month   day  hour  temp  dewp humid wind_dir wind_speed
##    &lt;chr&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;      &lt;dbl&gt;
##  1 EWR     2013     1     1     1  39.0  26.1  59.4      270      10.4 
##  2 EWR     2013     1     1     2  39.0  27.0  61.6      250       8.06
##  3 EWR     2013     1     1     3  39.0  28.0  64.4      240      11.5 
##  4 EWR     2013     1     1     4  39.9  28.0  62.2      250      12.7 
##  5 EWR     2013     1     1     5  39.0  28.0  64.4      260      12.7 
##  6 EWR     2013     1     1     6  37.9  28.0  67.2      240      11.5 
##  7 EWR     2013     1     1     7  39.0  28.0  64.4      240      15.0 
##  8 EWR     2013     1     1     8  39.9  28.0  62.2      250      10.4 
##  9 EWR     2013     1     1     9  39.9  28.0  62.2      260      15.0 
## 10 EWR     2013     1     1    10  41    28.0  59.6      260      13.8 
## # … with 26,105 more rows, and 6 more variables: wind_gust &lt;dbl&gt;,
## #   precip &lt;dbl&gt;, pressure &lt;dbl&gt;, visib &lt;dbl&gt;, time_hour &lt;dttm&gt;,
## #   temp_in_C &lt;dbl&gt;</code></pre>
<pre class="r"><code>grouped_weather &lt;- weather %&gt;% 
  group_by(month)
grouped_weather</code></pre>
<pre><code>## # A tibble: 26,115 x 16
## # Groups:   month [12]
##    origin  year month   day  hour  temp  dewp humid wind_dir wind_speed
##    &lt;chr&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt; &lt;int&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;      &lt;dbl&gt;
##  1 EWR     2013     1     1     1  39.0  26.1  59.4      270      10.4 
##  2 EWR     2013     1     1     2  39.0  27.0  61.6      250       8.06
##  3 EWR     2013     1     1     3  39.0  28.0  64.4      240      11.5 
##  4 EWR     2013     1     1     4  39.9  28.0  62.2      250      12.7 
##  5 EWR     2013     1     1     5  39.0  28.0  64.4      260      12.7 
##  6 EWR     2013     1     1     6  37.9  28.0  67.2      240      11.5 
##  7 EWR     2013     1     1     7  39.0  28.0  64.4      240      15.0 
##  8 EWR     2013     1     1     8  39.9  28.0  62.2      250      10.4 
##  9 EWR     2013     1     1     9  39.9  28.0  62.2      260      15.0 
## 10 EWR     2013     1     1    10  41    28.0  59.6      260      13.8 
## # … with 26,105 more rows, and 6 more variables: wind_gust &lt;dbl&gt;,
## #   precip &lt;dbl&gt;, pressure &lt;dbl&gt;, visib &lt;dbl&gt;, time_hour &lt;dttm&gt;,
## #   temp_in_C &lt;dbl&gt;</code></pre>
<p>To remove this meta-data, we would need to run <code>grouped_weather</code> through <code>ungroup()</code>.</p>
<p>To count how many flights departed each of the three airports in NYC, use <code>group_by()</code> and <code>n()</code>:</p>
<pre class="r"><code>count_by_origin &lt;- flights %&gt;% 
  group_by(origin) %&gt;% 
  summarize(count = n())
count_by_origin</code></pre>
<pre><code>## # A tibble: 3 x 2
##   origin  count
##   &lt;chr&gt;   &lt;int&gt;
## 1 EWR    120835
## 2 JFK    111279
## 3 LGA    104662</code></pre>
<p>Here we see how many flights departed from each of the three airports in our <code>flights</code> data frame.</p>
</div>
<div id="practice-3.4.1-grouping-by-more-than-one-variable" class="section level3">
<h3>Practice 3.4.1: Grouping by more than one variable</h3>
<p>The <code>group_by()</code> function can hold multiple variables. For example, if we wanted to look at how many flights departed each of the three airports for each month, we could use <code>group_by(origin, month)</code>.</p>
<pre class="r"><code>count_by_origin_monthly &lt;- flights %&gt;% 
  group_by(origin, month) %&gt;% 
  summarize(count = n())
count_by_origin_monthly</code></pre>
<pre><code>## # A tibble: 36 x 3
## # Groups:   origin [3]
##    origin month count
##    &lt;chr&gt;  &lt;int&gt; &lt;int&gt;
##  1 EWR        1  9893
##  2 EWR        2  9107
##  3 EWR        3 10420
##  4 EWR        4 10531
##  5 EWR        5 10592
##  6 EWR        6 10175
##  7 EWR        7 10475
##  8 EWR        8 10359
##  9 EWR        9  9550
## 10 EWR       10 10104
## # … with 26 more rows</code></pre>
<p>Here we see there are 36 rows be each of the 3 airports has counts for 12 months.</p>
</div>
<div id="learning-check-3.5" class="section level3">
<h3>Learning Check 3.5</h3>
<p><em>Recall from Chapter 2 when we looked at plots of temperatures by months in NYC. What does the standard deviation column in the <code>sum_monthly_temp</code> data frame tell us about temperatures in New York City throughout the year?</em></p>
<p><strong>Answer:</strong> From the <code>sum_monthly_temp</code> data frame, we see that November, December, and January had the most variability (highest <code>sd</code>) and March and August had the least variability (lowest <code>sd</code>).</p>
</div>
<div id="learning-check-3.6" class="section level3">
<h3>Learning Check 3.6</h3>
<p><em>What code would be required to get the mean and standard deviation temperature for each day in 2013 for NYC?</em></p>
<p><strong>Answer:</strong></p>
<pre class="r"><code>daily_summary &lt;- weather %&gt;% 
  group_by(year, month, day) %&gt;% 
  summarise(mean = mean(temp, na.rm = TRUE),
            std_dev = sd(temp, na.rm = TRUE))
daily_summary</code></pre>
<pre><code>## # A tibble: 364 x 5
## # Groups:   year, month [12]
##     year month   day  mean std_dev
##    &lt;dbl&gt; &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt;   &lt;dbl&gt;
##  1  2013     1     1  37.0    4.00
##  2  2013     1     2  28.7    3.45
##  3  2013     1     3  30.0    2.58
##  4  2013     1     4  34.9    2.45
##  5  2013     1     5  37.2    4.01
##  6  2013     1     6  40.1    4.40
##  7  2013     1     7  40.6    3.68
##  8  2013     1     8  40.1    5.77
##  9  2013     1     9  43.2    5.40
## 10  2013     1    10  43.8    2.95
## # … with 354 more rows</code></pre>
<p>Interestingly, we see there are only 364 rows, not 365. Looking at the data frame in R, we see that there is no data for December 31, 2013.</p>
</div>
<div id="learning-check-3.7" class="section level3">
<h3>Learning Check 3.7</h3>
<p><em>Recreate <code>by_monthly_origin</code>, but instead of grouping via <code>group_by(origin, month)</code>, group variables in a different order <code>group_by(month, origin)</code>. What differs in the resulting dataset?</em></p>
<p><strong>Answer:</strong> The original code showed the following output:</p>
<pre class="r"><code>count_by_origin_monthly</code></pre>
<pre><code>## # A tibble: 36 x 3
## # Groups:   origin [3]
##    origin month count
##    &lt;chr&gt;  &lt;int&gt; &lt;int&gt;
##  1 EWR        1  9893
##  2 EWR        2  9107
##  3 EWR        3 10420
##  4 EWR        4 10531
##  5 EWR        5 10592
##  6 EWR        6 10175
##  7 EWR        7 10475
##  8 EWR        8 10359
##  9 EWR        9  9550
## 10 EWR       10 10104
## # … with 26 more rows</code></pre>
<p>This shows the data as organized by origin first, then by month.</p>
<p>The following code organizes the same data by month first, then by origin. It is the same data, just organized in a different way.</p>
<pre class="r"><code>by_month_origin &lt;- flights %&gt;% 
  group_by(month, origin) %&gt;% 
  summarize(count = n())
by_month_origin</code></pre>
<pre><code>## # A tibble: 36 x 3
## # Groups:   month [12]
##    month origin count
##    &lt;int&gt; &lt;chr&gt;  &lt;int&gt;
##  1     1 EWR     9893
##  2     1 JFK     9161
##  3     1 LGA     7950
##  4     2 EWR     9107
##  5     2 JFK     8421
##  6     2 LGA     7423
##  7     3 EWR    10420
##  8     3 JFK     9697
##  9     3 LGA     8717
## 10     4 EWR    10531
## # … with 26 more rows</code></pre>
</div>
<div id="learning-check-3.8" class="section level3">
<h3>Learning Check 3.8</h3>
<p><em>How could we identify how many flights left each of the three airports for each <code>carrier</code>?</em></p>
<p><strong>Answer:</strong> We could group by carrier and origin and then use the <code>n()</code> function in <code>summarize()</code> to count all the rows.</p>
<pre class="r"><code>carrier_airport_flightcount &lt;- flights %&gt;% 
  group_by(carrier, origin) %&gt;% 
  summarize(count = n())
carrier_airport_flightcount</code></pre>
<pre><code>## # A tibble: 35 x 3
## # Groups:   carrier [16]
##    carrier origin count
##    &lt;chr&gt;   &lt;chr&gt;  &lt;int&gt;
##  1 9E      EWR     1268
##  2 9E      JFK    14651
##  3 9E      LGA     2541
##  4 AA      EWR     3487
##  5 AA      JFK    13783
##  6 AA      LGA    15459
##  7 AS      EWR      714
##  8 B6      EWR     6557
##  9 B6      JFK    42076
## 10 B6      LGA     6002
## # … with 25 more rows</code></pre>
</div>
<div id="learning-check-3.9" class="section level3">
<h3>Learning Check 3.9</h3>
<p><em>How does the <code>filter()</code> operation differ from a <code>group_by()</code> followed by a <code>summarize()</code>?</em></p>
<p><strong>Answer:</strong> <code>filter()</code> selects rows from a data set to create a new data frame. Nothing is new or computed, just filtered. <code>group_by() %&gt;% summarize()</code> adds meta data of groups and then computes new values, such as the mean or standard deviation according to those groupings.</p>
</div>
<div id="practice-3.5-mutate-existing-variables" class="section level3">
<h3>Practice 3.5: <code>mutate</code> existing variables</h3>
<p><code>mutate</code> can create or compute a new variable based on the existing ones in a data frame. For example, we can use the <code>temp</code> variable and the formula for converting Farenheit to Celcius to create a new variable <code>temp_in_C</code>.</p>
<pre class="r"><code>weather &lt;- weather %&gt;% 
  mutate(temp_in_C = (temp-32/1.8))
names(weather)</code></pre>
<pre><code>##  [1] &quot;origin&quot;     &quot;year&quot;       &quot;month&quot;      &quot;day&quot;        &quot;hour&quot;      
##  [6] &quot;temp&quot;       &quot;dewp&quot;       &quot;humid&quot;      &quot;wind_dir&quot;   &quot;wind_speed&quot;
## [11] &quot;wind_gust&quot;  &quot;precip&quot;     &quot;pressure&quot;   &quot;visib&quot;      &quot;time_hour&quot; 
## [16] &quot;temp_in_C&quot;</code></pre>
<p>Here we see all the variables in <code>weather</code> including the newest variable <code>temp_in_C</code>. We did not erase or replace any data, we added to the data frame. In general, it is okay to overwrite a data frame when adding to it. When we are filtering out and omitting values, it is best to create a new sub data frame.</p>
<p>Now that we have <code>temp_in_C</code> we can calculate the mean monthly temperatures in both F° and C°.</p>
<pre class="r"><code>summary_monthly_temp &lt;- weather %&gt;% 
  group_by(month) %&gt;% 
  summarize(mean_temp_in_F = mean(temp, na.rm=TRUE),
            mean_temp_in_C = mean(temp, na.rm=TRUE))
summary_monthly_temp</code></pre>
<pre><code>## # A tibble: 12 x 3
##    month mean_temp_in_F mean_temp_in_C
##    &lt;dbl&gt;          &lt;dbl&gt;          &lt;dbl&gt;
##  1     1           35.6           35.6
##  2     2           34.3           34.3
##  3     3           39.9           39.9
##  4     4           51.7           51.7
##  5     5           61.8           61.8
##  6     6           72.2           72.2
##  7     7           80.1           80.1
##  8     8           74.5           74.5
##  9     9           67.4           67.4
## 10    10           60.1           60.1
## 11    11           45.0           45.0
## 12    12           38.4           38.4</code></pre>
<p>Another example of computing new values based off the values of another variable is in looking at the difference in flights’ departure delay compared to their arrival delay.</p>
<pre class="r"><code>flights &lt;- flights %&gt;% 
  mutate(gain = dep_delay - arr_delay)
flights  </code></pre>
<pre><code>## # A tibble: 336,776 x 20
##     year month   day dep_time sched_dep_time dep_delay arr_time
##    &lt;int&gt; &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;
##  1  2013     1     1      517            515         2      830
##  2  2013     1     1      533            529         4      850
##  3  2013     1     1      542            540         2      923
##  4  2013     1     1      544            545        -1     1004
##  5  2013     1     1      554            600        -6      812
##  6  2013     1     1      554            558        -4      740
##  7  2013     1     1      555            600        -5      913
##  8  2013     1     1      557            600        -3      709
##  9  2013     1     1      557            600        -3      838
## 10  2013     1     1      558            600        -2      753
## # … with 336,766 more rows, and 13 more variables: sched_arr_time &lt;int&gt;,
## #   arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;, tailnum &lt;chr&gt;,
## #   origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;, hour &lt;dbl&gt;,
## #   minute &lt;dbl&gt;, time_hour &lt;dttm&gt;, gain &lt;dbl&gt;</code></pre>
<pre class="r"><code>flights2 &lt;- flights %&gt;% 
  select(dep_delay, arr_delay, gain) %&gt;% 
  slice(1:5)
flights2</code></pre>
<pre><code>## # A tibble: 5 x 3
##   dep_delay arr_delay  gain
##       &lt;dbl&gt;     &lt;dbl&gt; &lt;dbl&gt;
## 1         2        11    -9
## 2         4        20   -16
## 3         2        33   -31
## 4        -1       -18    17
## 5        -6       -25    19</code></pre>
<p>Here we see that the first flight was delayed by 2 minutes and arrived late by 11 minutes, meaning it had a negative gain of 9 minutes. The last flight left 6 minutes early and arrived 25 minutes early, for a gain of positive 19 minutes.</p>
<p>We can then run <code>summarize()</code> on the new variable <code>gain</code>.</p>
<pre class="r"><code>gain_summary &lt;- flights %&gt;% 
  summarize(
    min = min(gain, na.rm = TRUE),
    q1 = quantile(gain, 0.25, na.rm=TRUE),
    median = quantile(gain, 0.5, na.rm=TRUE),
    q3 = quantile(gain, 0.75, na.rm=TRUE),
    max = max(gain, na.rm=TRUE),
    mean = mean(gain, na.rm=TRUE),
    sd = sd(gain, na.rm=TRUE),
    missing = sum(is.na(gain))
  )
gain_summary</code></pre>
<pre><code>## # A tibble: 1 x 8
##     min    q1 median    q3   max  mean    sd missing
##   &lt;dbl&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;   &lt;int&gt;
## 1  -196    -3      7    17   109  5.66  18.0    9430</code></pre>
<p>We can then plot <code>gain</code> in a histogram:</p>
<pre class="r"><code>ggplot(flights,
       aes(x = gain)) +
  geom_histogram(color = &quot;white&quot;, bins = 20)</code></pre>
<p><img src="moderndive_checks_files/figure-html/mutate5-1.png" width="672" /></p>
<p><code>mutate</code> can compute multiple new variables at once with the <code>&amp;</code> or <code>,</code>.</p>
</div>
<div id="learning-check-3.10" class="section level3">
<h3>Learning Check 3.10</h3>
<p><em>What do positive values of the <code>gain</code> variable in <code>flights</code> correspond to? What about negative values? And what about a zero value?</em></p>
<p><strong>Answer:</strong> The positive values mean that the flight “made up” time in the air. The negative values mean that the flight “lost” time in the air. Zero would mean that the flight neither lost nor gained any time in air.</p>
</div>
<div id="learning-check-3.11" class="section level3">
<h3>Learning Check 3.11</h3>
<p><em>Could we create the <code>dep_delay</code> and <code>arr_delay</code> columns by simply subtracting <code>dep_time</code> from <code>sched_dep_time</code> and similarly for arrivals? Try the code out and explain any differences between the result and what actually appears in <code>flights.</code></em></p>
<p><strong>Answer:</strong> No because the times are written as 1258, 1259, 1300, 1301, so they can’t be added/subtracted.</p>
</div>
<div id="learning-check-3.12" class="section level3">
<h3>Learning Check 3.12</h3>
<p><em>What can we say about the distribution of <code>gain</code>? Describe it in a few sentences using the plot and the <code>gain_summary</code> data frame values.</em></p>
<p><strong>Answer:</strong> It is pretty normally distributed. Most of the gains are between -25 to 25.</p>
</div>
<div id="practice-3.6-arrange-and-sort-rows" class="section level3">
<h3>Practice 3.6: <code>arrange</code> and sort rows</h3>
<p><code>arrange()</code> can sort/reorder data by a variable. It is typically used after <code>group_by()</code> and <code>summarize()</code>.</p>
<p>For example, if we wanted to know the most frequent destination airports for all flights departing NYC in 2013:</p>
<pre class="r"><code>freq_dest &lt;- flights %&gt;% 
  group_by(dest) %&gt;% 
  summarize(num_flights = n()) %&gt;% 
  arrange(desc(num_flights))
freq_dest</code></pre>
<pre><code>## # A tibble: 105 x 2
##    dest  num_flights
##    &lt;chr&gt;       &lt;int&gt;
##  1 ORD         17283
##  2 ATL         17215
##  3 LAX         16174
##  4 BOS         15508
##  5 MCO         14082
##  6 CLT         14064
##  7 SFO         13331
##  8 FLL         12055
##  9 MIA         11728
## 10 DCA          9705
## # … with 95 more rows</code></pre>
<p>This output is grouped by destination and counted for each destination and then it is arranged in descending order by <code>num_flights</code>. Without `arrange(desc(num_flights), the data would be ordered first by alphabetical order of destinations and in ascending order.</p>
</div>
<div id="practice-3.7-join-data-frames" class="section level3">
<h3>Practice 3.7: <code>join</code> data frames</h3>
<p><code>join</code> can merge two different datasets. They need to have some sort of key variable that matches both data frames. For example, <code>flights</code> and <code>airlines</code> both have <code>carrier</code>. Key variables are almost always identification variables that can uniquely identify observational units.<code>airlines</code> has <code>carrier</code> that is a carrier code such as UA, or DL, but it also has what those codes mean under <code>name</code>. <code>flights</code> does not have <code>name</code>.</p>
</div>
<div id="practice-3.7.1-matching-key-variable-names" class="section level3">
<h3>Practice 3.7.1: Matching “key” variable names</h3>
<p>In order to <code>join</code> two data frames, they need to have a matching “key” variable. For <code>flights</code> and <code>airlines</code> we can use <code>carrier</code>. To do this, we use the <code>inner_join()</code> function.</p>
<pre class="r"><code>flights_joined &lt;-flights %&gt;% 
  inner_join(airlines, by = &quot;carrier&quot;)
names(flights_joined)</code></pre>
<pre><code>##  [1] &quot;year&quot;           &quot;month&quot;          &quot;day&quot;            &quot;dep_time&quot;      
##  [5] &quot;sched_dep_time&quot; &quot;dep_delay&quot;      &quot;arr_time&quot;       &quot;sched_arr_time&quot;
##  [9] &quot;arr_delay&quot;      &quot;carrier&quot;        &quot;flight&quot;         &quot;tailnum&quot;       
## [13] &quot;origin&quot;         &quot;dest&quot;           &quot;air_time&quot;       &quot;distance&quot;      
## [17] &quot;hour&quot;           &quot;minute&quot;         &quot;time_hour&quot;      &quot;gain&quot;          
## [21] &quot;name&quot;</code></pre>
<p>Here we see the names of all the variables in <code>flights_joined</code> and the newly added variabe of <code>name</code> from the merging of <code>airlines</code> and <code>flights</code>.</p>
</div>
<div id="practice-3.7.2-different-key-variable-names" class="section level3">
<h3>Practice 3.7.2: Different “key” variable names</h3>
<p>Sometimes our “key” variable has a different name in each data frame. For example, if we wanted to know the name of the destination airports in <code>flights</code> we might look at the variable <code>dest</code>. But, <code>dest</code> only has the FAA airport codes, which are often confusing. The data frame <code>airports</code> has both the FAA airport codes and the name of the airport. However, <code>flights</code> calls the variable with the FAA code <code>dest</code> while <code>airports</code> calls the variable <code>faa</code>. They don’t share the same variable name, but they have the same data.</p>
<p>To <code>join</code> the two data frames, we need to tell R to treat the variables as having the same name:</p>
<pre class="r"><code>flights_with_airport_names &lt;- flights %&gt;% 
  inner_join(airports, by = c(&quot;dest&quot; = &quot;faa&quot;))
names(airports)</code></pre>
<pre><code>## [1] &quot;faa&quot;   &quot;name&quot;  &quot;lat&quot;   &quot;lon&quot;   &quot;alt&quot;   &quot;tz&quot;    &quot;dst&quot;   &quot;tzone&quot;</code></pre>
<pre class="r"><code>names(flights)</code></pre>
<pre><code>##  [1] &quot;year&quot;           &quot;month&quot;          &quot;day&quot;            &quot;dep_time&quot;      
##  [5] &quot;sched_dep_time&quot; &quot;dep_delay&quot;      &quot;arr_time&quot;       &quot;sched_arr_time&quot;
##  [9] &quot;arr_delay&quot;      &quot;carrier&quot;        &quot;flight&quot;         &quot;tailnum&quot;       
## [13] &quot;origin&quot;         &quot;dest&quot;           &quot;air_time&quot;       &quot;distance&quot;      
## [17] &quot;hour&quot;           &quot;minute&quot;         &quot;time_hour&quot;      &quot;gain&quot;</code></pre>
<pre class="r"><code>names(flights_with_airport_names)</code></pre>
<pre><code>##  [1] &quot;year&quot;           &quot;month&quot;          &quot;day&quot;            &quot;dep_time&quot;      
##  [5] &quot;sched_dep_time&quot; &quot;dep_delay&quot;      &quot;arr_time&quot;       &quot;sched_arr_time&quot;
##  [9] &quot;arr_delay&quot;      &quot;carrier&quot;        &quot;flight&quot;         &quot;tailnum&quot;       
## [13] &quot;origin&quot;         &quot;dest&quot;           &quot;air_time&quot;       &quot;distance&quot;      
## [17] &quot;hour&quot;           &quot;minute&quot;         &quot;time_hour&quot;      &quot;gain&quot;          
## [21] &quot;name&quot;           &quot;lat&quot;            &quot;lon&quot;            &quot;alt&quot;           
## [25] &quot;tz&quot;             &quot;dst&quot;            &quot;tzone&quot;</code></pre>
<p>Next, let’s count the number of flights from NYC to each destination but include the information about the destination airport:</p>
<pre class="r"><code>named_dest &lt;- flights %&gt;% 
  group_by(dest) %&gt;% 
  summarize(num_flights = n()) %&gt;% 
  arrange(desc(num_flights)) %&gt;% 
  inner_join(airports, by = c(&quot;dest&quot; = &quot;faa&quot;)) %&gt;% 
  rename(airport_name = name)
named_dest</code></pre>
<pre><code>## # A tibble: 101 x 9
##    dest  num_flights airport_name       lat    lon   alt    tz dst   tzone 
##    &lt;chr&gt;       &lt;int&gt; &lt;chr&gt;            &lt;dbl&gt;  &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; 
##  1 ORD         17283 Chicago Ohare I…  42.0  -87.9   668    -6 A     Ameri…
##  2 ATL         17215 Hartsfield Jack…  33.6  -84.4  1026    -5 A     Ameri…
##  3 LAX         16174 Los Angeles Intl  33.9 -118.    126    -8 A     Ameri…
##  4 BOS         15508 General Edward …  42.4  -71.0    19    -5 A     Ameri…
##  5 MCO         14082 Orlando Intl      28.4  -81.3    96    -5 A     Ameri…
##  6 CLT         14064 Charlotte Dougl…  35.2  -80.9   748    -5 A     Ameri…
##  7 SFO         13331 San Francisco I…  37.6 -122.     13    -8 A     Ameri…
##  8 FLL         12055 Fort Lauderdale…  26.1  -80.2     9    -5 A     Ameri…
##  9 MIA         11728 Miami Intl        25.8  -80.3     8    -5 A     Ameri…
## 10 DCA          9705 Ronald Reagan W…  38.9  -77.0    15    -5 A     Ameri…
## # … with 91 more rows</code></pre>
<p>Here we have a new data frame named <code>named_dest</code> where we’ve grouped and counted the number of flights to each destination. We’ve then arranged them in descending order by <code>num_flights</code>. We’ve joined <code>flights</code> with <code>airports</code> via the key variables <code>&quot;dest&quot; = &quot;faa&quot;</code>. Then renamed the variable <code>name</code> from <code>airports</code> to the more descriptive <code>airport_name</code> for <code>named_dest</code>. <code>airports</code> data frame will still have the variable <code>name</code> as <code>name</code>.</p>
</div>
<div id="practice-3.7.3-multiple-key-variables" class="section level3">
<h3>Practice 3.7.3: Multiple “key” variables</h3>
<p>If multiple variables are needed to uniquely identify each observational unit, we can use <code>c()</code> to “combine” or “concatenate” those variables within <code>join</code>.</p>
<p>For example, to join <code>flights</code> and <code>weather</code>, we need to use <code>year</code>, <code>month</code>, <code>day</code>, <code>hour</code>, and <code>origin</code>.</p>
<pre class="r"><code>flights_weather_joined &lt;- flights %&gt;% 
  inner_join(weather, by = c(&quot;year&quot;, &quot;month&quot;, &quot;day&quot;, &quot;hour&quot;, &quot;origin&quot;))
names(weather)</code></pre>
<pre><code>##  [1] &quot;origin&quot;     &quot;year&quot;       &quot;month&quot;      &quot;day&quot;        &quot;hour&quot;      
##  [6] &quot;temp&quot;       &quot;dewp&quot;       &quot;humid&quot;      &quot;wind_dir&quot;   &quot;wind_speed&quot;
## [11] &quot;wind_gust&quot;  &quot;precip&quot;     &quot;pressure&quot;   &quot;visib&quot;      &quot;time_hour&quot; 
## [16] &quot;temp_in_C&quot;</code></pre>
<pre class="r"><code>names(flights)</code></pre>
<pre><code>##  [1] &quot;year&quot;           &quot;month&quot;          &quot;day&quot;            &quot;dep_time&quot;      
##  [5] &quot;sched_dep_time&quot; &quot;dep_delay&quot;      &quot;arr_time&quot;       &quot;sched_arr_time&quot;
##  [9] &quot;arr_delay&quot;      &quot;carrier&quot;        &quot;flight&quot;         &quot;tailnum&quot;       
## [13] &quot;origin&quot;         &quot;dest&quot;           &quot;air_time&quot;       &quot;distance&quot;      
## [17] &quot;hour&quot;           &quot;minute&quot;         &quot;time_hour&quot;      &quot;gain&quot;</code></pre>
<pre class="r"><code>names(flights_weather_joined)</code></pre>
<pre><code>##  [1] &quot;year&quot;           &quot;month&quot;          &quot;day&quot;            &quot;dep_time&quot;      
##  [5] &quot;sched_dep_time&quot; &quot;dep_delay&quot;      &quot;arr_time&quot;       &quot;sched_arr_time&quot;
##  [9] &quot;arr_delay&quot;      &quot;carrier&quot;        &quot;flight&quot;         &quot;tailnum&quot;       
## [13] &quot;origin&quot;         &quot;dest&quot;           &quot;air_time&quot;       &quot;distance&quot;      
## [17] &quot;hour&quot;           &quot;minute&quot;         &quot;time_hour.x&quot;    &quot;gain&quot;          
## [21] &quot;temp&quot;           &quot;dewp&quot;           &quot;humid&quot;          &quot;wind_dir&quot;      
## [25] &quot;wind_speed&quot;     &quot;wind_gust&quot;      &quot;precip&quot;         &quot;pressure&quot;      
## [29] &quot;visib&quot;          &quot;time_hour.y&quot;    &quot;temp_in_C&quot;</code></pre>
</div>
<div id="learning-check-3.13" class="section level3">
<h3>Learning Check 3.13</h3>
<p><em>Looking at Figure 3.7, when joining <code>flights</code> and <code>weather</code> (or, in other words, matching the hourly weather values with each flight), why do we need to join by all of <code>year</code>, <code>month</code>, <code>day</code>, <code>hour</code>, and <code>origin</code>, and not just <code>hour</code>?</em></p>
<p><strong>Answer:</strong> We need to match on all five of those variables because each observation is uniquely identified by those variables. Many observations have the same hour but have a different month, day, and origin. <code>hour</code> is just a number somewhere between 1-23. It is only will all the variables do we get a unique observation.</p>
</div>
<div id="learning-check-3.14" class="section level3">
<h3>Learning Check 3.14</h3>
<p><em>What surprises you about the top 10 destinations from NYC in 2013</em></p>
<p><strong>Answer:</strong></p>
<p>It isn’t so much surprising but there are only two destinations that aren’t on the east coast, LAX and SFO. I suppose ORD is considered mid-west, but as someone from Oregon, I consider Chicago east coast.</p>
</div>
<div id="practice-3.8-other-verbs" class="section level3">
<h3>Practice 3.8: Other verbs</h3>
<p>Other commonly used verbs in the <code>dplyr</code> package include <code>select()</code> for returning only a subset of variables/columns, <code>rename()</code> for changing the names of variables, and <code>top_n()</code> for returning only the top values of a variable.</p>
</div>
<div id="practice-3.8.1-select-variables" class="section level3">
<h3>Practice 3.8.1: <code>select</code> variables</h3>
<p><code>select</code> allows us to return only those variables/columns from a data frame. For example:</p>
<pre class="r"><code>flights %&gt;% 
  select(carrier, flight)</code></pre>
<pre><code>## # A tibble: 336,776 x 2
##    carrier flight
##    &lt;chr&gt;    &lt;int&gt;
##  1 UA        1545
##  2 UA        1714
##  3 AA        1141
##  4 B6         725
##  5 DL         461
##  6 UA        1696
##  7 B6         507
##  8 EV        5708
##  9 B6          79
## 10 AA         301
## # … with 336,766 more rows</code></pre>
<p>Here we see the variables <code>carrier</code> and <code>flight</code> with each of the 336,776 observations or rows but none of the other variables.</p>
<p>To deselect a variable, the <code>-</code> symbol can be used:</p>
<pre class="r"><code>flights_no_year &lt;- flights %&gt;% 
  select(-year)
as_tibble(flights_no_year)</code></pre>
<pre><code>## # A tibble: 336,776 x 19
##    month   day dep_time sched_dep_time dep_delay arr_time sched_arr_time
##    &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;     &lt;dbl&gt;    &lt;int&gt;          &lt;int&gt;
##  1     1     1      517            515         2      830            819
##  2     1     1      533            529         4      850            830
##  3     1     1      542            540         2      923            850
##  4     1     1      544            545        -1     1004           1022
##  5     1     1      554            600        -6      812            837
##  6     1     1      554            558        -4      740            728
##  7     1     1      555            600        -5      913            854
##  8     1     1      557            600        -3      709            723
##  9     1     1      557            600        -3      838            846
## 10     1     1      558            600        -2      753            745
## # … with 336,766 more rows, and 12 more variables: arr_delay &lt;dbl&gt;,
## #   carrier &lt;chr&gt;, flight &lt;int&gt;, tailnum &lt;chr&gt;, origin &lt;chr&gt;, dest &lt;chr&gt;,
## #   air_time &lt;dbl&gt;, distance &lt;dbl&gt;, hour &lt;dbl&gt;, minute &lt;dbl&gt;,
## #   time_hour &lt;dttm&gt;, gain &lt;dbl&gt;</code></pre>
<p>Here we see all of the variables except for <code>year</code></p>
<p>We can also select ranges of variables:</p>
<pre class="r"><code>flights_range &lt;- flights %&gt;% 
  select(month:day, arr_time:sched_arr_time)
flights_range</code></pre>
<pre><code>## # A tibble: 336,776 x 4
##    month   day arr_time sched_arr_time
##    &lt;int&gt; &lt;int&gt;    &lt;int&gt;          &lt;int&gt;
##  1     1     1      830            819
##  2     1     1      850            830
##  3     1     1      923            850
##  4     1     1     1004           1022
##  5     1     1      812            837
##  6     1     1      740            728
##  7     1     1      913            854
##  8     1     1      709            723
##  9     1     1      838            846
## 10     1     1      753            745
## # … with 336,766 more rows</code></pre>
<p><code>select</code> also allows us to reorder variables:</p>
<pre class="r"><code>flights_reordered &lt;- flights %&gt;% 
  select(year, month, day, hour, minute, time_hour, everything())
flights_reordered</code></pre>
<pre><code>## # A tibble: 336,776 x 20
##     year month   day  hour minute time_hour           dep_time
##    &lt;int&gt; &lt;int&gt; &lt;int&gt; &lt;dbl&gt;  &lt;dbl&gt; &lt;dttm&gt;                 &lt;int&gt;
##  1  2013     1     1     5     15 2013-01-01 05:00:00      517
##  2  2013     1     1     5     29 2013-01-01 05:00:00      533
##  3  2013     1     1     5     40 2013-01-01 05:00:00      542
##  4  2013     1     1     5     45 2013-01-01 05:00:00      544
##  5  2013     1     1     6      0 2013-01-01 06:00:00      554
##  6  2013     1     1     5     58 2013-01-01 05:00:00      554
##  7  2013     1     1     6      0 2013-01-01 06:00:00      555
##  8  2013     1     1     6      0 2013-01-01 06:00:00      557
##  9  2013     1     1     6      0 2013-01-01 06:00:00      557
## 10  2013     1     1     6      0 2013-01-01 06:00:00      558
## # … with 336,766 more rows, and 13 more variables: sched_dep_time &lt;int&gt;,
## #   dep_delay &lt;dbl&gt;, arr_time &lt;int&gt;, sched_arr_time &lt;int&gt;,
## #   arr_delay &lt;dbl&gt;, carrier &lt;chr&gt;, flight &lt;int&gt;, tailnum &lt;chr&gt;,
## #   origin &lt;chr&gt;, dest &lt;chr&gt;, air_time &lt;dbl&gt;, distance &lt;dbl&gt;, gain &lt;dbl&gt;</code></pre>
<p>Here we see certain selected variables first and then <code>everything()</code> else appended afterward.</p>
<p>Helper functions, such as <code>everything()</code> are conditional. Other examples include <code>starts_with()</code>, <code>ends_with()</code>, and <code>contains()</code>. For example:</p>
<pre class="r"><code>flights_begin_a &lt;- flights %&gt;%
  select(starts_with(&quot;a&quot;))
flights_begin_a</code></pre>
<pre><code>## # A tibble: 336,776 x 3
##    arr_time arr_delay air_time
##       &lt;int&gt;     &lt;dbl&gt;    &lt;dbl&gt;
##  1      830        11      227
##  2      850        20      227
##  3      923        33      160
##  4     1004       -18      183
##  5      812       -25      116
##  6      740        12      150
##  7      913        19      158
##  8      709       -14       53
##  9      838        -8      140
## 10      753         8      138
## # … with 336,766 more rows</code></pre>
<p>Or</p>
<pre class="r"><code>flights_delays &lt;-flights %&gt;% 
  select(ends_with(&quot;delay&quot;))
flights_delays</code></pre>
<pre><code>## # A tibble: 336,776 x 2
##    dep_delay arr_delay
##        &lt;dbl&gt;     &lt;dbl&gt;
##  1         2        11
##  2         4        20
##  3         2        33
##  4        -1       -18
##  5        -6       -25
##  6        -4        12
##  7        -5        19
##  8        -3       -14
##  9        -3        -8
## 10        -2         8
## # … with 336,766 more rows</code></pre>
<p>Or</p>
<pre class="r"><code>flights_time &lt;- flights %&gt;% 
  select(contains(&quot;time&quot;))
flights_time</code></pre>
<pre><code>## # A tibble: 336,776 x 6
##    dep_time sched_dep_time arr_time sched_arr_time air_time
##       &lt;int&gt;          &lt;int&gt;    &lt;int&gt;          &lt;int&gt;    &lt;dbl&gt;
##  1      517            515      830            819      227
##  2      533            529      850            830      227
##  3      542            540      923            850      160
##  4      544            545     1004           1022      183
##  5      554            600      812            837      116
##  6      554            558      740            728      150
##  7      555            600      913            854      158
##  8      557            600      709            723       53
##  9      557            600      838            846      140
## 10      558            600      753            745      138
## # … with 336,766 more rows, and 1 more variable: time_hour &lt;dttm&gt;</code></pre>
</div>
<div id="practice-3.8.2-rename-variables" class="section level3">
<h3>Practice 3.8.2: <code>rename</code> variables</h3>
<p>The verb <code>rename</code> is intuitive in that it will rename a variable with another name. One thing to note is the single <code>=</code> as opposed to the <code>==</code> we’ve seen before.</p>
<pre class="r"><code>flights_time_new &lt;-flights %&gt;% 
  select(contains(&quot;time&quot;)) %&gt;% 
  rename(departure_time = dep_time,
         arrival_time = arr_time)
flights_time_new</code></pre>
<pre><code>## # A tibble: 336,776 x 6
##    departure_time sched_dep_time arrival_time sched_arr_time air_time
##             &lt;int&gt;          &lt;int&gt;        &lt;int&gt;          &lt;int&gt;    &lt;dbl&gt;
##  1            517            515          830            819      227
##  2            533            529          850            830      227
##  3            542            540          923            850      160
##  4            544            545         1004           1022      183
##  5            554            600          812            837      116
##  6            554            558          740            728      150
##  7            555            600          913            854      158
##  8            557            600          709            723       53
##  9            557            600          838            846      140
## 10            558            600          753            745      138
## # … with 336,766 more rows, and 1 more variable: time_hour &lt;dttm&gt;</code></pre>
</div>
<div id="practice-3.8.3-top_n-values-of-a-variable" class="section level3">
<h3>Practice 3.8.3: <code>top_n</code> values of a variable</h3>
<p><code>top_n</code> allows us to return the top rows of positive <code>n</code> or the bottom rows of negative <code>n</code>. The default variable, or <code>wt</code>, is the last variable in the data frame.</p>
<pre class="r"><code>named_dest %&gt;% 
  top_n(n=10, wt = num_flights) </code></pre>
<pre><code>## # A tibble: 10 x 9
##    dest  num_flights airport_name       lat    lon   alt    tz dst   tzone 
##    &lt;chr&gt;       &lt;int&gt; &lt;chr&gt;            &lt;dbl&gt;  &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; 
##  1 ORD         17283 Chicago Ohare I…  42.0  -87.9   668    -6 A     Ameri…
##  2 ATL         17215 Hartsfield Jack…  33.6  -84.4  1026    -5 A     Ameri…
##  3 LAX         16174 Los Angeles Intl  33.9 -118.    126    -8 A     Ameri…
##  4 BOS         15508 General Edward …  42.4  -71.0    19    -5 A     Ameri…
##  5 MCO         14082 Orlando Intl      28.4  -81.3    96    -5 A     Ameri…
##  6 CLT         14064 Charlotte Dougl…  35.2  -80.9   748    -5 A     Ameri…
##  7 SFO         13331 San Francisco I…  37.6 -122.     13    -8 A     Ameri…
##  8 FLL         12055 Fort Lauderdale…  26.1  -80.2     9    -5 A     Ameri…
##  9 MIA         11728 Miami Intl        25.8  -80.3     8    -5 A     Ameri…
## 10 DCA          9705 Ronald Reagan W…  38.9  -77.0    15    -5 A     Ameri…</code></pre>
<p>Here we see the data frame <code>named_dest</code> with the top 10 destinations, ordered by <code>num_flights</code>.</p>
<p>We can futher change the output here:</p>
<pre class="r"><code>named_dest %&gt;% 
  top_n(n=10, wt = num_flights) %&gt;% 
  arrange(desc(num_flights))</code></pre>
<pre><code>## # A tibble: 10 x 9
##    dest  num_flights airport_name       lat    lon   alt    tz dst   tzone 
##    &lt;chr&gt;       &lt;int&gt; &lt;chr&gt;            &lt;dbl&gt;  &lt;dbl&gt; &lt;int&gt; &lt;dbl&gt; &lt;chr&gt; &lt;chr&gt; 
##  1 ORD         17283 Chicago Ohare I…  42.0  -87.9   668    -6 A     Ameri…
##  2 ATL         17215 Hartsfield Jack…  33.6  -84.4  1026    -5 A     Ameri…
##  3 LAX         16174 Los Angeles Intl  33.9 -118.    126    -8 A     Ameri…
##  4 BOS         15508 General Edward …  42.4  -71.0    19    -5 A     Ameri…
##  5 MCO         14082 Orlando Intl      28.4  -81.3    96    -5 A     Ameri…
##  6 CLT         14064 Charlotte Dougl…  35.2  -80.9   748    -5 A     Ameri…
##  7 SFO         13331 San Francisco I…  37.6 -122.     13    -8 A     Ameri…
##  8 FLL         12055 Fort Lauderdale…  26.1  -80.2     9    -5 A     Ameri…
##  9 MIA         11728 Miami Intl        25.8  -80.3     8    -5 A     Ameri…
## 10 DCA          9705 Ronald Reagan W…  38.9  -77.0    15    -5 A     Ameri…</code></pre>
</div>
<div id="learning-check-3.16" class="section level3">
<h3>Learning Check 3.16</h3>
<p><em>What are some ways to select all three of the <code>dest</code>, <code>air_time</code>, and <code>distance</code> variables from <code>flights</code>? Give the code showing how to do this in at least three different ways.</em></p>
<p><strong>Answer:</strong> Method 1:</p>
<pre class="r"><code>lc416_1 &lt;- flights %&gt;% 
  select(dest, air_time, distance)
lc416_1</code></pre>
<pre><code>## # A tibble: 336,776 x 3
##    dest  air_time distance
##    &lt;chr&gt;    &lt;dbl&gt;    &lt;dbl&gt;
##  1 IAH        227     1400
##  2 IAH        227     1416
##  3 MIA        160     1089
##  4 BQN        183     1576
##  5 ATL        116      762
##  6 ORD        150      719
##  7 FLL        158     1065
##  8 IAD         53      229
##  9 MCO        140      944
## 10 ORD        138      733
## # … with 336,766 more rows</code></pre>
<p>Method 2:</p>
<pre class="r"><code>lc416_2 &lt;- flights %&gt;% 
  select(dest:distance)
lc416_2</code></pre>
<pre><code>## # A tibble: 336,776 x 3
##    dest  air_time distance
##    &lt;chr&gt;    &lt;dbl&gt;    &lt;dbl&gt;
##  1 IAH        227     1400
##  2 IAH        227     1416
##  3 MIA        160     1089
##  4 BQN        183     1576
##  5 ATL        116      762
##  6 ORD        150      719
##  7 FLL        158     1065
##  8 IAD         53      229
##  9 MCO        140      944
## 10 ORD        138      733
## # … with 336,766 more rows</code></pre>
<p>Method 3:</p>
<pre class="r"><code>lc416_3 &lt;-flights %&gt;% 
  select(-(year:origin), -(hour:gain))
lc416_3</code></pre>
<pre><code>## # A tibble: 336,776 x 3
##    dest  air_time distance
##    &lt;chr&gt;    &lt;dbl&gt;    &lt;dbl&gt;
##  1 IAH        227     1400
##  2 IAH        227     1416
##  3 MIA        160     1089
##  4 BQN        183     1576
##  5 ATL        116      762
##  6 ORD        150      719
##  7 FLL        158     1065
##  8 IAD         53      229
##  9 MCO        140      944
## 10 ORD        138      733
## # … with 336,766 more rows</code></pre>
</div>
<div id="learning-check-3.17" class="section level3">
<h3>Learning Check 3.17</h3>
<p><em>How could one use <code>starts_with</code>, <code>ends_with</code>, and <code>contains</code> to select columns from the <code>flights</code> data frame? Provide three different examples in total: one for <code>starts_with</code>, one for <code>ends_with</code>, and one for <code>contains</code></em></p>
<p><strong>Answer:</strong> <code>starts_with</code>method:</p>
<pre class="r"><code>lc417_1 &lt;- flights %&gt;% 
  select(starts_with(&quot;d&quot;))
lc417_1</code></pre>
<pre><code>## # A tibble: 336,776 x 5
##      day dep_time dep_delay dest  distance
##    &lt;int&gt;    &lt;int&gt;     &lt;dbl&gt; &lt;chr&gt;    &lt;dbl&gt;
##  1     1      517         2 IAH       1400
##  2     1      533         4 IAH       1416
##  3     1      542         2 MIA       1089
##  4     1      544        -1 BQN       1576
##  5     1      554        -6 ATL        762
##  6     1      554        -4 ORD        719
##  7     1      555        -5 FLL       1065
##  8     1      557        -3 IAD        229
##  9     1      557        -3 MCO        944
## 10     1      558        -2 ORD        733
## # … with 336,766 more rows</code></pre>
<p><code>ends_with</code> method:</p>
<pre class="r"><code>lc417_2 &lt;- flights %&gt;% 
  select(ends_with(&quot;y&quot;))
lc417_2</code></pre>
<pre><code>## # A tibble: 336,776 x 3
##      day dep_delay arr_delay
##    &lt;int&gt;     &lt;dbl&gt;     &lt;dbl&gt;
##  1     1         2        11
##  2     1         4        20
##  3     1         2        33
##  4     1        -1       -18
##  5     1        -6       -25
##  6     1        -4        12
##  7     1        -5        19
##  8     1        -3       -14
##  9     1        -3        -8
## 10     1        -2         8
## # … with 336,766 more rows</code></pre>
<p><code>contains</code> method:</p>
<pre class="r"><code>lc417_3 &lt;- flights %&gt;% 
  select(contains(&quot;time&quot;))
lc417_3</code></pre>
<pre><code>## # A tibble: 336,776 x 6
##    dep_time sched_dep_time arr_time sched_arr_time air_time
##       &lt;int&gt;          &lt;int&gt;    &lt;int&gt;          &lt;int&gt;    &lt;dbl&gt;
##  1      517            515      830            819      227
##  2      533            529      850            830      227
##  3      542            540      923            850      160
##  4      544            545     1004           1022      183
##  5      554            600      812            837      116
##  6      554            558      740            728      150
##  7      555            600      913            854      158
##  8      557            600      709            723       53
##  9      557            600      838            846      140
## 10      558            600      753            745      138
## # … with 336,766 more rows, and 1 more variable: time_hour &lt;dttm&gt;</code></pre>
</div>
<div id="learning-check-3.18" class="section level3">
<h3>Learning Check 3.18</h3>
<p><em>Why might we want to use the <code>select</code> function on a data frame?</em></p>
<p><strong>Answer:</strong> To look at only certain variables. This can make it easier for us to read a large data frame with many variables.</p>
</div>
<div id="learning-check-3.19" class="section level3">
<h3>Learning Check 3.19</h3>
<p><em>Create a new data frame that shows the top 5 airports with the largest arrival delays from NYC in 2013.</em></p>
<p><strong>Answer:</strong> Method 1:</p>
<pre class="r"><code>top5_airports_with_delays &lt;- flights %&gt;% 
  select(origin, arr_delay) %&gt;% 
  top_n(n = 5, wt = arr_delay) %&gt;% 
  arrange(desc(arr_delay))
top5_airports_with_delays</code></pre>
<pre><code>## # A tibble: 5 x 2
##   origin arr_delay
##   &lt;chr&gt;      &lt;dbl&gt;
## 1 JFK         1272
## 2 JFK         1127
## 3 EWR         1109
## 4 JFK         1007
## 5 JFK          989</code></pre>
<p>Method2:</p>
<pre class="r"><code>top5_airports_with_delays2 &lt;-flights %&gt;% 
  select(origin, arr_delay) %&gt;% 
  arrange(desc(arr_delay)) %&gt;% 
  slice(1:5)
top5_airports_with_delays2</code></pre>
<pre><code>## # A tibble: 5 x 2
##   origin arr_delay
##   &lt;chr&gt;      &lt;dbl&gt;
## 1 JFK         1272
## 2 JFK         1127
## 3 EWR         1109
## 4 JFK         1007
## 5 JFK          989</code></pre>
</div>
<div id="learning-check-3.20" class="section level3">
<h3>Learning Check 3.20</h3>
<p><em>Using the datasets included in the <code>nycflights13</code> package, compute the available seat miles for each airline sorted in descending order. After completing all the necessary data wrangling steps, the resulting data frame should have 16 rows (one for each airline) and 2 columns (airline name and available seat miles).</em></p>
<p><strong>Answer:</strong> First, I’ll create a new data frame <code>flights_with_seats</code> to join <code>flights</code> and <code>planes</code> by <code>tailnum</code> and then join <code>airlines</code> by <code>carrier</code>. Then, I’ll rename <code>name</code> to <code>airline_name</code> for clarity. Then, I’ll select the variables <code>airline_name</code>, <code>distance</code>, and <code>seats</code>. Next I’ll calculate the seat miles with <code>mutate</code>.</p>
<pre class="r"><code>flights_with_seats &lt;- flights %&gt;% 
  inner_join(planes, by = &quot;tailnum&quot;) %&gt;% 
  inner_join(airlines, by = &quot;carrier&quot;) %&gt;% 
  rename(airline_name = name) %&gt;% 
  select(airline_name, distance, seats) %&gt;% 
  mutate(seat_miles = (distance*seats))
flights_with_seats</code></pre>
<pre><code>## # A tibble: 284,170 x 4
##    airline_name             distance seats seat_miles
##    &lt;chr&gt;                       &lt;dbl&gt; &lt;int&gt;      &lt;dbl&gt;
##  1 United Air Lines Inc.        1400   149     208600
##  2 United Air Lines Inc.        1416   149     210984
##  3 American Airlines Inc.       1089   178     193842
##  4 JetBlue Airways              1576   200     315200
##  5 Delta Air Lines Inc.          762   178     135636
##  6 United Air Lines Inc.         719   191     137329
##  7 JetBlue Airways              1065   200     213000
##  8 ExpressJet Airlines Inc.      229    55      12595
##  9 JetBlue Airways               944   200     188800
## 10 JetBlue Airways              1028   200     205600
## # … with 284,160 more rows</code></pre>
<p>I decided to stop here so that I could look at the data before continuing on.</p>
<p>I then created another data frame <code>seatmiles_airlines</code> from <code>flights_with_seats</code>. I grouped the data by <code>airline_name</code> and then used <code>summarize</code> and <code>sum()</code> to add up all the <code>seat_miles</code> by airline_name. I then used <code>arrange(desc())</code> to show the total seat_miles in descending order.</p>
<pre class="r"><code>seatmiles_airlines &lt;-flights_with_seats %&gt;% 
  group_by(airline_name) %&gt;% 
  summarize(seat_miles = sum(seat_miles, na.rm = TRUE)) %&gt;% 
  arrange(desc(seat_miles))
seatmiles_airlines</code></pre>
<pre><code>## # A tibble: 16 x 2
##    airline_name                 seat_miles
##    &lt;chr&gt;                             &lt;dbl&gt;
##  1 United Air Lines Inc.       15516377526
##  2 Delta Air Lines Inc.        10532885801
##  3 JetBlue Airways              9618222135
##  4 American Airlines Inc.       3677292231
##  5 US Airways Inc.              2533505829
##  6 Virgin America               2296680778
##  7 ExpressJet Airlines Inc.     1817236275
##  8 Southwest Airlines Co.       1718116857
##  9 Endeavor Air Inc.             776970310
## 10 Hawaiian Airlines Inc.        642478122
## 11 Alaska Airlines Inc.          314104736
## 12 AirTran Airways Corporation   219628520
## 13 Frontier Airlines Inc.        184832280
## 14 Mesa Airlines Inc.             20163632
## 15 Envoy Air                       7162420
## 16 SkyWest Airlines Inc.           1299835</code></pre>
<p>Here we see that United, Delta, and JetBlue had the most seat miles of the airlines departing NYC in 2013.</p>
</div>
</div>
<div id="chapter-4-data-importing-tidy-data" class="section level2">
<h2>Chapter 4: Data Importing &amp; “Tidy” Data</h2>
<p>This chapter is about importing my own data and making sure it is in a “tidy” format, or one-row-per-observation.</p>
<div id="practice-4.1.1-using-the-console" class="section level3">
<h3>Practice 4.1.1: Using the console</h3>
<p>We can use the console to import a <code>.csv</code> file that is published online. Use the <code>readr</code> package to import the file <code>dem_score.csv</code> from the website (<a href="https://moderndive.com/data/dem_score.csv" class="uri">https://moderndive.com/data/dem_score.csv</a>). We’ll use the function <code>read_csv()</code> to do so.</p>
<pre class="r"><code>dem_score &lt;- read_csv(&quot;https://moderndive.com/data/dem_score.csv&quot;)</code></pre>
<pre><code>## Parsed with column specification:
## cols(
##   country = col_character(),
##   `1952` = col_double(),
##   `1957` = col_double(),
##   `1962` = col_double(),
##   `1967` = col_double(),
##   `1972` = col_double(),
##   `1977` = col_double(),
##   `1982` = col_double(),
##   `1987` = col_double(),
##   `1992` = col_double()
## )</code></pre>
<pre class="r"><code>dem_score</code></pre>
<pre><code>## # A tibble: 96 x 10
##    country   `1952` `1957` `1962` `1967` `1972` `1977` `1982` `1987` `1992`
##    &lt;chr&gt;      &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;
##  1 Albania       -9     -9     -9     -9     -9     -9     -9     -9      5
##  2 Argentina     -9     -1     -1     -9     -9     -9     -8      8      7
##  3 Armenia       -9     -7     -7     -7     -7     -7     -7     -7      7
##  4 Australia     10     10     10     10     10     10     10     10     10
##  5 Austria       10     10     10     10     10     10     10     10     10
##  6 Azerbaij…     -9     -7     -7     -7     -7     -7     -7     -7      1
##  7 Belarus       -9     -7     -7     -7     -7     -7     -7     -7      7
##  8 Belgium       10     10     10     10     10     10     10     10     10
##  9 Bhutan       -10    -10    -10    -10    -10    -10    -10    -10    -10
## 10 Bolivia       -4     -3     -3     -4     -7     -7      8      9      9
## # … with 86 more rows</code></pre>
<p>Here we see a data frame with scores for how autocratic (-10) or democratic (10) a country is by year. The years are in backticks because R does not allow variable names to start with a number nor contain spaces.</p>
</div>
<div id="practice-4.1.2-using-rstudios-interface" class="section level3">
<h3>Practice 4.1.2: Using RStudio’s interface</h3>
<p>We can also read in data from an Excel file saved on our computer. We’ll click on “Files” in the bottom righthand pane in RStudio. We’ll click on “Home” and then find where we saved the above file. I saved mine to my desktop as “dem_score2.xlsx”. Click on the file “dem_score2.xlsx” and click “Import Dataset…” and then click “Import” on the popup screen. RStudio will then import the file as a data frame and display it.</p>
</div>
<div id="practice-4.2-tidy-data" class="section level3">
<h3>Practice 4.2: Tidy data</h3>
<p>Let’s explore the <code>drinks</code> data frame in the <code>fivethirtyeight</code> package.</p>
<pre class="r"><code>drinks</code></pre>
<pre><code>## # A tibble: 193 x 5
##    country   beer_servings spirit_servings wine_servings total_litres_of_p…
##    &lt;chr&gt;             &lt;int&gt;           &lt;int&gt;         &lt;int&gt;              &lt;dbl&gt;
##  1 Afghanis…             0               0             0                0  
##  2 Albania              89             132            54                4.9
##  3 Algeria              25               0            14                0.7
##  4 Andorra             245             138           312               12.4
##  5 Angola              217              57            45                5.9
##  6 Antigua …           102             128            45                4.9
##  7 Argentina           193              25           221                8.3
##  8 Armenia              21             179            11                3.8
##  9 Australia           261              72           212               10.4
## 10 Austria             279              75           191                9.7
## # … with 183 more rows</code></pre>
<p>Here we see a tibble of countries and the average number of servings of different kinds of alcohol. Let’s look at only 4 countries: USA, China, Italy, and Saudi Arabia. Let’s look ignore the variable <code>total_litres_of_pure_alcohol</code> and rename the variables <code>beer_servings</code>, <code>spirit_servings</code>, and <code>wine_servings</code> to <code>beer</code>, <code>spirit</code>, and <code>wine</code>.</p>
<pre class="r"><code>drinks4 &lt;- drinks %&gt;% 
  filter(country %in% c(&quot;USA&quot;, &quot;China&quot;, &quot;Italy&quot;, &quot;Saudi Arabia&quot;)) %&gt;% 
  select(-total_litres_of_pure_alcohol) %&gt;% 
  rename(beer = beer_servings, spirit = spirit_servings, wine = wine_servings)
drinks4</code></pre>
<pre><code>## # A tibble: 4 x 4
##   country       beer spirit  wine
##   &lt;chr&gt;        &lt;int&gt;  &lt;int&gt; &lt;int&gt;
## 1 China           79    192     8
## 2 Italy           85     42   237
## 3 Saudi Arabia     0      5     0
## 4 USA            249    158    84</code></pre>
<p>How would we create a side-by-side, or “dodged”, barplot? Well, we can’t do that yet because the data isn’t in a tidy format. In the tibble above, we see that there are multiple observations (one for beer, one for spirits, and one for wine) for each country. It should looke more like Country-China, Type-beer, Servings-79; Country-China, Type-Spirit, Servings-192; and so on.</p>
<p>To tidy this data, we can use the <code>gather()</code> function from the <code>tidyr</code> package. The <code>gather()</code> function has two arguments: <code>key</code> and <code>value</code>. <code>key</code> will look at the header row and we’ll name it with the <code>=</code> operator as <code>type</code>. <code>key</code> will use the header row to populate the observation rows under the new variable <code>type</code>. <code>value</code> will look at the rest of the rows to populate the the new variable <code>servings</code>. Adding in <code>-country</code> will tell <code>gather()</code> not to tidy that variable.</p>
<pre class="r"><code>drinks4_tidy &lt;- drinks4 %&gt;% 
  gather(key = type, value = servings, -country)
drinks4_tidy</code></pre>
<pre><code>## # A tibble: 12 x 3
##    country      type   servings
##    &lt;chr&gt;        &lt;chr&gt;     &lt;int&gt;
##  1 China        beer         79
##  2 Italy        beer         85
##  3 Saudi Arabia beer          0
##  4 USA          beer        249
##  5 China        spirit      192
##  6 Italy        spirit       42
##  7 Saudi Arabia spirit        5
##  8 USA          spirit      158
##  9 China        wine          8
## 10 Italy        wine        237
## 11 Saudi Arabia wine          0
## 12 USA          wine         84</code></pre>
<pre class="r"><code>## Another way to write it would be:
## drinks4_tidy &lt;- drinks4 %&gt;% 
##    gather(key = type, value = servings, c(beer, spirit, wine))
## 
## or
## 
## drinks4_tidy &lt;- drinks4 %&gt;% 
##    gather(type, servings, -country)</code></pre>
<p>Now that our data is tidy, let’s plot it:</p>
<pre class="r"><code>drinks4_tidy %&gt;% 
  ggplot(
    aes(country, servings, fill = type)) +
  geom_col(position = &quot;dodge&quot;)</code></pre>
<p><img src="moderndive_checks_files/figure-html/drinkstidyplot-1.png" width="672" /></p>
</div>
<div id="learning-check-4.1" class="section level3">
<h3>Learning Check 4.1</h3>
<p><em>What are common characteristics of “tidy” data frames?</em></p>
<p><strong>Answer:</strong> One observation per row, variables(characteristics or measurements) are in separate columns, and values are in rows below variables. In table 4.1, we saw <code>Date</code>, <code>Boeing stock price</code>, <code>Amazon stock price</code>, and <code>Google stock price</code>. We would want the variables to be <code>Date</code>, <code>Name</code>, and <code>Price</code>. “tidy” data frames are often narrow and long, not wide.</p>
</div>
<div id="learning-check-4.2" class="section level3">
<h3>Learning Check 4.2</h3>
<p><em>What makes “tidy” data frames useful for organizing data?</em></p>
<p><strong>Answer:</strong> We can use the tidyverse tools to analyze the data. Looking at the plot above, we see that we needed to have the data in a tidy format in order to plot it.</p>
</div>
<div id="learning-check-4.3" class="section level3">
<h3>Learning Check 4.3</h3>
<p><em>Take a look at <code>airline_safety</code> data frame included in the <code>fivethirtyeight</code> package. Remove the variables <code>incl_reg_subsidiaries</code> and <code>avail_seat_km_per_week</code>. Tidy the data to include new variables <code>incident_type_years</code> and <code>count</code>.</em></p>
<p><strong>Answer:</strong></p>
<pre class="r"><code>## Let&#39;s look at the data frame:
airline_safety</code></pre>
<pre><code>## # A tibble: 56 x 9
##    airline incl_reg_subsid… avail_seat_km_p… incidents_85_99
##    &lt;chr&gt;   &lt;lgl&gt;                       &lt;dbl&gt;           &lt;int&gt;
##  1 Aer Li… FALSE                   320906734               2
##  2 Aerofl… TRUE                   1197672318              76
##  3 Aeroli… FALSE                   385803648               6
##  4 Aerome… TRUE                    596871813               3
##  5 Air Ca… FALSE                  1865253802               2
##  6 Air Fr… FALSE                  3004002661              14
##  7 Air In… TRUE                    869253552               2
##  8 Air Ne… TRUE                    710174817               3
##  9 Alaska… TRUE                    965346773               5
## 10 Alital… FALSE                   698012498               7
## # … with 46 more rows, and 5 more variables: fatal_accidents_85_99 &lt;int&gt;,
## #   fatalities_85_99 &lt;int&gt;, incidents_00_14 &lt;int&gt;,
## #   fatal_accidents_00_14 &lt;int&gt;, fatalities_00_14 &lt;int&gt;</code></pre>
<pre class="r"><code>## Now let&#39;s remove those two variables:
airline_safety2 &lt;- airline_safety %&gt;% 
  select(-c(incl_reg_subsidiaries, avail_seat_km_per_week))
airline_safety2</code></pre>
<pre><code>## # A tibble: 56 x 7
##    airline incidents_85_99 fatal_accidents… fatalities_85_99
##    &lt;chr&gt;             &lt;int&gt;            &lt;int&gt;            &lt;int&gt;
##  1 Aer Li…               2                0                0
##  2 Aerofl…              76               14              128
##  3 Aeroli…               6                0                0
##  4 Aerome…               3                1               64
##  5 Air Ca…               2                0                0
##  6 Air Fr…              14                4               79
##  7 Air In…               2                1              329
##  8 Air Ne…               3                0                0
##  9 Alaska…               5                0                0
## 10 Alital…               7                2               50
## # … with 46 more rows, and 3 more variables: incidents_00_14 &lt;int&gt;,
## #   fatal_accidents_00_14 &lt;int&gt;, fatalities_00_14 &lt;int&gt;</code></pre>
<pre class="r"><code>## Now let&#39;s tidy:
airline_safety2_tidy &lt;- airline_safety2 %&gt;% 
  gather(incident_type_years, count, -airline)
airline_safety2_tidy</code></pre>
<pre><code>## # A tibble: 336 x 3
##    airline               incident_type_years count
##    &lt;chr&gt;                 &lt;chr&gt;               &lt;int&gt;
##  1 Aer Lingus            incidents_85_99         2
##  2 Aeroflot              incidents_85_99        76
##  3 Aerolineas Argentinas incidents_85_99         6
##  4 Aeromexico            incidents_85_99         3
##  5 Air Canada            incidents_85_99         2
##  6 Air France            incidents_85_99        14
##  7 Air India             incidents_85_99         2
##  8 Air New Zealand       incidents_85_99         3
##  9 Alaska Airlines       incidents_85_99         5
## 10 Alitalia              incidents_85_99         7
## # … with 326 more rows</code></pre>
</div>
<div id="case-study-democracy-en-guatemala" class="section level3">
<h3>4.3 Case study: Democracy en Guatemala</h3>
<p>Let’s use <code>dem_score</code> to look at Guatemala.</p>
<pre class="r"><code>guate_dem &lt;- dem_score %&gt;% 
  filter(country == &quot;Guatemala&quot;)
guate_dem</code></pre>
<pre><code>## # A tibble: 1 x 10
##   country   `1952` `1957` `1962` `1967` `1972` `1977` `1982` `1987` `1992`
##   &lt;chr&gt;      &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;
## 1 Guatemala      2     -6     -5      3      1     -3     -7      3      3</code></pre>
<p>Let’s plot a time series of Guatemala’s score’s over the forty year period from 1952-1992. Looking at the data frame above, we see that the data frame is very wide, not long and narrow. Let’s tidy it.</p>
<pre class="r"><code>guate_dem_tidy &lt;- guate_dem %&gt;% 
  gather(year, democracy_score, -country)
guate_dem_tidy</code></pre>
<pre><code>## # A tibble: 9 x 3
##   country   year  democracy_score
##   &lt;chr&gt;     &lt;chr&gt;           &lt;dbl&gt;
## 1 Guatemala 1952                2
## 2 Guatemala 1957               -6
## 3 Guatemala 1962               -5
## 4 Guatemala 1967                3
## 5 Guatemala 1972                1
## 6 Guatemala 1977               -3
## 7 Guatemala 1982               -7
## 8 Guatemala 1987                3
## 9 Guatemala 1992                3</code></pre>
<p>The <code>year</code> variable is a <code>chr</code> type variable. Let’s change it to a numerical value:</p>
<pre class="r"><code>guate_dem_tidy2 &lt;- guate_dem_tidy %&gt;% 
  mutate(year = as.numeric(year))
guate_dem_tidy2</code></pre>
<pre><code>## # A tibble: 9 x 3
##   country    year democracy_score
##   &lt;chr&gt;     &lt;dbl&gt;           &lt;dbl&gt;
## 1 Guatemala  1952               2
## 2 Guatemala  1957              -6
## 3 Guatemala  1962              -5
## 4 Guatemala  1967               3
## 5 Guatemala  1972               1
## 6 Guatemala  1977              -3
## 7 Guatemala  1982              -7
## 8 Guatemala  1987               3
## 9 Guatemala  1992               3</code></pre>
<p>Now let’s plot it:</p>
<pre class="r"><code>  ggplot(data = guate_dem_tidy2,
         mapping = aes(x = year, y = democracy_score)) +
  geom_line() +
  labs(x = &quot;Year&quot;, y = &quot;Democracy Score&quot;)</code></pre>
<p><img src="moderndive_checks_files/figure-html/guate_tidy_plot-1.png" width="672" /></p>
</div>
<div id="learning-check-4.4" class="section level3">
<h3>Learning Check 4.4</h3>
<p><em>Convert the <code>dem_score</code> data frame into a tidy data frame and assign the name of <code>dem_score_tidy</code> to the resulting long-formatted data frame.</em></p>
<p><strong>Answer:</strong></p>
<pre class="r"><code>dem_score_tidy &lt;- dem_score %&gt;% 
  gather(year, democracy_score, -country) %&gt;% 
  mutate(year = as.numeric(year))
dem_score_tidy</code></pre>
<pre><code>## # A tibble: 864 x 3
##    country     year democracy_score
##    &lt;chr&gt;      &lt;dbl&gt;           &lt;dbl&gt;
##  1 Albania     1952              -9
##  2 Argentina   1952              -9
##  3 Armenia     1952              -9
##  4 Australia   1952              10
##  5 Austria     1952              10
##  6 Azerbaijan  1952              -9
##  7 Belarus     1952              -9
##  8 Belgium     1952              10
##  9 Bhutan      1952             -10
## 10 Bolivia     1952              -4
## # … with 854 more rows</code></pre>
</div>
<div id="learning-check-4.5" class="section level3">
<h3>Learning Check 4.5</h3>
<p><em>Read in the life expectancy data stored at (<a href="https://moderndive.com/data/le_mess.csv" class="uri">https://moderndive.com/data/le_mess.csv</a>) and convert it to a tidy data frame.</em></p>
<p><strong>Answer:</strong></p>
<pre class="r"><code>life_expectancy &lt;- read_csv(&quot;https://moderndive.com/data/le_mess.csv&quot;)</code></pre>
<pre><code>## Parsed with column specification:
## cols(
##   .default = col_double(),
##   country = col_character()
## )</code></pre>
<pre><code>## See spec(...) for full column specifications.</code></pre>
<pre class="r"><code>life_expectancy</code></pre>
<pre><code>## # A tibble: 202 x 67
##    country `1951` `1952` `1953` `1954` `1955` `1956` `1957` `1958` `1959`
##    &lt;chr&gt;    &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;  &lt;dbl&gt;
##  1 Afghan…   27.1   27.7   28.2   28.7   29.3   29.8   30.3   30.9   31.4
##  2 Albania   54.7   55.2   55.8   56.6   57.4   58.4   59.5   60.6   61.8
##  3 Algeria   43.0   43.5   44.0   44.4   44.9   45.4   45.9   46.4   47.0
##  4 Angola    31.0   31.6   32.1   32.7   33.2   33.8   34.3   34.9   35.4
##  5 Antigu…   58.3   58.8   59.3   59.9   60.4   60.9   61.4   62.0   62.5
##  6 Argent…   61.9   62.5   63.1   63.6   64.0   64.4   64.7   65     65.2
##  7 Armenia   62.7   63.1   63.6   64.1   64.5   65     65.4   65.9   66.4
##  8 Aruba     59.0   60.0   61.0   61.9   62.7   63.4   64.1   64.7   65.2
##  9 Austra…   68.7   69.1   69.7   69.8   70.2   70.0   70.3   70.9   70.4
## 10 Austria   65.2   66.8   67.3   67.3   67.6   67.7   67.5   68.5   68.4
## # … with 192 more rows, and 57 more variables: `1960` &lt;dbl&gt;, `1961` &lt;dbl&gt;,
## #   `1962` &lt;dbl&gt;, `1963` &lt;dbl&gt;, `1964` &lt;dbl&gt;, `1965` &lt;dbl&gt;, `1966` &lt;dbl&gt;,
## #   `1967` &lt;dbl&gt;, `1968` &lt;dbl&gt;, `1969` &lt;dbl&gt;, `1970` &lt;dbl&gt;, `1971` &lt;dbl&gt;,
## #   `1972` &lt;dbl&gt;, `1973` &lt;dbl&gt;, `1974` &lt;dbl&gt;, `1975` &lt;dbl&gt;, `1976` &lt;dbl&gt;,
## #   `1977` &lt;dbl&gt;, `1978` &lt;dbl&gt;, `1979` &lt;dbl&gt;, `1980` &lt;dbl&gt;, `1981` &lt;dbl&gt;,
## #   `1982` &lt;dbl&gt;, `1983` &lt;dbl&gt;, `1984` &lt;dbl&gt;, `1985` &lt;dbl&gt;, `1986` &lt;dbl&gt;,
## #   `1987` &lt;dbl&gt;, `1988` &lt;dbl&gt;, `1989` &lt;dbl&gt;, `1990` &lt;dbl&gt;, `1991` &lt;dbl&gt;,
## #   `1992` &lt;dbl&gt;, `1993` &lt;dbl&gt;, `1994` &lt;dbl&gt;, `1995` &lt;dbl&gt;, `1996` &lt;dbl&gt;,
## #   `1997` &lt;dbl&gt;, `1998` &lt;dbl&gt;, `1999` &lt;dbl&gt;, `2000` &lt;dbl&gt;, `2001` &lt;dbl&gt;,
## #   `2002` &lt;dbl&gt;, `2003` &lt;dbl&gt;, `2004` &lt;dbl&gt;, `2005` &lt;dbl&gt;, `2006` &lt;dbl&gt;,
## #   `2007` &lt;dbl&gt;, `2008` &lt;dbl&gt;, `2009` &lt;dbl&gt;, `2010` &lt;dbl&gt;, `2011` &lt;dbl&gt;,
## #   `2012` &lt;dbl&gt;, `2013` &lt;dbl&gt;, `2014` &lt;dbl&gt;, `2015` &lt;dbl&gt;, `2016` &lt;dbl&gt;</code></pre>
<pre class="r"><code>life_exp_tidy &lt;- life_expectancy %&gt;% 
  gather(year, age, -country)
life_exp_tidy</code></pre>
<pre><code>## # A tibble: 13,332 x 3
##    country             year    age
##    &lt;chr&gt;               &lt;chr&gt; &lt;dbl&gt;
##  1 Afghanistan         1951   27.1
##  2 Albania             1951   54.7
##  3 Algeria             1951   43.0
##  4 Angola              1951   31.0
##  5 Antigua and Barbuda 1951   58.3
##  6 Argentina           1951   61.9
##  7 Armenia             1951   62.7
##  8 Aruba               1951   59.0
##  9 Australia           1951   68.7
## 10 Austria             1951   65.2
## # … with 13,322 more rows</code></pre>
</div>
</div>
<div id="conclusion" class="section level2">
<h2>Conclusion</h2>
<p>This serves as the conclusion for my work with ModernDive. My goal was to learn enough of the basics of R and Rstudio to be able to transition to Tidy Text Mining.</p>
</div>

<div id="rmd-source-code">LS0tCnRpdGxlOiAiTW9kZXJuRGl2ZSBMZWFybmluZyBDaGVja3MgLSBDb21wbGV0ZWQiCmF1dGhvcjogIkthcm9seW4gSXNtYXkgPGJyPiBQaEQgQ2FuZGlkYXRlLCBQYWNpZmljIFVuaXZlcnNpdHkiCmRhdGU6ICJTdW1tZXIgMjAxOSIKb3V0cHV0OiAKICBodG1sX2RvY3VtZW50OgogICAgY29kZV9kb3dubG9hZDogdHJ1ZQotLS0KCmBgYHtyIHNldHVwLCBpbmNsdWRlPUZBTFNFfQprbml0cjo6b3B0c19jaHVuayRzZXQoZWNobyA9IFRSVUUpCmBgYAoKIyMgSW50cm9kdWN0aW9uCgpUaGlzIHBhZ2UgZG9jdW1lbnRzIG15IGNvbXBsZXRpb24gb2YgdGhlIExlYXJuaW5nIENoZWNrcyBhbmQgcHJhY3RpY2UgZXhhbXBsZXMgaW4gdGhlIFtNb2Rlcm5EaXZlIHRleHRib29rXShodHRwczovL21vZGVybmRpdmUuY29tL2luZGV4Lmh0bWwpLiBJbiBhZGRpdGlvbiwgdGhpcyBkb2N1bWVudCBpdHNlbGYgc2hvd3MgbXkgbGVhcm5pbmcgYW5kIHNraWxsIGRldmVsb3BtZW50IHdpdGggUi4KCkJlbG93IGlzIGEgY2h1bmsgb2YgY29kZSB0aGF0IGlzIG5lZWRlZCB0byBzaG93IHNvbWUgb2YgdGhlIExlYXJuaW5nIENoZWNrcyBhbmQgdGhlIHByYWN0aWNlIGV4YW1wbGVzIGZyb20gdGhlIHRleHRib29rIG9uIHRoaXMgZG9jdW1lbnQuIFlvdSdsbCBzZWUgdGhlIHBhY2thZ2UgYG55Y2ZsaWdodHMxM2AgaW4gcmVkIGJlbG93IHdoaWNoIGNvbnRhaW5zIHJlYWwgZmxpZ2h0IGRhdGEgZnJvbSBOZXcgWW9yayBDaXR5IGFpcnBvcnRzIGZyb20gMjAxMy4gVGhpcyBpcyB0aGUgZGF0YSBJIHdpbGwgbWFuaXB1bGF0ZSBpbiB0aGUgTGVhcm5pbmcgQ2hlY2tzIGFuZCBwcmFjdGljZSBleGFtcGxlcy4gVGhlIG90aGVyIHBhY2thZ2VzIGFyZSB0aGUgdG9vbHMgdGhhdCBhbGxvdyBmb3Igc29tZSBvZiB0aGF0IG1hbmlwdWxhdGlvbi4gRm9yIGV4YW1wbGUsIGBnZ3Bsb3QyYCBpcyBhIHBhY2thZ2UgdGhhdCBhbGxvd3MgZm9yIHBsb3R0aW5nIG9mIGRhdGEuCmBgYHtyIGxvYWQtcGFja2FnZXMsIHJlc3VsdHM9ImhpZGUiLCBtZXNzYWdlPUZBTFNFfQoKYygKICAibnljZmxpZ2h0czEzIiwKICAiZHBseXIiLAogICJrbml0ciIsCiAgImdncGxvdDIiLAogICJybWFya2Rvd24iLAogICJ4YXJpbmdhbiIsCiAgInRpZHl2ZXJzZSIsCiAgImJvb2tkb3duIiwKICAia2FibGVFeHRyYSIsCiAgImZpdmV0aGlydHllaWdodCIKKSAtPiBwYWNrYWdlX3ZlY3RvcgoKc2FwcGx5KFggPSBwYWNrYWdlX3ZlY3RvciwKICAgICAgIEZVTiA9IGxpYnJhcnksIAogICAgICAgY2hhcmFjdGVyLm9ubHkgPSBUUlVFKQoKCmBgYAoKIyMgQ2hhcHRlciAxOiBJbnRyb2R1Y3Rpb24gdG8gUiBhbmQgUnN0dWRpbwoKTXVjaCBvZiB0aGlzIGNoYXB0ZXIgaXMgYWJvdXQgbGVhcm5pbmcgYmFzaWMgc3ludGF4IGluIFIsIHN1Y2ggYXMgaWRlbnRpZnlpbmcgYGNvbXB1dGVyX2NvZGVgIGFuZCB1bmRlcnN0YW5kaW5nIHRoZSBSc3R1ZGlvIGludGVyZmFjZS4gCgojIyMgTGVhcm5pbmcgQ2hlY2sgMS4xCipSZXBlYXQgdGhlIGFib3ZlIGluc3RhbGxpbmcgc3RlcHMsIGJ1dCBmb3IgdGhlIGBkcGx5cmAsIGBueWNmbGlnaHRzMTNgLCBhbmQgYGtuaXRyYCBwYWNrYWdlcy4gVGhpcyB3aWxsIGluc3RhbGwgdGhlIGVhcmxpZXIgbWVudGlvbmVkIGBkcGx5cmAgcGFja2FnZSwgdGhlIGBueWNmbGlnaHRzMTNgIHBhY2thZ2UgY29udGFpbmluZyBkYXRhIG9uIGFsbCBkb21lc3RpYyBmbGlnaHRzIGxlYXZpbmcgYSBOWUMgYWlycG9ydCBpbiAyMDEzLCBhbmQgdGhlIGBrbml0cmAgcGFja2FnZSBmb3Igd3JpdGluZyByZXBvcnRzIGluIFIuKgoKKipBbnN3ZXI6KioKYGBgIAppbnN0YWxsLnBhY2thZ2VzKGMoImRwbHlyIiwgIm55Y2ZsaWdodHMxMyIsIGtuaXRyIikpCmBgYApJbnN0YWxsaW5nIGEgcGFja2FnZSBkb3dubG9hZHMgdGhlIHBhY2thZ2Ugb250byB5b3VyIGxvY2FsIGNvbXB1dGVyLgoKIyMjIExlYXJuaW5nIENoZWNrIDEuMgoq4oCcTG9hZOKAnSB0aGUgZHBseXIsIG55Y2ZsaWdodHMxMywgYW5kIGtuaXRyIHBhY2thZ2VzIGFzIHdlbGwgYnkgcmVwZWF0aW5nIHRoZSBhYm92ZSBzdGVwcy4qCgoqKkFuc3dlcjoqKgpgYGAgCmxpYnJhcnkoImRwbHlyIikgCmxpYnJhcnkoIm55Y2ZsaWdodHMxMyIpCmxpYnJhcnkoImtuaXRyIikKYGBgCkxvYWRpbmcgYSBwYWNrYWdlIHRlbGxzIFJzdHVkaW8gdG8gc3dpdGNoICJvbiIgdGhhdCBwYXJ0aWN1bGFyIHBhY2thZ2UuCgojIyMgUHJhY3RpY2UgMS40LjIKRXhwbG9yZSB0aGUgYGZsaWdodHNgIGRhdGEgZnJhbWUgYnkgY2FsbGluZyB1cCB0aGUgYGZsaWdodHNgIHRpYmJsZS4KYGBge3J9CmZsaWdodHMKYGBgCgojIyMgTGVhcm5pbmcgQ2hlY2sgMS4zCipSdW4gYFZpZXcoZmxpZ2h0cylgIGluIHlvdXIgQ29uc29sZSBpbiBSU3R1ZGlvLi4uYW5kIGV4cGxvcmUgdGhpcyBkYXRhIGZyYW1lIGluIHRoZSByZXN1bHRpbmcgcG9wLXVwIHZpZXdlci4gV2hhdCBkb2VzIGFueSBPTkUgcm93IGluIHRoaXMgZmxpZ2h0cyBkYXRhc2V0IHJlZmVyIHRvPyoKPGJyPiAqICpBLiBEYXRhIG9uIGFuIGFpcmxpbmUqCjxicj4gKiAqQi4gRGF0YSBvbiBhIGZsaWdodCoKPGJyPiAqICpDLiBEYXRhIG9uIGFuIGFpcnBvcnQqCjxicj4gKiAqRC4gRGF0YSBvbiBtdWx0aXBsZSBmbGlnaHRzKgoKKipBbnN3ZXI6KioKQi4gRGF0YSBvbiBhIGZsaWdodAo8YnI+IFJvd3MgY29ycmVzcG9uZCB0byBpbmRpdmlkdWFsIG9ic2VydmF0aW9ucyBvciBkYXRhIG9uIEEgZmxpZ2h0LiBgYWlybGluZWAsIGFuZCBgYWlycG9ydGAgYXJlIHZhcmlhYmxlcyBhbmQgYXBwZWFyIGluIGNvbHVtbnMgbm90IHJvd3MgYW5kICJEYXRhIG9uIG11bHRpcGxlIGZsaWdodHMiIHdvdWxkIG5vdCBhcHBlYXIgb24gYW55IE9ORSByb3cuCgojIyMgUHJhY3RpY2UgMS40LjMuMgpFeHBsb3JlIGEgZGF0YSBmcmFtZSB1c2luZyB0aGUgYGdsaW1wc2VgIGZ1bmN0aW9uLgpgYGB7cn0KZ2xpbXBzZShmbGlnaHRzKQpgYGAKCiMjIyBMZWFybmluZyBDaGVjayAxLjQKKldoYXQgYXJlIHNvbWUgZXhhbXBsZXMgaW4gdGhpcyBkYXRhc2V0IG9mIF9fY2F0ZWdvcmljYWxfXyB2YXJpYWJsZXM/IFdoYXQgbWFrZXMgdGhlbSBkaWZmZXJlbnQgdGhhbiBfX3F1YW50aXRhdGl2ZV9fIHZhcmlhYmxlcz8qCgoqKkFuc3dlcjoqKgpDYXRlZ29yaWNhbCB2YXJpYWJsZXMgYXJlIGxhYmVscywgc3VjaCBhcyBgY2FycmllcmAsIG9yIGBkZXN0YC4gVGhleSBhcmUgb2Z0ZW4gYGNocmAgb3IgdGV4dCBkYXRhIGJ1dCBjYW4gYmUgbnVtZXJpY2FsLiBIb3dldmVyLCBgMWAgaXMgbm90IOKAnG1vcmXigJ0gb3Ig4oCcbGVzc+KAnSB0aGFuIGFueSBvdGhlciwgaXQgaXMgYSBqdXN0IGEgY2F0ZWdvcml6YXRpb24uIAoKIyMjIFByYWN0aWNlIDEuNC4zLjMKRXhwbG9yZSBhIGRhdGEgZnJhbWUgdXNpbmcgdGhlIGBrYWJsZWAgZnVuY3Rpb24uIFRoZSBga2FibGVgIGZ1bmN0aW9uIGNsZWFucyB1cCB0aGUgZGF0YSBpbnRvIGEgbW9yZSBsZWdpYmxlIGZvcm1hdC4KYGBge3J9CmFpcmxpbmVzCmthYmxlKGFpcmxpbmVzKQpgYGAKCiMjIyBQcmFjdGljZSAxLjQuMy40CkV4cGxvcmUgYSB2YXJpYWJsZSB1c2luZyB0aGUgYCRgIG9wZXJhdG9yLgpgYGB7cn0KYWlybGluZXMKYWlybGluZXMkbmFtZQpgYGAKCiMjIyBMZWFybmluZyBDaGVjayAxLjUKKldoYXQgcHJvcGVydGllcyBvZiB0aGUgb2JzZXJ2YXRpb25hbCB1bml0IGRvIGVhY2ggb2YgYGxhdGAsIGBsb25gLCBgYWx0YCwgYHR6YCwgYGRzdGAsIGFuZCBgdHpvbmVgIGRlc2NyaWJlIGZvciB0aGUgYWlycG9ydHMgZGF0YSBmcmFtZT8gTm90ZSB0aGF0IHlvdSBtYXkgd2FudCB0byB1c2UgYD9haXJwb3J0c2AgdG8gZ2V0IG1vcmUgaW5mb3JtYXRpb24uKgoKKipBbnN3ZXI6KioKYD9haXJwb3J0c2AgbGF1bmNoZXMgdGhlIEhlbHAgdGFiIHdoaWNoIHNob3dzIHRoYXQgdGhlIHZhcmlhYmxlcyBhcmUgdXNlZCB0byBkZXNjcmliZSBpbmRpdmlkdWFsIGFpcnBvcnRzLiBgbGF0YCBhbmQgYGxvbmAgcmVmZXIgdG8gdGhlIGxhdGl0dWRlIGFuZCBsb25naXR1ZGUuIGBhbHRgIHJlZmVycyB0byB0aGUgZWxldmF0aW9uLiBgdHpgIGlzIHRoZSBHTVQgd2hpbGUgYGRzdGAgaXMgZGF5bGlnaHQgc2F2aW5ncyB0aW1lIHpvbmUgYW5kIGB0em9uZWAgaXMgdGhlIElBTkEgdGltZSB6b25lLgoKIyMjIExlYXJuaW5nIENoZWNrIDEuNgoqUHJvdmlkZSB0aGUgbmFtZXMgb2YgdmFyaWFibGVzIGluIGEgZGF0YSBmcmFtZSB3aXRoIGF0IGxlYXN0IHRocmVlIHZhcmlhYmxlcyBpbiB3aGljaCBvbmUgb2YgdGhlbSBpcyBhbiBpZGVudGlmaWNhdGlvbiB2YXJpYWJsZSBhbmQgdGhlIG90aGVyIHR3byBhcmUgbm90LiBJbiBvdGhlciB3b3JkcywgY3JlYXRlIHlvdXIgb3duIHRpZHkgZGF0YSBmcmFtZSB0aGF0IG1hdGNoZXMgdGhlc2UgY29uZGl0aW9ucy4qCgoqKkFuc3dlcjoqKgpBIHBvc3NpYmxlIGRhdGEgZnJhbWUgd2l0aCB0aHJlZSB2YXJpYWJsZXMsIG9uZSBvZiB3aGljaCBpcyBhbiBpZGVudGlmaWNhdGlvbiB2YXJpYWJsZSBhbmQgdGhlIG90aGVyIHR3byBhcmUgbm90IHdvdWxkIGJlIGEgZGF0YSBmcmFtZSBhYm91dCBob21lcy4gQW4gaWRlbnRpZmljYXRpb24gdmFyaWFibGUgY291bGQgYmUgdGhlIGNvbG9yIG9mIHRoZSBob3VzZSBvciB0aGUgYXJjaGl0ZWN0dXJhbCBzdHlsZSBvZiB0aGUgaG91c2UuIFR3byBtZWFzdXJlbWVudCB2YXJpYWJsZXMgY291bGQgYmUgdGhlIG51bWJlciBvZiBiYXRocm9vbXMgYW5kIHRoZSBzcXVhcmUgZm9vdGFnZS4KCiMjIENoYXB0ZXIgMjogRGF0YSBWaXN1YWxpemF0aW9uClRoaXMgY2hhcHRlciBpcyBhYm91dCB1c2luZyBtdWx0aXBsZSBkYXRhIHZpc3VhbGl6YXRpb24gdGVjaG5pcXVlcyBvbiB0aGUgYG55Y2ZsaWdodHMxM2AgcGFja2FnZS4KCiMjIyBQcmFjdGljZSAyLjMKVXRpbGl6aW5nIGEgc2NhdHRlcnBsb3QsIHZpc3VhbGl6ZSB0aGUgcmVsYXRpb25zaGlwIGJldHdlZW4gYGRlcF9kZWxheWAgb24gdGhlIHgtYXhpcyBhbmQgYGFycl9kZWxheWAgb24gdGhlIHktYXhpcyBmb3IgQWxhc2thIEFpcmxpbmVzIGZsaWdodHMgbGVhdmluZyBOWUMgaW4gMjAxMy4gCgpGaXJzdCwgSSdsbCBuZWVkIHRvIGZpbHRlciBvbmx5IHRoZSBBbGFza2EgQWlybGluZXMgZmxpZ2h0cy4KYGBge3J9CmFsYXNrYV9mbGlnaHRzIDwtIGZsaWdodHMgJT4lCiAgZmlsdGVyKGNhcnJpZXIgPT0gIkFTIikKYGBgCkhlcmUgSSBoYXZlIGNyZWF0ZWQgYSBuZXcgZGF0YSBmcmFtZSBuYW1lZCBgYWxhc2thX2ZsaWdodHNgIGFuZCBhc2tlZCBSIHRvIHBvcHVsYXRlIHRoZSBkYXRhIGZyYW1lIGJhc2VkIG9mZiBvZiB0aGUgZGF0YSBmcmFtZSBgZmxpZ2h0c2AgZmlsdGVyaW5nIGZvciBvbmx5IHRob3NlIGZsaWdodHMgdGhhdCBhcmUgZnJvbSBBbGFza2EgQWlybGluZXMuCgojIyMgTGVhcm5pbmcgQ2hlY2sgMi4xCipUYWtlIGEgbG9vayBhdCBib3RoIHRoZSBgZmxpZ2h0c2AgYW5kIGBhbGFza2FfZmxpZ2h0c2AgZGF0YSBmcmFtZXMgYnkgcnVubmluZyBgVmlldyhmbGlnaHRzKWAgYW5kIGBWaWV3KGFsYXNrYV9mbGlnaHRzKWAuIEluIHdoYXQgcmVzcGVjdCBkbyB0aGVzZSBkYXRhIGZyYW1lcyBkaWZmZXI/IEZvciBleGFtcGxlLCB0aGluayBhYm91dCB0aGUgbnVtYmVyIG9mIHJvd3MgaW4gZWFjaCBkYXRhc2V0LioKCmBgYHtyfQpnbGltcHNlKGZsaWdodHMpCmdsaW1wc2UoYWxhc2thX2ZsaWdodHMpCmBgYAoKKipBbnN3ZXI6KioKVGhlIGBmbGlnaHRzYCBkYXRhIGZyYW1lIGhhcyBhbGwgdGhlIGZsaWdodHMgZGVwYXJ0aW5nIE5ZQyBhaXJwb3J0cyBpbiAyMDEzLCBvdmVyIDMzNiw3NzYgcm93cy4gVGhlIGBhbGFza2FfZmxpZ2h0c2AgZGF0YSBmcmFtZSBoYXMgb25seSB0aG9zZSBmbGlnaHRzIGRlcGFydGluZyBOWUMgYWlycG9ydHMgaW4gMjAxMyB0aGF0IHdlcmUgb3BlcmF0ZWQgYnkgQWxhc2thIEFpcmxpbmVzLCBqdXN0IDcxNCByb3dzLgoKIyMjIFByYWN0aWNlIDIuMy4xIFNjYXR0ZXJwbG90cwpVdGlsaXppbmcgdGhlIGBhbGFza2FfZmxpZ2h0c2AgZGF0YSBmcmFtZSBJIGNyZWF0ZWQgYWJvdmUsIG5vdyBJIHdpbGwgdXNlIHRoZSBgZ2dwbG90MmAgcGFja2FnZSB0byBjcmVhdGUgYSBzY2F0dGVycGxvdCB3aXRoIHRoZSBgZ2dwbG90YCBmdW5jdGlvbi4KYGBge3Igc2NhdHRlcnBsb3R9CmdncGxvdChkYXRhID0gYWxhc2thX2ZsaWdodHMsCiAgICAgICBtYXBwaW5nID0gYWVzKHggPSBkZXBfZGVsYXksCiAgICAgICAgICAgICAgICAgICAgIHkgPSBhcnJfZGVsYXkpKSArIAogIGdlb21fcG9pbnQoKQpgYGAKCkFib3ZlIGlzIGEgc2NhdHRlcnBsb3Qgb2YgYGFsYXNrYV9mbGlnaHRzYCB3aGVyZSBgZGVwX2RlbGF5YCBpcyBvbiB0aGUgeC1heGlzIGFuZCBgYXJyX2RlbGF5YCBpcyBvbiB0aGUgeS1heGlzIGFuZCBlYWNoIG9ic2VydmF0aW9uIGlzIHJlcHJlc2VudGVkIGJ5IGEgcG9pbnQgb24gdGhlIHBsb3QuIEFkZGl0aW9uYWxseSwgd2Ugc2VlIHRoYXQgNSByb3dzIHdlcmUgcmVtb3ZlZCBmcm9tIHRoZSA3MTQgYmVjYXVzZSB0aGV5IGFyZSBtaXNzaW5nIHZhbHVlcy4KCiMjIyBMZWFybmluZyBDaGVjayAyLjIKKldoYXQgYXJlIHNvbWUgcHJhY3RpY2FsIHJlYXNvbnMgd2h5IGBkZXBfZGVsYXlgIGFuZCBgYXJyX2RlbGF5YCBoYXZlIGEgcG9zaXRpdmUgcmVsYXRpb25zaGlwPyoKCioqQW5zd2VyOioqCk9uZSByZWFzb24gY291bGQgYmUgdGhhdCBsZWF2aW5nIGFuIGhvdXIgbGF0ZXIgY2FuIG1lYW4gYXJyaXZpbmcgYW4gaG91ciBsYXRlci4gT24gdGhlIG90aGVyIGhhbmQsIHNvbWV0aW1lcyBmbGlnaHRzIG1ha2UgdXAgdGltZSBvciBhcnJpdmUgZWFybGllciB0aGFuIGV4cGVjdGVkIGR1ZSB0byB0YWlsd2luZC4gVGhlIG9wcG9zaXRlIGNhbiBhbHNvIGJlIHRydWUgaWYgdGhlcmUgYXJlIGhlYWR3aW5kcy4KCiMjIyBMZWFybmluZyBDaGVjayAyLjMKKldoYXQgdmFyaWFibGVzIGluIHRoZSBgd2VhdGhlcmAgZGF0YSBmcmFtZSB3b3VsZCB5b3UgZXhwZWN0IHRvIGhhdmUgYSBuZWdhdGl2ZSBjb3JyZWxhdGlvbiAoaS5lLiBhIG5lZ2F0aXZlIHJlbGF0aW9uc2hpcCkgd2l0aCBgZGVwX2RlbGF5YD8gV2h5PyBSZW1lbWJlciB0aGF0IHdlIGFyZSBmb2N1c2luZyBvbiBudW1lcmljYWwgdmFyaWFibGVzIGhlcmUuIEhpbnQ6IEV4cGxvcmUgdGhlIHdlYXRoZXIgZGF0YXNldCBieSB1c2luZyB0aGUgYFZpZXcoKWAgZnVuY3Rpb24uKgoKKipBbnN3ZXI6KioKTG9va2luZyBhdCB0aGUgYFZpZXcod2VhdGhlcilgIHdlIHNlZSB0aGVyZSBhcmUgc2V2ZXJhbCB2YXJpYWJsZXMgdGhhdCBjb3VsZCBpbXBhY3QgYGRlcF9kZWxheWAgc3VjaCBhcyBgd2luZF9ndXN0YCBhbmQgYHZpc2liYC4KCiMjIyBMZWFybmluZyBDaGVjayAyLjQKKldoeSBkbyB5b3UgYmVsaWV2ZSB0aGVyZSBpcyBhIGNsdXN0ZXIgb2YgcG9pbnRzIG5lYXIgKDAsIDApPyBXaGF0IGRvZXMgKDAsIDApIGNvcnJlc3BvbmQgdG8gaW4gdGVybXMgb2YgdGhlIEFsYXNrYW4gZmxpZ2h0cz8qCgoqKkFuc3dlcjoqKgpUaGlzIGlzIGxpa2VseSBiZWNhdXNlIGZsaWdodHMgd2hpY2ggd2VyZSBub3QgZGVsYXllZCB1cG9uIGRlcGFydHVyZSBhcnJpdmVkIHdpdGhvdXQgZGVsYXlzIGFzIHdlbGwuICgwLCAwKSByZXByZXNlbnRzIGZsaWdodHMgdGhhdCBkZXBhcnRlZCBvbiB0aW1lIGFuZCBhcnJpdmVkIG9uIHRpbWUuCgojIyMgTGVhcm5pbmcgQ2hlY2sgMi41CipXaGF0IGFyZSBzb21lIG90aGVyIGZlYXR1cmVzIG9mIHRoZSBwbG90IHRoYXQgc3RhbmQgb3V0IHRvIHlvdT8qCgoqKkFuc3dlcjoqKgpUaGUgc2NhdHRlcnBsb3Qgc2hvd3MgYSBmYWlybHkgcGVyZmVjdCBjb3JyZWxhdGlvbiB3aGVyZSB0aGUgZG90cyBjb3VsZCBiZSByZXByZXNlbnRlZCBieSBhIHN0cmFpZ2h0IGxpbmUgd2l0aCBhIHNsb3BlIG9mIDEuIEFsc28gaXQgc2hvd3MgZmxpZ2h0cyB0aGF0IGRlcGFydGVkIGVhcmx5IGFuZCBhcnJpdmVkIGVhcmx5IGFuZCB0aHVzIGhhZCBuZWdhdGl2ZSBgZGVwX2RlbGF5YCBhbmQgYGFycl9kZWxheWAuCgojIyMgTGVhcm5pbmcgQ2hlY2sgMi42CipDcmVhdGUgYSBuZXcgc2NhdHRlcnBsb3QgdXNpbmcgZGlmZmVyZW50IHZhcmlhYmxlcyBpbiB0aGUgYGFsYXNrYV9mbGlnaHRzYCBkYXRhIGZyYW1lIGJ5IG1vZGlmeWluZyB0aGUgZXhhbXBsZSBhYm92ZS4qCgoqKkFuc3dlcjoqKgpgYGB7cn0KZ2dwbG90KAogIGRhdGEgPSBhbGFza2FfZmxpZ2h0cywKICBtYXBwaW5nID0gYWVzKAogICAgeCA9IHNjaGVkX2RlcF90aW1lLAogICAgeSA9IGRlcF9kZWxheSkpICsKICBnZW9tX3BvaW50KCkKYGBgCgpUaGlzIHBsb3Qgc2hvd3MgdGhhdCBtb3JlIGZsaWdodHMgc2NoZWR1bGVkIGxhdGVyIGluIHRoZSBkYXkgd2VyZSBkZWxheWVkIGNvbXBhcmVkIHRvIG11Y2ggZmV3ZXIgZmxpZ2h0cyBkZWxheWVkIHRoYXQgd2VyZSBvcmlnaW5hbGx5IHNjaGVkdWxlZCBlYXJseSBpbiB0aGUgZGF5LiBXZSBhbHNvIHNlZSBhbiBleGFtcGxlIG9mIGhvdyBpbXBvcnRhbnQgaXQgaXMgdG8gdW5kZXJzdGFuZCBvdXIgZGF0YSBiZWNhdXNlIHdlIHNlZSB0aGF0IEFsYXNrYSBBaXJsaW5lcyBvbmx5IGZsZXcgb3V0IG9mIE5ZQyBpbiB0aGUgZWFybHkgbW9ybmluZyBhbmQgdGhlIGV2ZW5pbmcgYXMgb3Bwb3NlZCB0byBzZXZlcmFsIHRpbWVzIHRocm91Z2hvdXQgdGhlIGRheS4gQWxzbywgd2Ugc2VlIHRoYXQgMiByb3dzIHdlcmUgcmVtb3ZlZCBmb3IgbWlzc2luZyB2YWx1ZXMuCgojIyMgUHJhY3RpY2UgMi4zLjIgRGVhbGluZyB3aXRoIG92ZXJwbG90dGluZwpJbiBQcmFjdGljZSAyLjMuMSwgd2Ugc2F3IGEgcGxvdCB0aGF0IGhhZCBtYW55IHBvaW50cyBuZWFyICgwLCAwKSB3aGljaCBtYWRlIGl0IGRpZmZpY3VsdCB0byB0ZWxsIGp1c3QgaG93IG1hbnkgZGF0YSBwb2ludHMgd2VyZSBpbiB0aGUgb3ZlcmxhcHBpbmcgYXJlYXMuIFRoaXMgaXMgY2FsbGVkIG92ZXJwbG90dGluZyBhbmQgaXQgY2FuIGJlIG1pdGlnYXRlZC4KCk1ldGhvZCAxOiBBZGp1c3RpbmcgdGhlIHRyYW5zcGFyZW5jeSBvZiB0aGUgYGdlb21gZXRyaWMgcG9pbnRzOgpgYGB7ciBzY2F0dGVycGxvdC10cmFuc3BhcmVuY3ksIHdhcm5pbmc9RkFMU0V9CmdncGxvdCgKICBkYXRhID0gYWxhc2thX2ZsaWdodHMsCiAgbWFwcGluZyA9IGFlcygKICAgIHggPSBkZXBfZGVsYXksCiAgICB5ID0gYXJyX2RlbGF5KSkgKwpnZW9tX3BvaW50KGFscGhhID0gLjIpICAKYGBgCgpUaGlzIHNjYXR0ZXJwbG90J3MgcG9pbnRzIGFyZSBzZXQgdG8gMjAlIG9wYWNpdHkgd2l0aCB0aGUgYGdlb21fcG9pbnQoYWxwaGEgPSAuMilgLiBUaGlzIGFsbG93cyB1cyB0byBtb3JlIGNsZWFybHkgc2VlIHRoZSBkZW5zaXR5IG9mIHRoZSBwb2ludHMgbmVhciAoMCwgMCkuCgpNZXRob2QgMjogKkppdHRlcmluZyogdGhlIHBvaW50cy4gVGhpcyBpbnRyb2R1Y2VzIHNvbWUgcmFuZG9tIG1vdmVtZW50IG9mIHRoZSBwb2ludHMuIFRoaXMgc2hvdWxkIG9ubHkgYmUgdXNlZCBmb3IgdmlzdWFsaXphdGlvbiBhbmQgdGhlIG9yaWdpbmFsIGRhdGEgc2hvdWxkIG5vdCBiZSBhbHRlcmVkLgoKYGBge3Igc2NhdHRlcnBsb3Qtaml0dGVyLCB3YXJuaW5nPUZBTFNFfQpnZ3Bsb3QoZGF0YSA9IGFsYXNrYV9mbGlnaHRzLAogICAgICAgbWFwcGluZyA9IGFlcygKICAgICAgICAgeCA9IGRlcF9kZWxheSwKICAgICAgICAgeSA9IGFycl9kZWxheSkpICsKICBnZW9tX2ppdHRlcigKICAgIHdpZHRoID0gMzAsCiAgICBoZWlnaHQgPSAzMCkKYGBgCgpUaGlzIHBsb3QgaXMgc2ltaWxhciB0byB0aGUgb3JpZ2luYWwgc2NhdHRlcnBsb3QgYnV0IHdlIGNhbiBtb3JlIGNsZWFybHkgc2VlIGhvdyBkZW5zZSB0aGUgKDAsIDApIGFyZWEgaXMuCgojIyMgTGVhcm5pbmcgQ2hlY2sgMi43CipXaHkgaXMgc2V0dGluZyB0aGUgYGFscGhhYCBhcmd1bWVudCB2YWx1ZSB1c2VmdWwgd2l0aCBzY2F0dGVycGxvdHM/IFdoYXQgZnVydGhlciBpbmZvcm1hdGlvbiBkb2VzIGl0IGdpdmUgeW91IHRoYXQgYSByZWd1bGFyIHNjYXR0ZXJwbG90IGNhbm5vdD8qCgoqKkFuc3dlcjoqKgpgYWxwaGFgIHdhcyB1c2VkIHRvIGNoYW5nZSB0aGUgb3BhY2l0eSBvZiB0aGUgYGdlb21fcG9pbnRgIGRvdHMuIFRoaXMgbGV0IHVzIHNlZSB0aGF0IHRoZXJlIHdhcyBhIGhpZ2ggZGVuc2l0eSBvZiBkYXRhIGluIHRoZSAoMCwgMCkgYXJlYS4KCiMjIyBMZWFybmluZyBDaGVjayAyLjgKKkFmdGVyIHZpZXdpbmcgdGhlIEZpZ3VyZSAyLjQsIGdpdmUgYW4gYXBwcm94aW1hdGUgcmFuZ2Ugb2YgYXJyaXZhbCBkZWxheXMgYW5kIGRlcGFydHVyZSBkZWxheXMgdGhhdCBvY2N1ciB0aGUgbW9zdCBmcmVxdWVudGx5LiBIb3cgaGFzIHRoYXQgcmVnaW9uIGNoYW5nZWQgY29tcGFyZWQgdG8gd2hlbiB5b3Ugb2JzZXJ2ZWQgdGhlIHNhbWUgcGxvdCB3aXRob3V0IHRoZSBhbHBoYSA9IDAuMiBzZXQgaW4gRmlndXJlIDIuMj8qCgoqKkFuc3dlcjoqKgpGaWd1cmUgMi4yIHdhcyB0aGUgc2NhdHRlcnBsb3Qgd2l0aG91dCBjaGFuZ2VzIHRvIHRoZSBgZ2VvbV9wb2ludGAgb3BhY2l0eSB3aGVyZWFzIEZpZ3VyZSAyLjQgaGFkIG9wYWNpdHkgc2V0IHRvIDIwJS4gV2Ugc2VlIHRoYXQgbW9zdCBmbGlnaHRzIGRlcGFydCBlYXJseSBvciB3aXRoaW4gYSBmZXcgbWludXRlcyBvZiBvbi10aW1lIGFuZCBtb3N0IG9mIHRob3NlIGZsaWdodHMgYXJyaXZlIGVhcmx5IG9yIHdpdGhpbiBhIGZldyBtaW50ZXMgb2Ygb24tdGltZS4KCiMjIyBQcmFjdGljZSAyLjQ6IExpbmVncmFwaHMKVXNpbmcgdGhlIGBueWNmbGlnaHRzMTNgIHBhY2thZ2UsIHJlY2FsbCB0aGUgYHdlYXRoZXJgIGRhdGEgZnJhbWUuIFB1bGwgYSBsaXN0IHRoZSB2YXJpYWJsZXMgaW4gdGhlIGB3ZWF0aGVyYCBkYXRhIGZyYW1lLiAKCmBgYHtyIHZpZXctd2VhdGhlci12YXJpYWJsZXN9Cm5hbWVzKHdlYXRoZXIpCmBgYApIZXJlIEkgaGF2ZSBsaXN0ZWQgYWxsIHRoZSB2YXJpYWJsZXMgaW4gdGhlIGRhdGEgZnJhbWUgYHdlYXRoZXJgLgoKQ3JlYXRlIGEgc3ViIGRhdGEgZnJhbWUgdG8gbG9vayBhdCB0aGUgYHRlbXBgIG9yIHRlbXBlcmF0dXJlIG9mIGZsaWdodHMgd2l0aCBgb3JpZ2luYCBOZXdhcmsgKGBFV1JgKSBkdXJpbmcgdGhlIGZpcnN0IGhhbGYgb2YgSmFudWFyeS4KYGBge3IgdGVtcC1FV1ItZWFybHktSmFudWFyeX0KZWFybHlfamFudWFyeV93ZWF0aGVyIDwtIHdlYXRoZXIgJT4lCiAgZmlsdGVyKAogICAgb3JpZ2luID09ICJFV1IiICYKICAgICAgbW9udGggPT0gMSAmCiAgICAgIGRheSA8PSAxNSkKZWFybHlfamFudWFyeV93ZWF0aGVyCmBgYAoKSGVyZSBJJ3ZlIGNyZWF0ZWQgYSBkYXRhIGZyYW1lIHRoYXQgaXMgYSBzdWJzZXQgb2YgdGhlIG9yaWdpbmFsIGB3ZWF0aGVyYCBkYXRhZnJhbWUuIEkgZGlkIHRoaXMgYnkgY3JlYXRpbmcgYSBuZXcgb2JqZWN0IG5hbWVkIGBlYXJseV9qYW51YXJ5X3dlYXRoZXJgIGFuZCB1c2VkIGEgYGZpbHRlcigpYCB0byBmZWVkIGluIGRhdGEgZnJvbSBgd2VhdGhlcmAgdGhhdCBtYXRjaGVzIGBvcmlnaW4gPT0gIkVXUiJgIG9yIE5ld2FyaywgZHVyaW5nIHRoZSBgbW9udGggPT0gMWAgb3IgSmFudWFyeSwgd2hlcmUgYGRheSA8PSAxNWAgb3IgZGF5cyAxIHRocm91Z2ggMTUgb24gdGhlIGNhbGVuZGFyLgoKIyMjIExlYXJuaW5nIENoZWNrIDIuOQoqVGFrZSBhIGxvb2sgYXQgYm90aCB0aGUgYHdlYXRoZXJgIGFuZCBgZWFybHlfamFudWFyeV93ZWF0aGVyYCBkYXRhIGZyYW1lcyBieSBydW5uaW5nIGBWaWV3KHdlYXRoZXIpYCBhbmQgYFZpZXcoZWFybHlfamFudWFyeV93ZWF0aGVyKWAuIEluIHdoYXQgcmVzcGVjdCBkbyB0aGVzZSBkYXRhIGZyYW1lcyBkaWZmZXI/KgoKKipBbnN3ZXI6KioKYGVhcmx5X2phbnVhcnlfd2VhdGhlcmAgaXMgYSBzdWJzZXQgb2YgYHdlYXRoZXJgIGFuZCB0aHVzIGhhcyBmZXdlciBvYnNlcnZhdGlvbnMuCgojIyMgTGVhcm5pbmcgQ2hlY2sgMi4xMAoqYFZpZXcoKWAgdGhlIGBmbGlnaHRzYCBkYXRhIGZyYW1lIGFnYWluLiBXaHkgZG9lcyB0aGUgYHRpbWVfaG91cmAgdmFyaWFibGUgdW5pcXVlbHkgaWRlbnRpZnkgdGhlIGhvdXIgb2YgdGhlIG1lYXN1cmVtZW50IHdoZXJlYXMgdGhlIGBob3VyYCB2YXJpYWJsZSBkb2VzIG5vdD8qCgoqKkFuc3dlcjoqKgoKCiMjIyBQcmFjdGljZSAyLjQuMTogTGluZWdyYXBocyB2aWEgZ2VvbV9saW5lClBsb3QgYSBsaW5lZ3JhcGggb2YgaG91cmx5IHRlbXBlcmF0dXJlcyBpbiBgZWFybHlfamFudWFyeV93ZWF0aGVyYCBieSB1c2luZyBgZ2VvbV9saW5lKClgIGluc3RlYWQgb2YgYGdlb21fcG9pbnQoKWAgbGlrZSB3ZSBkaWQgZm9yIHNjYXR0ZXJwbG90cy4KCmBgYHtyfQpnZ3Bsb3QoZGF0YSA9IGVhcmx5X2phbnVhcnlfd2VhdGhlciwKICAgICAgIG1hcHBpbmcgPSBhZXMoeCA9IHRpbWVfaG91ciwKICAgICAgICAgICAgICAgICAgICAgeSA9IHRlbXApKSArCiAgZ2VvbV9saW5lKCkKYGBgCgojIyMgTGVhcm5pbmcgQ2hlY2sgMi4xMQoqV2h5IHNob3VsZCBsaW5lZ3JhcGhzIGJlIGF2b2lkZWQgd2hlbiB0aGVyZSBpcyBub3QgYSBjbGVhciBvcmRlcmluZyBvZiB0aGUgaG9yaXpvbnRhbCBheGlzPyoKCioqQW5zd2VyOioqCkJlY2F1c2UgbGluZWdyYXBocyBkb24ndCBtYWtlIHNlbnNlIHdpdGhvdXQgY2xlYXIgb3JkZXJpbmcuIEVhY2ggcG9pbnQgbmVlZHMgdG8gaGF2ZSBtZWFuaW5nIHJlbGF0aXZlIHRvIHRoZSBuZXh0LgoKIyMjIExlYXJuaW5nIENoZWNrIDIuMTIKKldoeSBhcmUgbGluZWdyYXBocyBmcmVxdWVudGx5IHVzZWQgd2hlbiB0aW1lIGlzIHRoZSBleHBsYW5hdG9yeSB2YXJpYWJsZSBvbiB0aGUgeC1heGlzPyoKCioqQW5zd2VyOioqCkJlY2F1c2UgbGluZWdyYXBocyBhcmUgd2VsbCBzdWl0ZWQgdG8gbGluZWFyIGRhdGEgYW5kIHdlIGV4cGVyaWVuY2UgdGltZSBsaW5lYXJseS4KCiMjIyBMZWFybmluZyBDaGVjayAyLjEzCipQbG90IGEgdGltZSBzZXJpZXMgb2YgYSB2YXJpYWJsZSBvdGhlciB0aGFuIGB0ZW1wYCBmb3IgTmV3YXJrIEFpcnBvcnQgaW4gdGhlIGZpcnN0IDE1IGRheXMgb2YgSmFudWFyeSAyMDEzLioKCioqQW5zd2VyOioqCmBgYHtyIHRpbWVzZXJpZXMtRVdSLWh1bWlkfQpnZ3Bsb3QoZGF0YSA9IGVhcmx5X2phbnVhcnlfd2VhdGhlciwKICAgICAgIG1hcHBpbmcgPSBhZXMoeCA9IHRpbWVfaG91ciwKICAgICAgICAgICAgICAgICAgICAgeSA9IGh1bWlkKSkgKwogIGdlb21fbGluZSgpCmBgYAoKSGVyZSBJJ3ZlIGNyZWF0ZWQgYSBuZXcgbGluZWdyYXBoIHNob3dpbmcgdGhlIGhvdXJseSBodW1pZGl0eSwgb3IgYGh1bWlkYCwgZm9yIE5ld2FyayBBaXJwb3J0IGluIHRoZSBmaXJzdCAxNSBkYXlzIG9mIEphbnVhcnkgMjAxMy4KCiMjIyBQcmFjdGljZSAyLjU6IEhpc3RvZ3JhbXMKSGlzdG9ncmFtcyBhcmUgdXNlZnVsIGZvciBzaG93aW5nIGRpc3RyaWJ1dGlvbnMuIFRoZSBiYXNpYyBgZ2VvbV9oaXN0b2dyYW1gIGlzIHRoZSBmb2xsb3dpbmc6CgpgYGB7ciBmaXJzdC1oaXN0b2dyYW19CmdncGxvdChkYXRhID0gd2VhdGhlciwKICAgICAgIG1hcHBpbmcgPSBhZXMoeCA9IHRlbXApKSArCiAgZ2VvbV9oaXN0b2dyYW0oKQpgYGAKCkhlcmUgd2Ugc2VlIGEgc3VnZ2VzdGlvbiB0byAiUGljayBiZXR0ZXIgdmFsdWUgd2l0aCBgYmlud2lkdGhgIiBidXQgdGhhdCBSIGhhcyBzdXBwbGllZCBhIGBiaW5zID0gMzBgIGFzIHRoZSBkZWZhdWx0LiBXZSBhbHNvIHNlZSBhIHdhcm5pbmcgdGhhdCBvbmUgcm93IHdhcyByZW1vdmVkLgoKQWRkIGEgd2hpdGUgYm9yZGVyIHRvIHRoZSBiaW5zIHRvIG1vcmUgY2xlYXJseSBzZWUgZWFjaCBpbmRpdmlkdWFsIGJpbiBhbmQgY2hhbmdlIHRoZSBmaWxsIHRvIGNvbG9yIG9mIGNob2ljZToKYGBge3IgZmlyc3QtaGlzdG9ncmFtLXdoaXRlLWJvcmRlcnMsIHdhcm5pbmc9RkFMU0UsIG1lc3NhZ2U9RkFMU0V9CmdncGxvdChkYXRhID0gd2VhdGhlciwKICAgICAgIG1hcHBpbmcgPSBhZXMoeCA9IHRlbXApKSArIAogIGdlb21faGlzdG9ncmFtKGNvbG9yID0gIndoaXRlIiwgZmlsbCA9ICJmaXJlYnJpY2sxIikKYGBgCgpBZGp1c3QgdGhlIG51bWJlciBvZiBgYmluc2AgdG8gNDA6CmBgYHtyIDFoaXN0by1iaW40NSwgd2FybmluZz1GQUxTRSwgbWVzc2FnZT1GQUxTRX0KZ2dwbG90KGRhdGEgPSB3ZWF0aGVyLAogICAgICAgbWFwcGluZyA9IGFlcyh4ID0gdGVtcCkpICsKICBnZW9tX2hpc3RvZ3JhbShjb2xvciA9ICJ3aGl0ZSIsIGZpbGwgPSAiZmlyZWJyaWNrMSIsIGJpbnMgPSA0MCkKYGBgCgpSZW1vdmUgdGhlIGJpbiBudW1iZXIgYW5kIGFkanVzdCB0aGUgYGJpbndpZHRoYCB0byAxMMKwRjoKYGBge3IgMWhpc3RvLWJpbndpZHRoMTBGLCB3YXJuaW5nPUZBTFNFLCBtZXNzYWdlPUZBTFNFfQpnZ3Bsb3QoZGF0YSA9IHdlYXRoZXIsCiAgICAgICBtYXBwaW5nID0gYWVzKHggPSB0ZW1wKSkgKwogIGdlb21faGlzdG9ncmFtKGNvbG9yID0gIndoaXRlIiwgZmlsbCA9ICJmaXJlYnJpY2sxIiwgYmlud2lkdGggPSAxMCkKYGBgCgojIyMgTGVhcm5pbmcgQ2hlY2sgMi4xNAoqV2hhdCBkb2VzIGNoYW5naW5nIHRoZSBudW1iZXIgb2YgYmlucyBmcm9tIDMwIHRvIDQwIHRlbGwgdXMgYWJvdXQgdGhlIGRpc3RyaWJ1dGlvbiBvZiB0ZW1wZXJhdHVyZXM/KgoKKipBbnN3ZXI6KioKVGhlcmUgaXNuJ3QgbXVjaCB0aGF0IGlzIGRpZmZlcmVudCwgdGhlIGRpc3RyaWJ1dGlvbiBpcyBmYWlybHkgc2ltaWxhci4gVGhlIGJpbnMgaGVyZSBhcmUgZnJvbSAxMC45NMKwRiB0byAxMDAuMDTCsEYsIHNvIGhhdmluZyBhIHNpbWlsYXIgZGlzdHJpYnV0aW9uIGJldHdlZW4gMzAgYW5kIDQwIGJpbnMgdGVsbHMgdXMgdGhhdCBgdGVtcGAgdmFsdWVzIGFyZSBhY2N1cmF0ZSB0byBhIGhpZ2ggZGVncmVlLiBMb29raW5nIGF0IGBWaWV3KHdlYXRoZXIpYCB3ZSBzZWUgdGhhdCBgdGVtcGAgaXMgYWNjdXJhdGUgdG8gdGhlIHNlY29uZCBkZWNpbWFsIHBvaW50LgpgYGB7ciAxaGlzdG8tYmluMzA0MCwgd2FybmluZz1GQUxTRSwgbWVzc2FnZT1GQUxTRX0KZ2dwbG90KGRhdGEgPSB3ZWF0aGVyLAogICAgICAgbWFwcGluZyA9IGFlcyh4ID0gdGVtcCkpICsKICBnZW9tX2hpc3RvZ3JhbShjb2xvciA9ICJ3aGl0ZSIsIGZpbGwgPSAiZmlyZWJyaWNrMSIsIGJpbnMgPSAzMCkKYGBgCmBgYHtyIDJoaXN0by1iaW4zMDQwLCB3YXJuaW5nPUZBTFNFLCBtZXNzYWdlPUZBTFNFfQpnZ3Bsb3QoZGF0YSA9IHdlYXRoZXIsCiAgICAgICBtYXBwaW5nID0gYWVzKHggPSB0ZW1wKSkgKwogIGdlb21faGlzdG9ncmFtKGNvbG9yID0gIndoaXRlIiwgZmlsbCA9ICJmaXJlYnJpY2sxIiwgYmlucyA9IDQwKQpgYGAKCiMjIyBMZWFybmluZyBDaGVjayAyLjE1CipXb3VsZCB5b3UgY2xhc3NpZnkgdGhlIGRpc3RyaWJ1dGlvbiBvZiB0ZW1wZXJhdHVyZXMgYXMgc3ltbWV0cmljIG9yIHNrZXdlZD8qCgoqKkFuc3dlcjoqKgpJdCBsb29rcyBwcmV0dHkgc3ltbWV0cmljLgoKIyMjIExlYXJuaW5nIENoZWNrIDIuMTYKKldoYXQgd291bGQgeW91IGd1ZXNzIGlzIHRoZSAiY2VudGVyIiB2YWx1ZSBpbiB0aGlzIGRpc3RyaWJ1dGlvbj8gV2h5IGRpZCB5b3UgbWFrZSB0aGF0IGNob2ljZT8qCgoqKkFuc3dlcjoqKgpWaXN1YWxseSwgd2Ugc2VlIHRoYXQgdGhlIHRlbXBlcmF0dXJlcyBhcmUgc3ltbWV0cmljYWxseSBkZXN0cmlidXRlZCBhbmQgdGhlIHJhbmdlIGlzIGZyb20gYWJvdXQgMTAtMTAwwrAsIHNvIHRoZSAiY2VudGVyIiB2YWx1ZSBpcyBsaWtlbHkgYWJvdXQgNTXCsC4gV2hlbiB3ZSBydW4gYHN1bW1hcnkoKWAgb24gYHdlYXRoZXJgIGFuZCBsb29rIGF0IGB0ZW1wYCB3ZSBzZWUgdGhhdCB0aGUgbWVkaWFuIGlzIDU1LjQwwrAgYW5kIHRoZSBtZWFuIGlzIDU1LjI2LgpgYGB7ciBjZW50ZXJvZnRlbXAsIHdhcm5pbmc9RkFMU0UsIG1lc3NhZ2U9RkFMU0V9CnN1bW1hcnkod2VhdGhlciR0ZW1wKQpgYGAKCiMjIyBMZWFybmluZyBDaGVjayAyLjE3CipJcyB0aGUgZGF0YSBzcHJlYWQgb3V0IGdyZWF0bHkgZnJvbSB0aGUgY2VudGVyIG9yIGlzIGl0IGNsb3NlPyBXaHk/KgoKKipBbnN3ZXI6KioKVGhhdCBkZXBlbmRzIG9uIHdoYXQgImdyZWF0bHkiIG1lYW5zLiBDb21wYXJlZCB0byBvdGhlciB5ZWFycz8gQ29tcGFyZWQgdG8gYW5vdGhlciBjaXR5PyBXaGVuIGNvbXBhcmVkIHRvIEthaWx1YSwgSGF3YWlpLCBhIHBsYWNlIHdpdGggYXZlcmFnZXMgZnJvbSA2OS04NcKwLCB0aGVuIHllcywgdGhlIHdlYXRoZXIgaW4gTllDIHdhcyBtb3JlIHNwcmVhZCBvdXQuCgojIyMgUHJhY3RpY2UgMi42OiBGYWNldHMKRmFjZXRzIGNhbiBicmVhayBvZmYgdmFyaWFibGUgYnkgYW5vdGhlciB2YXJpYWJsZSBmb3IgdmlzdWFsaXphdGlvbnMuIGBmYWNldF93cmFwYCBpcyBhIHZpc3VhbGl6YXRpb24gbW9kaWZpZXIgYGdncGxvdDJgIHRoYXQgd2lsbCBjcmVhdGUgbXVsdGlwbGUgcGxvdHMgd2hlcmUgdGhlIHggYW5kIHkgYXhlcyBtYXRjaCBidXQgZWFjaCBwbG90IHdpbGwgbG9vayBkaWZmZXJlbnQgYWNjb3JkaW5nIHRvIHRoZSBtb2RpZnlpbmcgdmFyaWFibGUuIEZvciBleGFtcGxlLCB3ZSBjYW4gbG9vayBhdCBgd2VhdGhlcmAgYnkgYHRlbXBgIGJ5IGBtb250aGAuCmBgYHtyIGZhY2V0bW9udGgsIHdhcm5pbmc9RkFMU0UsIG1lc3NhZ2U9RkFMU0V9CmdncGxvdChkYXRhID0gd2VhdGhlciwKICAgICAgIG1hcHBpbmcgPSBhZXMoeCA9IHRlbXApKSArCiAgZ2VvbV9oaXN0b2dyYW0oYmlud2lkdGggPSA1LCBjb2xvciA9ICJ3aGl0ZSIpICsKICBmYWNldF93cmFwKH4gbW9udGgpCmBgYAoKQWJvdmUgd2Ugc2VlIHRlbXBzIGJ5IG1vbnRoLiBXZSBjYW4gZnVydGhlciBtb2RpZnkgdGhlIG91dHB1dCBieSBhc2tpbmcgZm9yIHRoZSBwbG90IHRvIGhhdmUgNCByb3dzLgoKYGBge3IgZmFjZXRtb250aHJvdzQsIHdhcm5pbmc9RkFMU0UsIG1lc3NhZ2U9RkFMU0V9CmdncGxvdChkYXRhID0gd2VhdGhlciwKICAgICAgIG1hcHBpbmcgPSBhZXMoeCA9IHRlbXApKSArCiAgZ2VvbV9oaXN0b2dyYW0oYmlud2lkdGggPSA1LCBjb2xvciA9ICJ3aGl0ZSIpICsKICBmYWNldF93cmFwKH4gbW9udGgsIG5yb3cgPSA0KQpgYGAKCk5vdyB3ZSBzZWUgYSBiYXNpYyBoaXN0b2dyYW0gb2YgdGVtcHMgaW4gYSA0eDMgYXJyYW5nZW1lbnQsIHVzZWZ1bCBpZiB5b3UncmUgdGhlIHR5cGUgdGhhdCB0aGlua3MgaW4gcXVhcnRlcnMuCgojIyMgTGVhcm5pbmcgQ2hlY2sgMi4xOAoqV2hhdCBvdGhlciB0aGluZ3MgZG8geW91IG5vdGljZSBhYm91dCB0aGUgZmFjZXRlZCBwbG90IGFib3ZlPyBIb3cgZG9lcyBhIGZhY2V0ZWQgcGxvdCBoZWxwIHVzIHNlZSByZWxhdGlvbnNoaXBzIGJldHdlZW4gdHdvIHZhcmlhYmxlcz8qCgoqKkFuc3dlcjoqKgpUaGUgZmFjZXRlZCBwbG90IHNob3dzIHRoYXQgd2hpbGUgdGhlIG9yaWdpbmFsIGhpc3RvZ3JhbSB3YXMgc3ltbWV0cmljYWxseSBkaXN0cmlidXRlZCwgdGhlIHRlbXBlcmF0dXJlcyB2YXJ5IGZyb20gbW9udGggdG8gbW9udGguIE5vIG1vbnRoIHNlZXMgYm90aCBuZWFyIDDCsCBhbmQgbmVhciAxMDDCsCB3ZWF0aGVyLgoKIyMjIExlYXJuaW5nIENoZWNrIDIuMTkKKldoYXQgZG8gdGhlIG51bWJlcnMgMS0xMiBjb3JyZXNwb25kIHRvIGluIHRoZSBwbG90IGFib3ZlPyBXaGF0IGFib3V0IDI1LCA1MCwgNzUsIDEwMD8qCgoqKkFuc3dlcjoqKgpUaGUgbnVtYmVycyAxLTEyIGNvcnJlc3BvbmQgdG8gbW9udGhzIGFuZCAyNSwgNTAsIDc1LCAxMDAgY29ycmVzcG9uZCB0byB0ZW1wZXJhdHVyZS4KCiMjIyBMZWFybmluZyBDaGVjayAyLjIwCipGb3Igd2hpY2ggdHlwZXMgb2YgZGF0YSBzZXRzIHdvdWxkIHRoZXNlIHR5cGVzIG9mIGZhY2V0ZWQgcGxvdHMgbm90IHdvcmsgd2VsbCBpbiBjb21wYXJpbmcgcmVsYXRpb25zaGlwcyBiZXR3ZWVuIHZhcmlhYmxlcz8gR2l2ZSBhbiBleGFtcGxlIGRlc2NyaWJpbmcgdGhlIG5hdHVyZSBvZiB0aGVzZSB2YXJpYWJsZXMgYW5kIG90aGVyIGltcG9ydGFudCBjaGFyYWN0ZXJpc3RpY3MuKgoKKipBbnN3ZXI6KioKRmFjZXRzIHBsb3QgYSB2YXJpYWJsZSBicm9rZW4gdXAgYnkgYW5vdGhlciB2YXJpYWJsZS4gRm9yIHRlbXBlcmF0dXJlLCB3ZSBicm9rZSBpdCBkb3duIGJ5IG1vbnRoLiBgbnljZmxpZ2h0czEzYCBvbmx5IGhhcyB0ZW1wZXJhdHVyZSBkYXRhIGZvciB0aGUgeWVhciAyMDEzLCBzbyBpZiB3ZSB0cmllZCB0byBwbG90IHRoZSB0ZW1wZXJhdHVyZSBieSB5ZWFyLCB3ZSdkIGhhdmUgb25seSBvbmUgZmFjZXQuIFdlIHdvdWxkIG5lZWQgZGF0YSBmcm9tIG11bHRpcGxlIHllYXJzLiBDb252ZXJzZWx5LCBpdCB3b3VsZCBiZSBhIGxpdHRsZSByaWRpY3Vsb3VzIGBmYWNldF93cmFwYCBieSBkYXkgYmVjYXVzZSB3ZSB3b3VsZCBlbmQgdXAgd2l0aCAzNjUgcGxvdHMuCgojIyMgTGVhcm5pbmcgQ2hlY2sgMi4yMQoqRG9lcyB0aGUgYHRlbXBgIHZhcmlhYmxlIGluIHRoZSBgd2VhdGhlcmAgZGF0YSBzZXQgaGF2ZSBhIGxvdCBvZiB2YXJpYWJpbGl0eT8gV2h5IGRvIHlvdSBzYXkgdGhhdD8qCgoqKkFuc3dlcjoqKgpUaGF0IGRlcGVuZHMgb24gd2hhdCAiYSBsb3QiIG1lYW5zLiBGb3IgTmV3IFlvcmsgQ2l0eSwgaXQgc2VlbXMgcHJldHR5IHJlYXNvbmFibGUuIEZvciBLYWlsdWEsIEhhd2FpaSwgaXQgd291bGQgYmUuLi4gYSBsb3QuCgojIyMgUHJhY3RpY2UgMi43OiBCb3hwbG90cwpCb3hwbG90cyByZXF1aXJlIGEgY2F0ZWdvcmljYWwgdmFyaWFibGUgaW4gdGhlIHgtYXhpcy4gVGhleSBzaG93IHRoZSByYW5nZSBvZiBkYXRhIGluIHF1YXJ0aWxlcyB3aGVyZSB0aGUgY2VudGVyIGJvbGRlZCBsaW5lIGlzIHRoZSBtZWRpYW4sIHRoZSBhcmVhIGFib3ZlIHRoZSBtZWRpYW4gYW5kIHdpdGhpbiB0aGUgYm94IGlzIHRoZSB0aGlyZCBxdWFydGlsZSwgdGhlIGFyZWEgYmVsb3cgdGhlIG1lZGlhbiB3aXRoaW4gdGhlIGJveCBpcyB0aGUgc2Vjb25kIHF1YXJ0aWxlLCBhbmQgdGhlIHdoaXNrZXJzIG9uIGVpdGhlciBlbmQgcmVwcmVzZW50IHRoZSBmaXJzdCBhbmQgZm91cnRoIHF1YXJ0aWxlcy4gT2Ygbm90ZSwgdGhlIHdoaXNrZXJzIGRvIG5vdCBpbmNsdWRlIGRhdGEgcG9pbnRzIHRoYXQgYXJlIDEuNXggZ3JlYXRlciBvciBsZXNzIHRoYW4gdGhlIGludGVycXVhcnRpbGUgcmFuZ2UuIFRob3NlIHZhbHVlcyBhcmUgY29uc2lkZXJlZCBvdXRsaWVycy4KCmBgYHtyIGJveHBsb3QxLCB3YXJuaW5nPUZBTFNFLCBtZXNzYWdlPUZBTFNFfQpnZ3Bsb3QoZGF0YSA9IHdlYXRoZXIsCiAgICAgICBtYXBwaW5nID0gYWVzKHggPSBtb250aCwgeSA9IHRlbXApKSsKICBnZW9tX2JveHBsb3QoKQpgYGAKClRoZSBwbG90IGFib3ZlIGlzIG5vdCB2ZXJ5IGhlbHBmdWwgYmVjYXVzZSB0aGUgbW9udGhzIGFyZSBudW1lcmljYWwgaW5zdGVhZCBvZiBjYXRlZ29yaWNhbC4gQm94cGxvdHMgcmVxdWlyZSBjYXRlZ29yaWNhbCB2YXJpYWJsZXMgaW4gdGhlIHgtYXhpcy4KCmBgYHtyIGJveHBsb3RjYXRtb250aCwgd2FybmluZz1GQUxTRSwgbWVzc2FnZT1GQUxTRX0KZ2dwbG90KGRhdGEgPSB3ZWF0aGVyLCAKICAgICAgIG1hcHBpbmcgPSBhZXMoeCA9IGZhY3Rvcihtb250aCksIHkgPSB0ZW1wKSkgKwogIGdlb21fYm94cGxvdCgpCmBgYAoKSGVyZSB3ZSBhIGhhdmUgYm94IHBsb3Qgb2YgdGhlIHRlbXBlcmF0dXJlcyBieSBtb250aCB3aXRoIGRvdHMgaWRlbnRpZnlpbmcgdmFsdWVzIGNvbnNpZGVyZWQgb3V0bGllcnMuIE91dGxpZXJzIGluIHRoZXNlIGJveHBsb3RzIGFyZSB0aG9zZSB2YWx1ZXMgdGhhdCBhcmUgbW9yZSB0aGFuIDEuNXggZ3JlYXRlciB0aGFuIHRoZSBpbnRlcnF1YXJ0aWxlIHJhbmdlIChJUVIpLgoKIyMjIExlYXJuaW5nIENoZWNrIDIuMjIKKldoYXQgZG9lcyB0aGUgZG90IGF0IHRoZSBib3R0b20gb2YgdGhlIHBsb3QgZm9yIE1heSBjb3JyZXNwb25kIHRvPyBFeHBsYWluIHdoYXQgbWlnaHQgaGF2ZSBvY2N1cnJlZCBpbiBNYXkgdG8gcHJvZHVjZSB0aGlzIHBvaW50LioKCioqQW5zd2VyOioqClRoZSBkb3QgaXMgYW4gb3V0bGllciB2YWx1ZSBpbiB0aGUgbW9udGggb2YgTWF5LiBJdCBpcyByYXRoZXIgZXh0cmVtZSwgc28gbGV0J3Mgc2VlIGlmIHRoZSBzYW1lIHRlbXBlcmF0dXJlIHdhcyByZWNvcmRlZCBhdCBtdWx0aXBsZSBhaXJwb3J0cyBvciBpZiBwZXJoYXBzIHRoZXJlJ3MgYW4gZXJyb3IgaW4gdGhlIGRhdGEuCgpgYGB7ciBtYXl0ZW1wYW5vbSwgd2FybmluZz1GQUxTRSwgbWVzc2FnZT1GQUxTRX0Kd2VhdGhlciAlPiUgCiAgZmlsdGVyKG1vbnRoPT01ICYgdGVtcCA8IDI1KQpgYGAKSGVyZSB3ZSBzZWUgb25seSBvbmUgYWlycG9ydCBvbiBvbmUgZGF5IGF0IDEwcG0gcmVnaXN0ZXJlZCBhIHZlcnkgbG93IHRlbXBlcmF0dXJlLiBUaGlzIGxvb2tzIGxpa2UgYSBkYXRhIGVudHJ5IGVycm9yLiBKdXN0IHRvIGRvdWJsZSBjaGVjaywgbGV0J3MgbG9vayBhdCB0aGUgdGVtcGVyYXR1cmVzIGxlYWRpbmcgdXAgdG8gTWF5IDggYXQgMTBwbS4KYGBge3IgbWF5OHRlbXBhbm9tLCB3YXJuaW5nPUZBTFNFLCBtZXNzYWdlPUZBTFNFfQp3ZWF0aGVyICU+JSAKICBmaWx0ZXIobW9udGg9PTUgJiBkYXk9PTggJiBob3VyID4xOCkgJT4lIAogIGFycmFuZ2UoaG91cikKYGBgCkhlcmUgd2Ugc2VlIHRoYXQgZXZlcnkgcm93LCBhc2lkICBpcyBzaG93aW5nIGEgdGVtcGVyYXR1cmUgcmFuZ2Ugb2YgYWJvdXQgNTAtNjHCsC4gUm93IDExIGRlZmluaXRlbHkgbG9va3MgbGlrZSBhbiBlcnJvci4KCiMjIyBMZWFybmluZyBDaGVjayAyLjIzCipXaGljaCBtb250aHMgaGF2ZSB0aGUgaGlnaGVzdCB2YXJpYWJpbGl0eSBpbiB0ZW1wZXJhdHVyZT8gV2hhdCByZWFzb25zIGNhbiB5b3UgZ2l2ZSBmb3IgdGhpcz8qCgoqKkFuc3dlcjoqKgpJdCBsb29rcyBsaWtlIE5vdmVtYmVyIGhhZCB0aGUgbW9zdCB2YXJpYWJpbGl0eSBidXQgZGVjZW1iZXIgYW5kIEphbnVhcnkgYXJlIGNsb3NlLiBCZWxvdyBpcyBhIHBsb3Qgb2YgdGhlIElRUnM6CmBgYHtyIGlxcnRlbXBzLCB3YXJuaW5nPUZBTFNFLCBtZXNzYWdlPUZBTFNFfQp3ZWF0aGVyICU+JSAKICBncm91cF9ieShtb250aCkgJT4lIAogIHN1bW1hcml6ZShJUVIgPSBJUVIodGVtcCwgbmEucm09VFJVRSkpICU+JSAKICBhcnJhbmdlKGRlc2MoSVFSKSkKYGBgCkl0IGxvb2tzIGxpa2UgTm92ZW1iZXIsIERlY2VtYmVyLCBKYW51YXJ5LCBhbmQgU2VwdGVtYmVyIHdlcmUgdGhlIG1vc3QgdmFyaWFibGUuCgojIyMgTGVhcm5pbmcgQ2hlY2sgMi4yNAoqV2UgbG9va2VkIGF0IHRoZSBkaXN0cmlidXRpb24gb2YgdGhlIG51bWVyaWNhbCB2YXJpYWJsZSBgdGVtcGAgc3BsaXQgYnkgdGhlIG51bWVyaWNhbCB2YXJpYWJsZSBgbW9udGhgIHRoYXQgd2UgY29udmVydGVkIHRvIGEgY2F0ZWdvcmljYWwgdmFyaWFibGUgdXNpbmcgdGhlIGBmYWN0b3IoKWAgZnVuY3Rpb24uIFdoeSB3b3VsZCBhIGJveHBsb3Qgb2YgYHRlbXBgIHNwbGl0IGJ5IHRoZSBudW1lcmljYWwgdmFyaWFibGUgYHByZXNzdXJlYCBzaW1pbGFybHkgY29udmVydGVkIHRvIGEgY2F0ZWdvcmljYWwgdmFyaWFibGUgdXNpbmcgdGhlIGBmYWN0b3IoKWAgbm90IGJlIGluZm9ybWF0aXZlPyoKCioqQW5zd2VyOioqCkJlY2F1c2UgdGhlcmUgYXJlIG9ubHkgMTIgbW9udGhzIHdoZXJlYXMgdGhlcmUgYXJlIHNpZ25pZmljYW50bHkgbW9yZSB2YWx1ZXMgZm9yIGBwcmVzc3VyZWAuCgojIyMgTGVhcm5pbmcgQ2hlY2sgMi4yNQoqQm94cGxvdHMgcHJvdmlkZSBhIHNpbXBsZSB3YXkgdG8gaWRlbnRpZnkgb3V0bGllcnMuIFdoeSBtYXkgb3V0bGllcnMgYmUgZWFzaWVyIHRvIGlkZW50aWZ5IHdoZW4gbG9va2luZyBhdCBhIGJveHBsb3QgaW5zdGVhZCBvZiBhIGZhY2V0ZWQgaGlzdG9ncmFtPyoKCioqQW5zd2VyOioqCkJlY2F1c2UgaGlzdG9ncmFtcyBoYXZlIGJpbnMgdG8gZ3JvdXAgdmFsdWVzIHRvZ2V0aGVyIHdoZXJlYXMgYm94cGxvdHMgY2xlYXJseSBsYWJlbGVkIG91dGxpZXJzLgoKIyMjIFByYWN0aWNlIDIuODogQmFycGxvdHMKQmFycGxvdHMgYXJlIHVzZWZ1bCBmb3IgY2F0ZWdvcmljYWwgdmFyaWFibGVzIHdoaWxlIGhpc3RvZ3JhbXMgYW5kIGJveHBsb3RzIGFyZSBmb3IgbnVtZXJpY2FsIHZhcmlhYmxlcy4gRm9yIGV4YW1wbGUsIGxldCdzIGNyZWF0ZSBhbm90aGVyIGRhdGEgZnJhbWUuCmBgYHtyIGJhcnBsb3QxLCB3YXJuaW5nPUZBTFNFLCBtZXNzYWdlPUZBTFNFfQpkb2dzIDwtIHRpYmJsZSgKICBkb2cgPSBjKCJjb3JnaSIsICJjb3JnaSIsICJsYWIiLCAiY29yZ2kiLCAibGFiIikpCmRvZ3NfY291bnRlZCA8LSB0aWJibGUoCiAgZG9nID0gYygiY29yZ2kiLCAibGFiIiksCiAgbnVtYmVyID0gYygzLCAyKQopCmRvZ3MKZG9nc19jb3VudGVkCmBgYApBYm92ZSB0aGVyZSBhcmUgdHdvIHRpYmJsZXMsIG9uZSB0aGF0IGxpc3RzIGRvZ3MgYW5kIHRoZSBvdGhlciB0aGF0IHNob3dzIHRoZSBjb3VudGVkIHZhbHVlcy4gRGVwZW5kaW5nIG9uIGhvdyBkYXRhIGFyZSBzYXZlZCwgdGhlcmUgYXJlIHR3byBkaWZmZXJlbnQgd2F5cyBvZiBjcmVhdGluZyBhIGJhcnBsb3QuIAoKVG8gY3JlYXRlIGEgYmFycGxvdCB3aXRob3V0IGEgY291bnRlZCB2YXJpYWJsZToKYGBge3IgYmFycGxvdDIsIHdhcm5pbmc9RkFMU0UsIG1lc3NhZ2U9RkFMU0V9CmdncGxvdChkYXRhID0gZG9ncywKICAgICAgIG1hcHBpbmcgPSBhZXMgKHggPSBkb2cpKSArCiAgZ2VvbV9iYXIoKQpgYGAKClRvIGNyZWF0ZSBhIGJhcnBsb3Qgd2l0aCBhIGNvdW50ZWQgdmFyaWFibGU6CmBgYHtyIGJhcnBsb3QzLCB3YXJuaW5nPUZBTFNFLCBtZXNzYWdlPUZBTFNFfQpnZ3Bsb3QoZGF0YSA9IGRvZ3NfY291bnRlZCwKICAgICAgIG1hcHBpbmcgPSBhZXMoeCA9IGRvZywgeSA9IG51bWJlcikpICsKICBnZW9tX2NvbCgpCmBgYAoKQm90aCBwbG90cyBsb29rIHRoZSBzYW1lIGJ1dCB0aGUgY29kaW5nIG5lZWRlZCB0byBjcmVhdGUgdGhlbSBpcyBkaWZmZXJlbnQgYmVjYXVzZSBvZiBob3cgdGhlIGRhdGEgd2FzIGVudGVyZWQgKGNvdW50ZWQgb3Igbm90KS4KCk5vdyB3ZSBjYW4gdHJ5IHdpdGggdGhlIGBueWNmbGlnaHRzMTNgIGRhdGEuIExldCdzIGNyZWF0ZSBiYXJwbG90IHdpdGggYGNhcnJpZXJgLiBUaGUgZGF0YSBpbiB0aGUgYGNhcnJpZXJgIGNvbHVtbiBpcyBub3QgY291bnRlZCwgdGhhdCBpcyB0byBzYXkgdGhlcmUgaXMgYSBjYXRlZ29yaWNhbCBlbnRyeSBmb3IgZWFjaCByb3cgdW5kZXIgYGNhcnJpZXJgIHN1Y2ggYXMgYERMYCBmb3IgRGVsdGEgQWlybGluZXMuCmBgYHtyIGJhcnBsb3QgNCwgd2FybmluZz1GQUxTRSwgbWVzc2FnZT1GQUxTRX0KZ2dwbG90KGRhdGEgPSBmbGlnaHRzLAogICAgICAgbWFwcGluZyA9IGFlcyh4ID0gY2FycmllcikpICsKICBnZW9tX2JhcigpCmBgYAoKSGVyZSB3ZSBjYW4gc2VlIHRoYXQgYFVBYCBvciBVbml0ZWQgQWlybGluZXMgaGFzIHRoZSBoaWdoZXN0IG51bWJlciBvZiBmbGlnaHRzIG91dCBvZiBOWUMuCgojIyMgTGVhcm5pbmcgQ2hlY2sgMi4yNgoqV2h5IGFyZSBoaXN0b2dyYW1zIGluYXBwcm9wcmlhdGUgZm9yIHZpc3VhbGl6aW5nIGNhdGVnb3JpY2FsIHZhcmlhYmxlcz8qCgoqKkFuc3dlcjoqKgpCZWNhdXNlIGhpc3RvZ3JhbXMgYXJlIGZvciBudW1lcmljYWwgdmFyaWFibGVzLCBub3QgY2F0ZWdvcmljYWwgdmFyaWFibGVzLgoKIyMjIExlYXJuaW5nIENoZWNrIDIuMjcKKldoYXQgaXMgdGhlIGRpZmZlcmVuY2UgYmV0d2VlbiBoaXN0b2dyYW1zIGFuZCBiYXJwbG90cz8qCgoqKkFuc3dlcjoqKgpCYXJwbG90cyBhcmUgZm9yIGNhdGVnb3JpY2FsIHZhcmlhYmxlcyB3aGlsZSBoaXN0b2dyYW1zIGFyZSBmb3IgbnVtZXJpY2FsIHZhcmlhYmxlcwoKIyMjIExlYXJuaW5nIENoZWNrIDIuMjgKKkhvdyBtYW55IEVudm95IEFpciBmbGlnaHRzIGRlcGFydGVkIE5ZQyBpbiAyMDEzKgoKKipBbnN3ZXI6KioKQmVsb3cgd2Ugc2VlIHRoYXQgdGhlcmUgYXJlIDI2LDM5NyBFbnZveSBBaXIgZmxpZ2h0cyBkZXBhcnRpbmcgTllDIGluIDIwMTMuCmBgYHtyIGVudm95YWlyY291bnQsIHdhcm5pbmc9RkFMU0UsIG1lc3NhZ2U9RkFMU0V9CmVudm95X2ZsaWdodHMgPC0gZmxpZ2h0cyAlPiUgCiAgZmlsdGVyIChjYXJyaWVyID09ICJNUSIpCmdsaW1wc2UoZW52b3lfZmxpZ2h0cykKYGBgCgoKIyMjIExlYXJuaW5nIENoZWNrIDIuMjkKKldoYXQgd2FzIHRoZSBzZXZlbnRoIGhpZ2hlc3QgYWlybGluZSBpbiB0ZXJtcyBvZiBkZXBhcnRlZCBmbGlnaHRzIGZyb20gTllDIGluIDIwMTM/IEhvdyBjb3VsZCB3ZSBiZXR0ZXIgcHJlc2VudCB0aGUgdGFibGUgdG8gZ2V0IHRoaXMgYW5zd2VyIHF1aWNrbHk/KgoKKipBbnN3ZXI6KioKTG9va2luZyBhdCB0aGUgYmFycGxvdCBhYm92ZSwgaXQgYXBwZWFycyB0aGF0IFVTIEFpcndheXMgaGFkIHRoZSBzZXZlbnRoIG1vc3QgZmxpZ2h0cy4gQ3JlYXRpbmcgYSBuZXcgdGliYmxlIHRvIHNob3cgYWlybGluZXMgYnkgY291bnQgd291bGQgYmUgaGVscGZ1bC4KCiMjIyBMZWFybmluZyBDaGVjayAyLjMwCipXaHkgc2hvdWxkIHBpZSBjaGFydHMgYmUgYXZvaWRlZCBhbmQgcmVwbGFjZWQgYnkgYmFycGxvdHM/KgoKKipBbnN3ZXI6KioKQmVjYXVzZSB0aGV5IGFyZSBkaWZmaWN1bHQgdG8gcmVhZCwgZXNwZWNpYWxseSB3aGVuIHRoZXJlIGFyZSBtb3JlIHRoYW4gMiBvciB0aHJlZSB2YXJpYWJsZXMKCiMjIyBMZWFybmluZyBDaGVjayAyLjMxCipXaHkgZG8geW91IHRoaW5rIHBlb3BsZSBjb250aW51ZSB0byB1c2UgcGllIGNoYXJ0cz8qCgoqKkFuc3dlcjoqKgpCZWNhdXNlIHRoZXkndmUgbmV2ZXIgaGFkIHRvIG1ha2UgYW4gaW1wb3J0YW50IGRlY2lzaW9uIGJhc2VkIG9mZiBvbmUuCgojIyMgUHJhY3RpY2UgMi44LjM6IFN0YWNrZWQgQmFycGxvdHMKQmFycGxvdHMgY2FuIGhhdmUgbW9yZSB0aGFuIG9uZSBjYXRlZ29yaWNhbCB2YXJpYWJsZS4gRm9yIGV4YW1wbGUsIGxldCdzIGNyZWF0ZSBhIGJhcnBsb3QgZm9yIHRoZSBudW1iZXIgb2YgZmxpZ2h0cyBieSBgY2FycmllcmAgYW5kIGBvcmlnaW5gLgpgYGB7ciBiYXJwbG90Y2Fyb3JpLCB3YXJuaW5nPUZBTFNFLCBtZXNzYWdlPUZBTFNFfQpnZ3Bsb3QoZGF0YSA9IGZsaWdodHMsCiAgICAgICBtYXBwaW5nID0gYWVzKHggPSBjYXJyaWVyLCBmaWxsID0gb3JpZ2luKSkgKwogIGdlb21fYmFyKCkKYGBgCgoKVGhpcyBwbG90IHNob3dzIHRoZSBjb3VudCBvZiBmbGlnaHRzIGJ5IGNhcnJpZXIgYW5kIGZpbGxlZCBpbiB3aXRoIHRocmVlIGRpZmZlcmVudCBjb2xvcnMgYWNjb3JkaW5nIHRvIHRoZSBvcmlnaW4gb2YgdGhlIGZsaWdodC4gVGhpcyBpcyBhIHN0YWNrZWQgYmFycGxvdC4gVGhpcyBpc24ndCB0aGUgbW9zdCBpZGVhbCBwbG90IGJlY2F1c2UgaXQgaXMgZGlmZmljdWx0IHRvIGNvbXBhcmUgdGhlIHN0YWNrcyBiYXNlZCBvbiBvcmlnaW4gdW5sZXNzIHRoZXJlIGFyZSBzaWduaWZpY2FudCBkaWZmZXJlbmNlcy4gVGhpcyBwbG90IHN1ZmZlcnMgZnJvbSBhIHNpbWlsYXIgaXNzdWUgYXMgYSBwaWUgY2hhcnQsIHRob3VnaCB0aGlzIGlzIGRlZmluaXRlbHkgYW4gaW1wcm92ZW1lbnQuCgojIyMgTGVhcm5pbmcgQ2hlY2sgMi4zMgoqV2hhdCBraW5kcyBvZiBxdWVzdGlvbnMgYXJlIG5vdCBlYXNpbHkgYW5zd2VyZWQgYnkgbG9va2luZyBhdCB0aGUgYWJvdmUgZmlndXJlPyoKCioqQW5zd2VyOioqClRoZSBzdGFja2VkIGJhcnBsb3QgaXNuJ3QgdXNlZnVsIGZvciB0ZWxsaW5nIHVzIGV4YWN0bHkgaG93IG1hbnkgZmxpZ2h0cyB3ZXJlIHdpdGggd2hpY2ggY2FycmllciBvciB3aGljaCBvcmlnaW4uIElmIHRoZXJlIHdlcmUgb25seSB0d28gYWlycG9ydHMgb2Ygb3JpZ2luLCBpdCBtaWdodCBiZSBhIGxpdHRsZSBlYXNpZXIgdG8gY29tcGFyZSB1c2luZyB0aGlzIGtpbmQgb2YgcGxvdC4KCiMjIyBMZWFybmluZyBDaGVjayAyLjMzCipXaGF0IGNhbiB5b3Ugc2F5LCBpZiBhbnl0aGluZywgYWJvdXQgdGhlIHJlbGF0aW9uc2hpcCBiZXR3ZWVuIGFpcmxpbmUgYW5kIGFpcnBvcnQgaW4gTllDIGluIDIwMTMgaW4gcmVnYXJkcyB0byB0aGUgbnVtYmVyIG9mIGRlcGFydGluZyBmbGlnaHRzPyoKCioqQW5zd2VyOioqCldlIG1pZ2h0IGJlIGFibGUgdG8gZ3Vlc3Mgd2hpY2ggYWlycG9ydHMgYXJlIGEgaHViIGZvciB3aGljaCBhaXJsaW5lcy4gRm9yIGV4YW1wbGUsIGl0IGlzIGxpa2VseSB0aGF0IE5ld2FyaywgYEVXUmAsIGlzIGEgaHViIGZvciBVbml0ZWQgQWlybGluZXMsIGBVQWAuCgojIyMgUHJhY3RpY2UgMi44LjQ6IERvZGdlZCBCYXJwbG90cwpTdGFja2VkIGJhcnBsb3RzIGNhbiBhbHNvIGJlIGJyb2tlbiBkb3duIHNvIHRoYXQgdGhleSBhcmUgc2lkZS1ieS1zaWRlLCBhbHNvIGNhbGxlZCBkb2RnZWQgYmFycGxvdHMuIEZvciBleGFtcGxlOgoKYGBge3IgZG9kZ2VkYnAsIHdhcm5pbmc9RkFMU0UsIG1lc3NhZ2U9RkFMU0V9CmdncGxvdChkYXRhID0gZmxpZ2h0cywKICAgICAgIG1hcHBpbmcgPSBhZXMoeCA9IGNhcnJpZXIsIGZpbGwgPSBvcmlnaW4pKSArCiAgZ2VvbV9iYXIocG9zaXRpb24gPSAiZG9kZ2UiKQpgYGAKClRoaXMgcGxvdCBoYXMgYWxsIHRoZSBiYXJzIHN0YXJ0aW5nIGF0IDAsIG1ha2luZyBpdCBlYXNpZXIgZm9yIHVzIHRvIGNvbXBhcmUgdGhlIG51bWJlciBvZiBmbGlnaHRzIGJ5IGNhcnJpZXIgYW5kIG9yaWdpbi4gTG9va2luZyBhdCBEZWx0YSBBaXJsaW5lcywgYERMYCwgaXQgbG9va3MgbGlrZSB0aGV5IHVzZSBib3RoIEpGSyBhbmQgTGFHdWFyZGlhIGFzIGh1YnMuCgojIyMgTGVhcm5pbmcgQ2hlY2sgMi4zNAoqV2h5IG1pZ2h0IHRoZSBzaWRlLWJ5LXNpZGUgKEFLQSBkb2RnZWQpIGJhcnBsb3QgYmUgcHJlZmVyYWJsZSB0byBhIHN0YWNrZWQgYmFycGxvdCBpbiB0aGlzIGNhc2U/KgoKKipBbnN3ZXI6KioKSW4gdGhpcyBjYXNlLCBpdCBpcyBlYXNpZXIgdG8gY29tcGFyZSBkaWZmZXJlbmNlcyBpbiBjYXJyaWVyIGFuZCBvcmlnaW4gY291bnRzIHdpdGggYSBkb2RnZWQgYmFycGxvdCBiZWNhdXNlIHNvbWUgb2YgdGhlIGNvdW50cyBhcmUgdmVyeSBzaW1pbGFyIHRvIG9uZSBhbm90aGVyIGFuZCB0aGVyZSBhcmUgbWFueSBjYXJyaWVycy4KCiMjIyBMZWFybmluZyBDaGVjayAyLjM1CipXaGF0IGFyZSB0aGUgZGlzYWR2YW50YWdlcyBvZiB1c2luZyBhIHNpZGUtYnktc2lkZSAoQUtBIGRvZGdlZCkgYmFycGxvdCwgaW4gZ2VuZXJhbD8qCgoqKkFuc3dlcjoqKgpUaGVyZSdzIGEgbG90IHRvIGxvb2sgYXQgaW4gdGhpcyB0eXBlIG9mIHBsb3Qgd2l0aCB0aGUgZGF0YSB3ZSdyZSB1c2luZyBmb3IgaXQuIFdlIHN0aWxsIGNhbid0IHNlZSB0aGUgYWN0dWFsIGNvdW50cyBmb3IgZWFjaCBvcmlnaW4gYnkgY2Fycmllci4KCiMjIyBQcmFjdGljZSAyLjguNTogRmFjZXRlZCBCYXJwbG90cwpBbm90aGVyIHZhcmlhdGlvbiBvbiB0aGUgYmFycGxvdCBpcyBhIGZhY2V0ZWQgYmFycGxvdC4gSGVyZSB3ZSBjYW4gc3BsaXQgb2ZmIHRoZSBiYXJwbG90IGludG8gdGhyZWUgZGlmZmVyZW50IHBsb3RzIGJ5IG9yaWdpbi4KYGBge3IgZmFjYmFycGxvdCwgd2FybmluZz1GQUxTRSwgbWVzc2FnZT1GQUxTRX0KZ2dwbG90KGRhdGEgPSBmbGlnaHRzLAogICAgICAgbWFwcGluZyA9IGFlcyh4ID0gY2FycmllcikpICsKICBnZW9tX2JhcigpICsKICBmYWNldF93cmFwKH4gb3JpZ2luLCBuY29sID0gMSkKYGBgCgpIZXJlIEkndmUgcmVtb3ZlZCB0aGUgYG1hcHBpbmdgIG9mIGBvcmlnaW5gIGFuZCBhZGRlZCBhIGBmYWNldF93cmFwYCB3aXRoIGB+IG9yaWdpbmAuIEkndmUgYWxzbyBpbmNsdWRlZCBhIGBuY29sID0gMWAgc28gdGhhdCBhbGwgdGhyZWUgb3JpZ2lucyBhcmVuJ3Qgb24gb25lIHJvdy4gSXQgY291bGQgYWxzbyBiZSB3cml0dGVuIGBucm93ID0gM2Agc2luY2UgSSBrbm93IGhvdyBtYW55IG9yaWdpbnMgdGhlcmUgYXJlLgoKIyMjIExlYXJuaW5nIENoZWNrIDIuMzUKKldoeSBpcyB0aGUgZmFjZXRlZCBiYXJwbG90IHByZWZlcnJlZCB0byB0aGUgc2lkZS1ieS1zaWRlIGFuZCBzdGFja2VkIGJhcnBsb3RzIGluIHRoaXMgY2FzZT8qCgoqKkFuc3dlcjoqKgpXZWxsLCBpdCBkZXBlbmRzIG9uIHdoYXQgcXVlc3Rpb24ocykgeW91J3JlIHRyeWluZyB0byBhbnN3ZXIsIGJ1dCBoZXJlIHRoZXJlIGlzIGEgYml0IG1vcmUgdmlzdWFsIHNwYWNlIGJldHdlZW4gZWFjaCBjYXJyaWVyLgoKIyMjIExlYXJuaW5nIENoZWNrIDIuMzYKKldoYXQgaW5mb3JtYXRpb24gYWJvdXQgdGhlIGRpZmZlcmVudCBjYXJyaWVycyBhdCBkaWZmZXJlbnQgYWlycG9ydHMgaXMgbW9yZSBlYXNpbHkgc2VlbiBpbiB0aGUgZmFjZXRlZCBiYXJwbG90PyoKCioqQW5zd2VyOioqCldlIGNhbiBzZWUgd2hpY2ggY2FycmllcnMgcHJlZmVyIHdoaWNoIGFpcnBvcnRzLiBBZ2FpbiwgRGVsdGEgaXMgcHJldHR5IGV2ZW5seSBzcGxpdCBiZXR3ZWVuIEpGSyBhbmQgTEdBLgoKIyMgQ2hhcHRlciAzOiBEYXRhIFdyYW5nbGluZwpUaGlzIGNoYXB0ZXIgaXMgYWJvdXQgdGFraW5nIGV4aXN0aW5nIGRhdGEgYW5kIGxlYXJuaW5nIHRvIHRyYW5zZm9ybSBpdCB2aWEgYGZpbHRlcigpYCwgYHN1bW1hcml6ZSgpYCwgYGdyb3VwX2J5KClgLCBgbXV0YXRlKClgLCBgYXJyYW5nZSgpYCwgYW5kIGBqb2luKClgLiBUaGUgcGlwZSBvcGVyYXRvciBgJT4lYCBhbGxvd3MgZm9yIG11bHRpcGxlIGZ1bmN0aW9ucyB0byBiZSB1c2VkIHNlcXVlbnRpYWxseS4KCiMjIyBQcmFjdGljZSAzLjE6IFRoZSBwaXBlIG9wZXJhdG9yOiBgICU+JSBgClRoZSBwaXBlIG9wZXJhdG9yIGAgJT4lIGAgaXMgYSB0b29sIGluIHRoZSBgZHBseXJgIHBhY2thZ2UuIEl0IGFsbG93cyBmb3IgZnVuY3Rpb25zIHRvIGJlIG5lc3RlZCBgYyhiKGEoeCkpKWAuIFRob3VnaCBpdCBsb29rcyBiYWNrd2FyZHMsIGl0IHdvdWxkIGJlIGxpa2UgdGFraW5nIGRhdGEgZnJhbWUgYHhgLCB1c2luZyBpdCBpbiBmdW5jdGlvbiBgYSgpYCB3aGljaCB3b3VsZCBiZSBgYSh4KWAsIHRha2luZyB0aGF0IG91dHB1dCBgYSh4KWAgYW5kIHVzaW5nIGl0IGluIGZ1bmN0aW9uIGBiKClgIHdoaWNoIHdvdWxkIGJlIGBiKGEoeCkpYCwgYW5kIHNvIG9uLgoKVGhlIGAgJT4lIGAgaXMgdXNlZCBpbiBuZXN0ZWQgY29kZSB0byBtYWtlIGl0IGVhc2llciB0byByZWFkLiBJdCB3b3VsZCBsb29rIGxpa2U6CmBgYHtyIHBpcGUsIHdhcm5pbmc9RkFMU0UsIG1lc3NhZ2U9RkFMU0UsIGV2YWw9RkFMU0V9CnggJT4lIAogIGEoKSAlPiUgCiAgYigpICU+JSAKICBjKCkKYGBgCgpPZnRlbiB0aW1lcyBpdCBpcyBoZWxwZnVsIHRvIHJlYWQgYCAlPiUgYCBhcyAidGhlbiIuIFRoaXMgaXMgc2ltaWxhciB0byBpbiBgZ2dwbG90KClgIHVzaW5nIHRoZSBgK2Agc3ltYm9sIHRvIGFkZCBhIGNoYWluIG9mIGFjdGlvbnMuIFdpdGggYCAlPiUgYCB3ZSBjYW4gY2hhaW4gdHdvIHBpZWNlcyBvZiBjb2RlIHRvZ2V0aGVyLgoKRm9yIGV4YW1wbGUsIGlmIEkgd2FudGVkIHRvIGNyZWF0ZSBhIG5ldyBkYXRhIGZyYW1lIG5hbWVkIGBhbGFza2FfZmxpZ2h0c2AgdGhlIGNvZGUgd291bGQgYmUgYGFsYXNrYV9mbGlnaHRzIDwtIGZsaWdodHNgLiBUaGlzIGNvZGUgaXMgdGVsbGluZyBSIHRvIHRha2UgdGhlIGRhdGEgZnJhbWUgYGZsaWdodHNgIGFuZCBjcmVhdGUgYSBuZXcgZGF0YSBmcmFtZSBuYW1lZCBgYWxhc2thX2ZsaWdodHNgLiBOZXh0LCBJIHdhbnQgdG8gYGZpbHRlcmAgdGhlIGRhdGEgZnJhbWUgYGZsaWdodHNgIGJ5IGNhcnJpZXIgYEFTYC4gVGhpcyBjb2RlIHdvdWxkIGJlIGBmaWx0ZXIoY2FycmllciA9PSAiQVMiKWAuIFB1dCBhbGwgdG9nZXRoZXIsIGl0IHdvdWxkIGJlOgpgYGB7ciBwaXBlaW50cm8xfQphbGFza2FfZmxpZ2h0cyA8LSBmbGlnaHRzICU+JSAKICBmaWx0ZXIoY2FycmllciA9PSAiQVMiKQphc190aWJibGUoYWxhc2thX2ZsaWdodHMpCmBgYAoKIyMjIFByYWN0aWNlIDMuMjogYGZpbHRlcmAgcm93cwpUaGUgYGZpbHRlcigpYCBmdW5jdGlvbiBpcyBwcmV0dHkgc3RyYWlnaHRmb3J3YXJkLCBpdCB3aWxsIHNlbGVjdCBvbmx5IHRoZSByb3dzIHRoYXQgZml0IHlvdXIgcGFyYW1ldGVycy4gVGhpcyBtZWFucyBpdCBpcyBvZnRlbiBiZXN0IHRvIHN0YXJ0IHdpdGggYGZpbHRlcigpYCBiZWZvcmUgbW92aW5nIG9uIHRvIG90aGVyIGZ1bmN0aW9ucyBiZWNhdXNlIGl0IG5hcnJvd3MgZG93biB0aGUgbnVtYmVyIG9mIG9ic2VydmF0aW9ucyBmb3IgdGhlIGZ1bmN0aW9ucyB0aGF0IGZvbGxvdyBhZnRlciBpdC4gT25lIHRoaW5nIHRvIG5vdGUgaXMgdGhlIGRvdWJsZSBgPT1gIGhlcmUuIE90aGVyIG9wZXJhdGlvbnMgYXJlOgoKKiBgPmAgZ3JlYXRlciB0aGFuIAoqIGA8YCBsZXNzIHRoYW4gCiogYD49YCBncmVhdGVyIHRoYW4gb3IgZXF1YWwgdG8KKiBgPD1gIGxlc3MgdGhhbiBvciBlcXVhbCB0bwoqIGAhPWAgbm90IGVxdWFsIHRvCgpZb3UgY2FuIGFsc28gYWRkIHRoZSBmb2xsb3dpbmc6CgoqIGB8YCBvcgoqIGAmYCBhbmQKCkZvciBleGFtcGxlLCB0aGlzIGlzIGhvdyB0byBmaWx0ZXIgYGZsaWdodHNgIGZvciBhbGwgcm93cyB0aGF0IGRlcGFydGVkIGZyb20gSkZLLCB3ZXJlIGhlYWRlZCB0byBCdXJsaW5ndG9uLCBWZXJtb250IG9yIFNlYXR0bGUsIFdhc2hpbmd0b24gYW5kIGRlcGFydGVkIGluIHRoZSBtb250aHMgb2YgT2N0b2JlciwgTm92ZW1iZXIsIG9yIERlY2VtYmVyOgpgYGB7ciBmaWx0ZXIxfQpidHZfc2VhX2ZsaWdodHNfZmFsbCA8LSBmbGlnaHRzICU+JSAKICBmaWx0ZXIob3JpZ2luID09ICJKRksiICYgCiAgICAgICAgICAgKGRlc3QgPT0gIkJUViIgfCBkZXN0ID09ICJTRUEiKSAmCiAgICAgICAgICAgbW9udGggPj0gMTApCmFzX3RpYmJsZShidHZfc2VhX2ZsaWdodHNfZmFsbCkKYGBgCgpPciB3ZSBjYW4gbG9vayBhdCBmbGlnaHRzIHRoYXQgd2VyZSBub3QgZ29pbmcgdG8gQnVybGluZ3RvbiBvciBTZWF0dGxlIHdpdGg6CmBgYHtyIGZpbHRlcjJ9Cm5vdF9idHZfc2VhIDwtIGZsaWdodHMgJT4lIAogIGZpbHRlcighKGRlc3QgPT0gIkJUViIgfCBkZXN0ID09ICJTRUEiKSkKYXNfdGliYmxlKG5vdF9idHZfc2VhKQpgYGAKCklmIHdlIGhhdmUgbWFueSBhaXJwb3J0cywgd2UgY2FuIHVzZSB0aGUgYCVpbiVgIG9wZXJhdG9yOgpgYGB7ciBmaWx0ZXIzfQptYW55X2FpcnBvcnRzIDwtIGZsaWdodHMgJT4lIAogIGZpbHRlcihkZXN0ICVpbiUgYygiQlRWIiwgIlNFQSIsICJQRFgiLCAiU0ZPIiwgIkJETCIpKQphc190aWJibGUobWFueV9haXJwb3J0cykKYGBgCgojIyMgTGVhcm5pbmcgQ2hlY2sgMy4xCipXaGF04oCZcyBhbm90aGVyIHdheSBvZiB1c2luZyB0aGUg4oCcbm904oCdIG9wZXJhdG9yIGAhYCB0byBmaWx0ZXIgb25seSB0aGUgcm93cyB0aGF0IGFyZSBub3QgZ29pbmcgdG8gQnVybGluZ3RvbiBWVCBub3IgU2VhdHRsZSBXQSBpbiB0aGUgYGZsaWdodHNgIGRhdGEgZnJhbWU/IFRlc3QgdGhpcyBvdXQgdXNpbmcgdGhlIGNvZGUgYWJvdmUqCgoqKkFuc3dlcjoqKgpUaGUgb3JpZ2luYWwgd2FzIGBmaWx0ZXIoIShkZXN0ID09ICJCVFYiIHwgZGVzdCA9PSAiU0VBIikpYCB3aGljaCBjb3VsZCBiZSByZWFkIGFzICJub3QoQlRWIG9yIFNFQSkiLiBBbiBhbHRlcm5hdGl2ZSBjb3VsZCBiZSBgZmlsdGVyKCFkZXN0ID09ICJCVFYiICYgIWRlc3QgPT0gIlNFQSIpYCB3aGljaCB3b3VsZCByZWFkIGFzICJub3QgQlRWIGFuZCBub3QgU0VBIi4gYCE9YCBvciAibm90IGVxdWFsIHRvIiBjb3VsZCBhbHNvIGJlIHVzZWQsIGZvciBleGFtcGxlIGBmaWx0ZXIoZGVzdCAhPSAiQlRWIiAmIGRlc3QgIT0gIlNFQSIpYC4KCiMjIyBQcmFjdGljZSAzLjM6IGBzdW1tYXJpemVgIHZhcmlhYmxlcwpUaGUgYHN1bW1hcml6ZSgpYCBmdW5jdGlvbiBzaG93cyB0aGUgc3VtbWFyeSBzdGF0aXN0aWNzIGZvciBhIHZhcmlhYmxlLiBJdCBjYW4gc2hvdyBzZXZlcmFsIHN1bW1hcnkgc3RhdGlzdGljIHZhbHVlcyBzdWNoIGFzOgoKKiBgbWVhbigpYDogbWVhbiBvciBhdmVyYWdlCiogYHNkKClgOiB0aGUgc3RhbmRhcmQgZGV2aWF0aW9uCiogYG1pbigpYCBhbmQgYG1heCgpYAoqIGBJUVJgIEludGVycXVhcnRpbGUgcmFuZ2UKKiBgc3VtKClgOiB0aGUgc3VtCiogYG4oKWA6IGNvdW50IG9mIHRoZSBudW1iZXIgb2Ygcm93cyBpbiBlYWNoIGdyb3VwCgpGb3IgZXhhbXBsZSwgbGV0J3MgY2FsY3VsYXRlIHRoZSBtZWFuIGFuZCBzdGFuZGFyZCBkZXZpYXRpb24gb2YgdGhlIHZhcmlhYmxlIGB0ZW1wYCBpbiB0aGUgYHdlYXRoZXJgIGRhdGEgZnJhbWUuIApgYGB7ciBzdW1tMX0Kc3VtbWFyeV90ZW1wIDwtIHdlYXRoZXIgJT4lIAogIHN1bW1hcml6ZShtZWFuID0gbWVhbih0ZW1wKSwgCiAgICAgICAgICAgIHN0ZF9kZXYgPSBzZCh0ZW1wKSkKc3VtbWFyeV90ZW1wCmBgYApIZXJlIHdlIHNlZSB0aGF0IFIgd2lsbCByZXR1cm4gYE5BYCBpZiBhbnkgb2YgdGhlIHZhbHVlcyBpcyBtaXNzaW5nLCBzbyB3ZSBuZWVkIHRvIGFkZCBgbmEucm0gPSBUUlVFYCBzbyB0aGF0IFIgd2lsbCByZW1vdmUgdGhvc2Ugcm93cyBIb3dldmVyLCBpdCBpcyBpbXBvcnRhbnQgdG8gYmUgYXdhcmUgb2Ygd2hhdCBtaWdodCBiZSBjYXVzaW5nIHRoZXNlIG1pc3NpbmcgdmFsdWVzIGFuZCB0aGUgcmFtaWZpY2F0aW9ucyBvZiBtaXNzaW5nIHZhbHVlcyBpbiBkYXRhLiAKCmBgYHtyIHN1bW0yfQpzdW1tYXJ5X3RlbXAgPC0gd2VhdGhlciAlPiUgCiAgc3VtbWFyaXplKG1lYW4gPSBtZWFuKHRlbXAsIG5hLnJtID0gVFJVRSksIAogICAgICAgICAgICBzdGRfZGV2ID0gc2QodGVtcCwgbmEucm0gPSBUUlVFKSkKc3VtbWFyeV90ZW1wCmBgYAoKIyMjIExlYXJuaW5nIENoZWNrIDMuMgoqU2F5IGEgZG9jdG9yIGlzIHN0dWR5aW5nIHRoZSBlZmZlY3Qgb2Ygc21va2luZyBvbiBsdW5nIGNhbmNlciBmb3IgYSBsYXJnZSBudW1iZXIgb2YgcGF0aWVudHMgd2hvIGhhdmUgcmVjb3JkcyBtZWFzdXJlZCBhdCBmaXZlIHllYXIgaW50ZXJ2YWxzLiBTaGUgbm90aWNlcyB0aGF0IGEgbGFyZ2UgbnVtYmVyIG9mIHBhdGllbnRzIGhhdmUgbWlzc2luZyBkYXRhIHBvaW50cyBiZWNhdXNlIHRoZSBwYXRpZW50IGhhcyBkaWVkLCBzbyBzaGUgY2hvb3NlcyB0byBpZ25vcmUgdGhlc2UgcGF0aWVudHMgaW4gaGVyIGFuYWx5c2lzLiBXaGF0IGlzIHdyb25nIHdpdGggdGhpcyBkb2N0b3LigJlzIGFwcHJvYWNoPyoKCioqQW5zd2VyOioqCkkgd291bGQgdGhpbmsgdGhhdCBkeWluZyBmcm9tIGx1bmcgY2FuY2VyIGlzIGEgcHJldHR5IGJpZyBlZmZlY3Qgb2Ygc21va2luZyEgVGhpcyBpcyBub3QgYW4gaW5zdGFuY2Ugb2YgYSBvbmUtb2ZmIGRhdGEgZW50cnkgbWlzdGFrZSwgdGhpcyBjb3VsZCBoYXZlIGEgYmlnIGltcGFjdCBvbiB0aGUgYW5hbHlzaXMuCgojIyMgTGVhcm5pbmcgQ2hlY2sgMy4zCipNb2RpZnkgdGhlIGFib3ZlIGBzdW1tYXJpemVgIGZ1bmN0aW9uIHRvIGNyZWF0ZSBgc3VtbWFyeV90ZW1wYCB0byBhbHNvIHVzZSB0aGUgYG4oKWAgc3VtbWFyeSBmdW5jdGlvbjogYHN1bW1hcml6ZShjb3VudCA9IG4oKSlgLiBXaGF0IGRvZXMgdGhlIHJldHVybmVkIHZhbHVlIGNvcnJlc3BvbmQgdG8/KgoKKipBbnN3ZXI6KioKYGBge3IgbGM0M30Kc3VtbWFyeV90ZW1wMiA8LSB3ZWF0aGVyICU+JSAKICBzdW1tYXJpemUoY291bnQgPSBuKCkpCnN1bW1hcnlfdGVtcDIKYGBgCkhlcmUgd2Ugc2VlIHRoZXJlIGFyZSAyNiwxMTUgcm93cy4KCiMjIyBMZWFybmluZyBDaGVjayAzLjQKKldoeSBkb2VzbuKAmXQgdGhlIGZvbGxvd2luZyBjb2RlIHdvcms/IFJ1biB0aGUgY29kZSBsaW5lIGJ5IGxpbmUgaW5zdGVhZCBvZiBhbGwgYXQgb25jZSwgYW5kIHRoZW4gbG9vayBhdCB0aGUgZGF0YS4gSW4gb3RoZXIgd29yZHMsIHJ1biBgc3VtbWFyeV90ZW1wIDwtIHdlYXRoZXIgJT4lIHN1bW1hcml6ZShtZWFuID0gbWVhbih0ZW1wLCBuYS5ybSA9IFRSVUUpKWAgZmlyc3QuKgpgYGB7ciBsYzQ0LCBldmFsID0gRkFMU0V9CnN1bW1hcnlfdGVtcDMgPC0gd2VhdGhlciAlPiUgCiAgc3VtbWFyaXplKG1lYW4gPSBtZWFuKHRlbXAsIG5hLnJtID0gVFJVRSkpICU+JSAKICBzdW1tYXJpemUoc3RkX2RldiA9IHNkKHRlbXAsIG5hLnJtID0gVFJVRSkpCmBgYAoKKipBbnN3ZXI6KioKVGhpcyBjb2RlIGRvZXNuJ3Qgd29yayBiZWNhdXNlIGl0IGlzbid0IG5lc3RlZCB3aXRoaW4gdGhlIGZpcnN0IGBzdW1tYXJpemUoKWAgZnVuY3Rpb24uIFRoaXMgbWVhbnMgdGhhdCBgdGVtcGAgaGFzIGFscmVhZHkgYmVlbiBzdW1tYXJpemVkIGJ5IGBtZWFuKClgLiBUaGUgYCU+JWAgaXMgbGlrZSBzYXlpbmcgInRoZW4iIHdpdGggZnVuY3Rpb25zLiBTaW5jZSBgdGVtcGAgaGFzIGFscmVhZHkgYmVlbiBzdW1tYXJpemVkLCB0aGVyZSBpc24ndCBhbnl0aGluZyBsZWZ0IGZvciBgc2QoKWAgdG8gZG8hCgojIyMgUHJhY3RpY2UgMy40OiBgZ3JvdXBfYnlgIHJvd3MKVGhlIGBncm91cF9ieSgpYCBmdW5jdGlvbiBhbGxvd3MgdXMgdG8gbG9vayBhdCByb3dzIChvYnNlcnZhdGlvbnMpIGJ5IGEgdmFyaWFibGUuIFRoaXMgaXMgcmVtaW5pc2NlbnQgb2YgZmFjZXRpbmcuIEZvciBleGFtcGxlLCBpZiB3ZSB3YW50ZWQgdG8gbG9vayBhdCB0aGUgbWVhbiB0ZW1wZXJhdHVyZXMgb2YgYHdlYXRoZXJgIGJ5IG1vbnRoLCB0aGUgY29kZSB3b3VsZCBsb29rIGxpa2U6CmBgYHtyIGdyb3VwYnkxfQpzdW1fbW9udGhseV90ZW1wIDwtIHdlYXRoZXIgJT4lIAogIGdyb3VwX2J5KG1vbnRoKSAlPiUgCiAgc3VtbWFyaXplKG1lYW4gPSBtZWFuKHRlbXAsIG5hLnJtID0gVFJVRSksCiAgICAgICAgICAgIHN0ZF9kZXYgPSBzZCh0ZW1wLCBuYS5ybSA9IFRSVUUpKQpzdW1fbW9udGhseV90ZW1wCmBgYApIZXJlLCB0aGUgYGdyb3VwX2J5KClgIGRvZXMndCBjaGFuZ2UgdGhlIGRhdGEgYnV0IGl0IGFkZHMgc29tZSBtZXRhLWRhdGEuIElmIHdlIHJ1biBgd2VhdGhlcmAgYmVmb3JlIGFuZCBhZnRlciBgZ3JvdXBfYnlgLCBpdCB3b3VsZCBsb29rIHRoZSBzYW1lIGV4Y2VwdCB0aGF0IGAjIEdyb3VwczogbW9udGggWzEyXWAgd291bGQgYmUgYWRkZWQgdW5kZXIgYCMgQSB0aWJibGU6IDI2LDExNSB4IDE1YDoKYGBge3IgZ3JvdXBieTJ9CndlYXRoZXIKYGBgCmBgYHtyIGdyb3VwYnkzfQpncm91cGVkX3dlYXRoZXIgPC0gd2VhdGhlciAlPiUgCiAgZ3JvdXBfYnkobW9udGgpCmdyb3VwZWRfd2VhdGhlcgpgYGAKVG8gcmVtb3ZlIHRoaXMgbWV0YS1kYXRhLCB3ZSB3b3VsZCBuZWVkIHRvIHJ1biBgZ3JvdXBlZF93ZWF0aGVyYCB0aHJvdWdoIGB1bmdyb3VwKClgLgoKVG8gY291bnQgaG93IG1hbnkgZmxpZ2h0cyBkZXBhcnRlZCBlYWNoIG9mIHRoZSB0aHJlZSBhaXJwb3J0cyBpbiBOWUMsIHVzZSBgZ3JvdXBfYnkoKWAgYW5kIGBuKClgOgpgYGB7ciBncm91cGJ5NH0KY291bnRfYnlfb3JpZ2luIDwtIGZsaWdodHMgJT4lIAogIGdyb3VwX2J5KG9yaWdpbikgJT4lIAogIHN1bW1hcml6ZShjb3VudCA9IG4oKSkKY291bnRfYnlfb3JpZ2luCmBgYApIZXJlIHdlIHNlZSBob3cgbWFueSBmbGlnaHRzIGRlcGFydGVkIGZyb20gZWFjaCBvZiB0aGUgdGhyZWUgYWlycG9ydHMgaW4gb3VyIGBmbGlnaHRzYCBkYXRhIGZyYW1lLgoKIyMjIFByYWN0aWNlIDMuNC4xOiBHcm91cGluZyBieSBtb3JlIHRoYW4gb25lIHZhcmlhYmxlClRoZSBgZ3JvdXBfYnkoKWAgZnVuY3Rpb24gY2FuIGhvbGQgbXVsdGlwbGUgdmFyaWFibGVzLiBGb3IgZXhhbXBsZSwgaWYgd2Ugd2FudGVkIHRvIGxvb2sgYXQgaG93IG1hbnkgZmxpZ2h0cyBkZXBhcnRlZCBlYWNoIG9mIHRoZSB0aHJlZSBhaXJwb3J0cyBmb3IgZWFjaCBtb250aCwgd2UgY291bGQgdXNlIGBncm91cF9ieShvcmlnaW4sIG1vbnRoKWAuCmBgYHtyIGdyb3VwYnk1fQpjb3VudF9ieV9vcmlnaW5fbW9udGhseSA8LSBmbGlnaHRzICU+JSAKICBncm91cF9ieShvcmlnaW4sIG1vbnRoKSAlPiUgCiAgc3VtbWFyaXplKGNvdW50ID0gbigpKQpjb3VudF9ieV9vcmlnaW5fbW9udGhseQpgYGAKSGVyZSB3ZSBzZWUgdGhlcmUgYXJlIDM2IHJvd3MgYmUgZWFjaCBvZiB0aGUgMyBhaXJwb3J0cyBoYXMgY291bnRzIGZvciAxMiBtb250aHMuCgojIyMgTGVhcm5pbmcgQ2hlY2sgMy41CipSZWNhbGwgZnJvbSBDaGFwdGVyIDIgd2hlbiB3ZSBsb29rZWQgYXQgcGxvdHMgb2YgdGVtcGVyYXR1cmVzIGJ5IG1vbnRocyBpbiBOWUMuIFdoYXQgZG9lcyB0aGUgc3RhbmRhcmQgZGV2aWF0aW9uIGNvbHVtbiBpbiB0aGUgYHN1bV9tb250aGx5X3RlbXBgIGRhdGEgZnJhbWUgdGVsbCB1cyBhYm91dCB0ZW1wZXJhdHVyZXMgaW4gTmV3IFlvcmsgQ2l0eSB0aHJvdWdob3V0IHRoZSB5ZWFyPyoKCioqQW5zd2VyOioqCkZyb20gdGhlIGBzdW1fbW9udGhseV90ZW1wYCBkYXRhIGZyYW1lLCB3ZSBzZWUgdGhhdCBOb3ZlbWJlciwgRGVjZW1iZXIsIGFuZCBKYW51YXJ5IGhhZCB0aGUgbW9zdCB2YXJpYWJpbGl0eSAoaGlnaGVzdCBgc2RgKSBhbmQgTWFyY2ggYW5kIEF1Z3VzdCBoYWQgdGhlIGxlYXN0IHZhcmlhYmlsaXR5IChsb3dlc3QgYHNkYCkuCgojIyMgTGVhcm5pbmcgQ2hlY2sgMy42CipXaGF0IGNvZGUgd291bGQgYmUgcmVxdWlyZWQgdG8gZ2V0IHRoZSBtZWFuIGFuZCBzdGFuZGFyZCBkZXZpYXRpb24gdGVtcGVyYXR1cmUgZm9yIGVhY2ggZGF5IGluIDIwMTMgZm9yIE5ZQz8qCgoqKkFuc3dlcjoqKgpgYGB7ciBsYzQ2fQpkYWlseV9zdW1tYXJ5IDwtIHdlYXRoZXIgJT4lIAogIGdyb3VwX2J5KHllYXIsIG1vbnRoLCBkYXkpICU+JSAKICBzdW1tYXJpc2UobWVhbiA9IG1lYW4odGVtcCwgbmEucm0gPSBUUlVFKSwKICAgICAgICAgICAgc3RkX2RldiA9IHNkKHRlbXAsIG5hLnJtID0gVFJVRSkpCmRhaWx5X3N1bW1hcnkKYGBgCkludGVyZXN0aW5nbHksIHdlIHNlZSB0aGVyZSBhcmUgb25seSAzNjQgcm93cywgbm90IDM2NS4gTG9va2luZyBhdCB0aGUgZGF0YSBmcmFtZSBpbiBSLCB3ZSBzZWUgdGhhdCB0aGVyZSBpcyBubyBkYXRhIGZvciBEZWNlbWJlciAzMSwgMjAxMy4KCiMjIyBMZWFybmluZyBDaGVjayAzLjcKKlJlY3JlYXRlIGBieV9tb250aGx5X29yaWdpbmAsIGJ1dCBpbnN0ZWFkIG9mIGdyb3VwaW5nIHZpYSBgZ3JvdXBfYnkob3JpZ2luLCBtb250aClgLCBncm91cCB2YXJpYWJsZXMgaW4gYSBkaWZmZXJlbnQgb3JkZXIgYGdyb3VwX2J5KG1vbnRoLCBvcmlnaW4pYC4gV2hhdCBkaWZmZXJzIGluIHRoZSByZXN1bHRpbmcgZGF0YXNldD8qCgoqKkFuc3dlcjoqKgpUaGUgb3JpZ2luYWwgY29kZSBzaG93ZWQgdGhlIGZvbGxvd2luZyBvdXRwdXQ6CmBgYHtyfQpjb3VudF9ieV9vcmlnaW5fbW9udGhseQpgYGAKVGhpcyBzaG93cyB0aGUgZGF0YSBhcyBvcmdhbml6ZWQgYnkgb3JpZ2luIGZpcnN0LCB0aGVuIGJ5IG1vbnRoLgoKVGhlIGZvbGxvd2luZyBjb2RlIG9yZ2FuaXplcyB0aGUgc2FtZSBkYXRhIGJ5IG1vbnRoIGZpcnN0LCB0aGVuIGJ5IG9yaWdpbi4gSXQgaXMgdGhlIHNhbWUgZGF0YSwganVzdCBvcmdhbml6ZWQgaW4gYSBkaWZmZXJlbnQgd2F5LgpgYGB7ciBsYzQ3fQpieV9tb250aF9vcmlnaW4gPC0gZmxpZ2h0cyAlPiUgCiAgZ3JvdXBfYnkobW9udGgsIG9yaWdpbikgJT4lIAogIHN1bW1hcml6ZShjb3VudCA9IG4oKSkKYnlfbW9udGhfb3JpZ2luCmBgYAoKIyMjIExlYXJuaW5nIENoZWNrIDMuOAoqSG93IGNvdWxkIHdlIGlkZW50aWZ5IGhvdyBtYW55IGZsaWdodHMgbGVmdCBlYWNoIG9mIHRoZSB0aHJlZSBhaXJwb3J0cyBmb3IgZWFjaCBgY2FycmllcmA/KgoKKipBbnN3ZXI6KioKV2UgY291bGQgZ3JvdXAgYnkgY2FycmllciBhbmQgb3JpZ2luIGFuZCB0aGVuIHVzZSB0aGUgYG4oKWAgZnVuY3Rpb24gaW4gYHN1bW1hcml6ZSgpYCB0byBjb3VudCBhbGwgdGhlIHJvd3MuCmBgYHtyfQpjYXJyaWVyX2FpcnBvcnRfZmxpZ2h0Y291bnQgPC0gZmxpZ2h0cyAlPiUgCiAgZ3JvdXBfYnkoY2Fycmllciwgb3JpZ2luKSAlPiUgCiAgc3VtbWFyaXplKGNvdW50ID0gbigpKQpjYXJyaWVyX2FpcnBvcnRfZmxpZ2h0Y291bnQKYGBgCgojIyMgTGVhcm5pbmcgQ2hlY2sgMy45CipIb3cgZG9lcyB0aGUgYGZpbHRlcigpYCBvcGVyYXRpb24gZGlmZmVyIGZyb20gYSBgZ3JvdXBfYnkoKWAgZm9sbG93ZWQgYnkgYSBgc3VtbWFyaXplKClgPyoKCioqQW5zd2VyOioqCmBmaWx0ZXIoKWAgc2VsZWN0cyByb3dzIGZyb20gYSBkYXRhIHNldCB0byBjcmVhdGUgYSBuZXcgZGF0YSBmcmFtZS4gTm90aGluZyBpcyBuZXcgb3IgY29tcHV0ZWQsIGp1c3QgZmlsdGVyZWQuIGBncm91cF9ieSgpICU+JSBzdW1tYXJpemUoKWAgYWRkcyBtZXRhIGRhdGEgb2YgZ3JvdXBzIGFuZCB0aGVuIGNvbXB1dGVzIG5ldyB2YWx1ZXMsIHN1Y2ggYXMgdGhlIG1lYW4gb3Igc3RhbmRhcmQgZGV2aWF0aW9uIGFjY29yZGluZyB0byB0aG9zZSBncm91cGluZ3MuCgojIyMgUHJhY3RpY2UgMy41OiBgbXV0YXRlYCBleGlzdGluZyB2YXJpYWJsZXMKYG11dGF0ZWAgY2FuIGNyZWF0ZSBvciBjb21wdXRlIGEgbmV3IHZhcmlhYmxlIGJhc2VkIG9uIHRoZSBleGlzdGluZyBvbmVzIGluIGEgZGF0YSBmcmFtZS4gRm9yIGV4YW1wbGUsIHdlIGNhbiB1c2UgdGhlIGB0ZW1wYCB2YXJpYWJsZSBhbmQgdGhlIGZvcm11bGEgZm9yIGNvbnZlcnRpbmcgRmFyZW5oZWl0IHRvIENlbGNpdXMgdG8gY3JlYXRlIGEgbmV3IHZhcmlhYmxlIGB0ZW1wX2luX0NgLgoKYGBge3IgbXV0YXRlMX0Kd2VhdGhlciA8LSB3ZWF0aGVyICU+JSAKICBtdXRhdGUodGVtcF9pbl9DID0gKHRlbXAtMzIvMS44KSkKbmFtZXMod2VhdGhlcikKYGBgCkhlcmUgd2Ugc2VlIGFsbCB0aGUgdmFyaWFibGVzIGluIGB3ZWF0aGVyYCBpbmNsdWRpbmcgdGhlIG5ld2VzdCB2YXJpYWJsZSBgdGVtcF9pbl9DYC4gV2UgZGlkIG5vdCBlcmFzZSBvciByZXBsYWNlIGFueSBkYXRhLCB3ZSBhZGRlZCB0byB0aGUgZGF0YSBmcmFtZS4gSW4gZ2VuZXJhbCwgaXQgaXMgb2theSB0byBvdmVyd3JpdGUgYSBkYXRhIGZyYW1lIHdoZW4gYWRkaW5nIHRvIGl0LiBXaGVuIHdlIGFyZSBmaWx0ZXJpbmcgb3V0IGFuZCBvbWl0dGluZyB2YWx1ZXMsIGl0IGlzIGJlc3QgdG8gY3JlYXRlIGEgbmV3IHN1YiBkYXRhIGZyYW1lLgoKTm93IHRoYXQgd2UgaGF2ZSBgdGVtcF9pbl9DYCB3ZSBjYW4gY2FsY3VsYXRlIHRoZSBtZWFuIG1vbnRobHkgdGVtcGVyYXR1cmVzIGluIGJvdGggRsKwIGFuZCBDwrAuCmBgYHtyIG11dGF0ZTJ9CnN1bW1hcnlfbW9udGhseV90ZW1wIDwtIHdlYXRoZXIgJT4lIAogIGdyb3VwX2J5KG1vbnRoKSAlPiUgCiAgc3VtbWFyaXplKG1lYW5fdGVtcF9pbl9GID0gbWVhbih0ZW1wLCBuYS5ybT1UUlVFKSwKICAgICAgICAgICAgbWVhbl90ZW1wX2luX0MgPSBtZWFuKHRlbXAsIG5hLnJtPVRSVUUpKQpzdW1tYXJ5X21vbnRobHlfdGVtcApgYGAKCkFub3RoZXIgZXhhbXBsZSBvZiBjb21wdXRpbmcgbmV3IHZhbHVlcyBiYXNlZCBvZmYgdGhlIHZhbHVlcyBvZiBhbm90aGVyIHZhcmlhYmxlIGlzIGluIGxvb2tpbmcgYXQgdGhlIGRpZmZlcmVuY2UgaW4gZmxpZ2h0cycgZGVwYXJ0dXJlIGRlbGF5IGNvbXBhcmVkIHRvIHRoZWlyIGFycml2YWwgZGVsYXkuCmBgYHtyIG11dGF0ZTN9CmZsaWdodHMgPC0gZmxpZ2h0cyAlPiUgCiAgbXV0YXRlKGdhaW4gPSBkZXBfZGVsYXkgLSBhcnJfZGVsYXkpCmZsaWdodHMgIAoKZmxpZ2h0czIgPC0gZmxpZ2h0cyAlPiUgCiAgc2VsZWN0KGRlcF9kZWxheSwgYXJyX2RlbGF5LCBnYWluKSAlPiUgCiAgc2xpY2UoMTo1KQpmbGlnaHRzMgpgYGAKSGVyZSB3ZSBzZWUgdGhhdCB0aGUgZmlyc3QgZmxpZ2h0IHdhcyBkZWxheWVkIGJ5IDIgbWludXRlcyBhbmQgYXJyaXZlZCBsYXRlIGJ5IDExIG1pbnV0ZXMsIG1lYW5pbmcgaXQgaGFkIGEgbmVnYXRpdmUgZ2FpbiBvZiA5IG1pbnV0ZXMuIFRoZSBsYXN0IGZsaWdodCBsZWZ0IDYgbWludXRlcyBlYXJseSBhbmQgYXJyaXZlZCAyNSBtaW51dGVzIGVhcmx5LCBmb3IgYSBnYWluIG9mIHBvc2l0aXZlIDE5IG1pbnV0ZXMuCgpXZSBjYW4gdGhlbiBydW4gYHN1bW1hcml6ZSgpYCBvbiB0aGUgbmV3IHZhcmlhYmxlIGBnYWluYC4KYGBge3IgbXV0YXRlNH0KZ2Fpbl9zdW1tYXJ5IDwtIGZsaWdodHMgJT4lIAogIHN1bW1hcml6ZSgKICAgIG1pbiA9IG1pbihnYWluLCBuYS5ybSA9IFRSVUUpLAogICAgcTEgPSBxdWFudGlsZShnYWluLCAwLjI1LCBuYS5ybT1UUlVFKSwKICAgIG1lZGlhbiA9IHF1YW50aWxlKGdhaW4sIDAuNSwgbmEucm09VFJVRSksCiAgICBxMyA9IHF1YW50aWxlKGdhaW4sIDAuNzUsIG5hLnJtPVRSVUUpLAogICAgbWF4ID0gbWF4KGdhaW4sIG5hLnJtPVRSVUUpLAogICAgbWVhbiA9IG1lYW4oZ2FpbiwgbmEucm09VFJVRSksCiAgICBzZCA9IHNkKGdhaW4sIG5hLnJtPVRSVUUpLAogICAgbWlzc2luZyA9IHN1bShpcy5uYShnYWluKSkKICApCmdhaW5fc3VtbWFyeQoKYGBgCgpXZSBjYW4gdGhlbiBwbG90IGBnYWluYCBpbiBhIGhpc3RvZ3JhbToKYGBge3IgbXV0YXRlNSwgd2FybmluZz1GQUxTRX0KZ2dwbG90KGZsaWdodHMsCiAgICAgICBhZXMoeCA9IGdhaW4pKSArCiAgZ2VvbV9oaXN0b2dyYW0oY29sb3IgPSAid2hpdGUiLCBiaW5zID0gMjApCmBgYAoKYG11dGF0ZWAgY2FuIGNvbXB1dGUgbXVsdGlwbGUgbmV3IHZhcmlhYmxlcyBhdCBvbmNlIHdpdGggdGhlIGAmYCBvciBgLGAuCgojIyMgTGVhcm5pbmcgQ2hlY2sgMy4xMAoqV2hhdCBkbyBwb3NpdGl2ZSB2YWx1ZXMgb2YgdGhlIGBnYWluYCB2YXJpYWJsZSBpbiBgZmxpZ2h0c2AgY29ycmVzcG9uZCB0bz8gV2hhdCBhYm91dCBuZWdhdGl2ZSB2YWx1ZXM/IEFuZCB3aGF0IGFib3V0IGEgemVybyB2YWx1ZT8qCgoqKkFuc3dlcjoqKgpUaGUgcG9zaXRpdmUgdmFsdWVzIG1lYW4gdGhhdCB0aGUgZmxpZ2h0ICJtYWRlIHVwIiB0aW1lIGluIHRoZSBhaXIuIFRoZSBuZWdhdGl2ZSB2YWx1ZXMgbWVhbiB0aGF0IHRoZSBmbGlnaHQgImxvc3QiIHRpbWUgaW4gdGhlIGFpci4gWmVybyB3b3VsZCBtZWFuIHRoYXQgdGhlIGZsaWdodCBuZWl0aGVyIGxvc3Qgbm9yIGdhaW5lZCBhbnkgdGltZSBpbiBhaXIuIAoKIyMjIExlYXJuaW5nIENoZWNrIDMuMTEKKkNvdWxkIHdlIGNyZWF0ZSB0aGUgYGRlcF9kZWxheWAgYW5kIGBhcnJfZGVsYXlgIGNvbHVtbnMgYnkgc2ltcGx5IHN1YnRyYWN0aW5nIGBkZXBfdGltZWAgZnJvbSBgc2NoZWRfZGVwX3RpbWVgIGFuZCBzaW1pbGFybHkgZm9yIGFycml2YWxzPyBUcnkgdGhlIGNvZGUgb3V0IGFuZCBleHBsYWluIGFueSBkaWZmZXJlbmNlcyBiZXR3ZWVuIHRoZSByZXN1bHQgYW5kIHdoYXQgYWN0dWFsbHkgYXBwZWFycyBpbiBgZmxpZ2h0cy5gKgoKKipBbnN3ZXI6KioKTm8gYmVjYXVzZSB0aGUgdGltZXMgYXJlIHdyaXR0ZW4gYXMgMTI1OCwgMTI1OSwgMTMwMCwgMTMwMSwgc28gdGhleSBjYW4ndCBiZSBhZGRlZC9zdWJ0cmFjdGVkLgoKIyMjIExlYXJuaW5nIENoZWNrIDMuMTIKKldoYXQgY2FuIHdlIHNheSBhYm91dCB0aGUgZGlzdHJpYnV0aW9uIG9mIGBnYWluYD8gRGVzY3JpYmUgaXQgaW4gYSBmZXcgc2VudGVuY2VzIHVzaW5nIHRoZSBwbG90IGFuZCB0aGUgYGdhaW5fc3VtbWFyeWAgZGF0YSBmcmFtZSB2YWx1ZXMuKgoKKipBbnN3ZXI6KioKSXQgaXMgcHJldHR5IG5vcm1hbGx5IGRpc3RyaWJ1dGVkLiBNb3N0IG9mIHRoZSBnYWlucyBhcmUgYmV0d2VlbiAtMjUgdG8gMjUuCgojIyMgUHJhY3RpY2UgMy42OiBgYXJyYW5nZWAgYW5kIHNvcnQgcm93cwpgYXJyYW5nZSgpYCBjYW4gc29ydC9yZW9yZGVyIGRhdGEgYnkgYSB2YXJpYWJsZS4gSXQgaXMgdHlwaWNhbGx5IHVzZWQgYWZ0ZXIgYGdyb3VwX2J5KClgIGFuZCBgc3VtbWFyaXplKClgLgoKRm9yIGV4YW1wbGUsIGlmIHdlIHdhbnRlZCB0byBrbm93IHRoZSBtb3N0IGZyZXF1ZW50IGRlc3RpbmF0aW9uIGFpcnBvcnRzIGZvciBhbGwgZmxpZ2h0cyBkZXBhcnRpbmcgTllDIGluIDIwMTM6CmBgYHtyIGFycmFuZ2UxfQpmcmVxX2Rlc3QgPC0gZmxpZ2h0cyAlPiUgCiAgZ3JvdXBfYnkoZGVzdCkgJT4lIAogIHN1bW1hcml6ZShudW1fZmxpZ2h0cyA9IG4oKSkgJT4lIAogIGFycmFuZ2UoZGVzYyhudW1fZmxpZ2h0cykpCmZyZXFfZGVzdApgYGAKVGhpcyBvdXRwdXQgaXMgZ3JvdXBlZCBieSBkZXN0aW5hdGlvbiBhbmQgY291bnRlZCBmb3IgZWFjaCBkZXN0aW5hdGlvbiBhbmQgdGhlbiBpdCBpcyBhcnJhbmdlZCBpbiBkZXNjZW5kaW5nIG9yZGVyIGJ5IGBudW1fZmxpZ2h0c2AuIFdpdGhvdXQgYGFycmFuZ2UoZGVzYyhudW1fZmxpZ2h0cyksIHRoZSBkYXRhIHdvdWxkIGJlIG9yZGVyZWQgZmlyc3QgYnkgYWxwaGFiZXRpY2FsIG9yZGVyIG9mIGRlc3RpbmF0aW9ucyBhbmQgaW4gYXNjZW5kaW5nIG9yZGVyLgoKIyMjIFByYWN0aWNlIDMuNzogYGpvaW5gIGRhdGEgZnJhbWVzCmBqb2luYCBjYW4gbWVyZ2UgdHdvIGRpZmZlcmVudCBkYXRhc2V0cy4gVGhleSBuZWVkIHRvIGhhdmUgc29tZSBzb3J0IG9mIGtleSB2YXJpYWJsZSB0aGF0IG1hdGNoZXMgYm90aCBkYXRhIGZyYW1lcy4gRm9yIGV4YW1wbGUsIGBmbGlnaHRzYCBhbmQgYGFpcmxpbmVzYCBib3RoIGhhdmUgYGNhcnJpZXJgLiBLZXkgdmFyaWFibGVzIGFyZSBhbG1vc3QgYWx3YXlzIGlkZW50aWZpY2F0aW9uIHZhcmlhYmxlcyB0aGF0IGNhbiB1bmlxdWVseSBpZGVudGlmeSBvYnNlcnZhdGlvbmFsIHVuaXRzLmBhaXJsaW5lc2AgaGFzIGBjYXJyaWVyYCB0aGF0IGlzIGEgY2FycmllciBjb2RlIHN1Y2ggYXMgVUEsIG9yIERMLCBidXQgaXQgYWxzbyBoYXMgd2hhdCB0aG9zZSBjb2RlcyBtZWFuIHVuZGVyIGBuYW1lYC4gYGZsaWdodHNgIGRvZXMgbm90IGhhdmUgYG5hbWVgLgoKIyMjIFByYWN0aWNlIDMuNy4xOiBNYXRjaGluZyAia2V5IiB2YXJpYWJsZSBuYW1lcwpJbiBvcmRlciB0byBgam9pbmAgdHdvIGRhdGEgZnJhbWVzLCB0aGV5IG5lZWQgdG8gaGF2ZSBhIG1hdGNoaW5nICJrZXkiIHZhcmlhYmxlLiBGb3IgYGZsaWdodHNgIGFuZCBgYWlybGluZXNgIHdlIGNhbiB1c2UgYGNhcnJpZXJgLiBUbyBkbyB0aGlzLCB3ZSB1c2UgdGhlIGBpbm5lcl9qb2luKClgIGZ1bmN0aW9uLgpgYGB7ciBqb2luMX0KZmxpZ2h0c19qb2luZWQgPC1mbGlnaHRzICU+JSAKICBpbm5lcl9qb2luKGFpcmxpbmVzLCBieSA9ICJjYXJyaWVyIikKbmFtZXMoZmxpZ2h0c19qb2luZWQpCmBgYApIZXJlIHdlIHNlZSB0aGUgbmFtZXMgb2YgYWxsIHRoZSB2YXJpYWJsZXMgaW4gYGZsaWdodHNfam9pbmVkYCBhbmQgdGhlIG5ld2x5IGFkZGVkIHZhcmlhYmUgb2YgYG5hbWVgIGZyb20gdGhlIG1lcmdpbmcgb2YgYGFpcmxpbmVzYCBhbmQgYGZsaWdodHNgLgoKIyMjIFByYWN0aWNlIDMuNy4yOiBEaWZmZXJlbnQgImtleSIgdmFyaWFibGUgbmFtZXMKU29tZXRpbWVzIG91ciAia2V5IiB2YXJpYWJsZSBoYXMgYSBkaWZmZXJlbnQgbmFtZSBpbiBlYWNoIGRhdGEgZnJhbWUuIEZvciBleGFtcGxlLCBpZiB3ZSB3YW50ZWQgdG8ga25vdyB0aGUgbmFtZSBvZiB0aGUgZGVzdGluYXRpb24gYWlycG9ydHMgaW4gYGZsaWdodHNgIHdlIG1pZ2h0IGxvb2sgYXQgdGhlIHZhcmlhYmxlIGBkZXN0YC4gQnV0LCBgZGVzdGAgb25seSBoYXMgdGhlIEZBQSBhaXJwb3J0IGNvZGVzLCB3aGljaCBhcmUgb2Z0ZW4gY29uZnVzaW5nLiBUaGUgZGF0YSBmcmFtZSBgYWlycG9ydHNgIGhhcyBib3RoIHRoZSBGQUEgYWlycG9ydCBjb2RlcyBhbmQgdGhlIG5hbWUgb2YgdGhlIGFpcnBvcnQuIEhvd2V2ZXIsIGBmbGlnaHRzYCBjYWxscyB0aGUgdmFyaWFibGUgd2l0aCB0aGUgRkFBIGNvZGUgYGRlc3RgIHdoaWxlIGBhaXJwb3J0c2AgY2FsbHMgdGhlIHZhcmlhYmxlIGBmYWFgLiBUaGV5IGRvbid0IHNoYXJlIHRoZSBzYW1lIHZhcmlhYmxlIG5hbWUsIGJ1dCB0aGV5IGhhdmUgdGhlIHNhbWUgZGF0YS4KClRvIGBqb2luYCB0aGUgdHdvIGRhdGEgZnJhbWVzLCB3ZSBuZWVkIHRvIHRlbGwgUiB0byB0cmVhdCB0aGUgdmFyaWFibGVzIGFzIGhhdmluZyB0aGUgc2FtZSBuYW1lOgpgYGB7ciBqb2luMn0KZmxpZ2h0c193aXRoX2FpcnBvcnRfbmFtZXMgPC0gZmxpZ2h0cyAlPiUgCiAgaW5uZXJfam9pbihhaXJwb3J0cywgYnkgPSBjKCJkZXN0IiA9ICJmYWEiKSkKbmFtZXMoYWlycG9ydHMpCm5hbWVzKGZsaWdodHMpCm5hbWVzKGZsaWdodHNfd2l0aF9haXJwb3J0X25hbWVzKQpgYGAKCk5leHQsIGxldCdzIGNvdW50IHRoZSBudW1iZXIgb2YgZmxpZ2h0cyBmcm9tIE5ZQyB0byBlYWNoIGRlc3RpbmF0aW9uIGJ1dCBpbmNsdWRlIHRoZSBpbmZvcm1hdGlvbiBhYm91dCB0aGUgZGVzdGluYXRpb24gYWlycG9ydDoKYGBge3Igam9pbjN9Cm5hbWVkX2Rlc3QgPC0gZmxpZ2h0cyAlPiUgCiAgZ3JvdXBfYnkoZGVzdCkgJT4lIAogIHN1bW1hcml6ZShudW1fZmxpZ2h0cyA9IG4oKSkgJT4lIAogIGFycmFuZ2UoZGVzYyhudW1fZmxpZ2h0cykpICU+JSAKICBpbm5lcl9qb2luKGFpcnBvcnRzLCBieSA9IGMoImRlc3QiID0gImZhYSIpKSAlPiUgCiAgcmVuYW1lKGFpcnBvcnRfbmFtZSA9IG5hbWUpCm5hbWVkX2Rlc3QKYGBgCkhlcmUgd2UgaGF2ZSBhIG5ldyBkYXRhIGZyYW1lIG5hbWVkIGBuYW1lZF9kZXN0YCB3aGVyZSB3ZSd2ZSBncm91cGVkIGFuZCBjb3VudGVkIHRoZSBudW1iZXIgb2YgZmxpZ2h0cyB0byBlYWNoIGRlc3RpbmF0aW9uLiBXZSd2ZSB0aGVuIGFycmFuZ2VkIHRoZW0gaW4gZGVzY2VuZGluZyBvcmRlciBieSBgbnVtX2ZsaWdodHNgLiBXZSd2ZSBqb2luZWQgYGZsaWdodHNgIHdpdGggYGFpcnBvcnRzYCB2aWEgdGhlIGtleSB2YXJpYWJsZXMgYCJkZXN0IiA9ICJmYWEiYC4gVGhlbiByZW5hbWVkIHRoZSB2YXJpYWJsZSBgbmFtZWAgZnJvbSBgYWlycG9ydHNgIHRvIHRoZSBtb3JlIGRlc2NyaXB0aXZlIGBhaXJwb3J0X25hbWVgIGZvciBgbmFtZWRfZGVzdGAuIGBhaXJwb3J0c2AgZGF0YSBmcmFtZSB3aWxsIHN0aWxsIGhhdmUgdGhlIHZhcmlhYmxlIGBuYW1lYCBhcyBgbmFtZWAuCgojIyMgUHJhY3RpY2UgMy43LjM6IE11bHRpcGxlICJrZXkiIHZhcmlhYmxlcwpJZiBtdWx0aXBsZSB2YXJpYWJsZXMgYXJlIG5lZWRlZCB0byB1bmlxdWVseSBpZGVudGlmeSBlYWNoIG9ic2VydmF0aW9uYWwgdW5pdCwgd2UgY2FuIHVzZSBgYygpYCB0byAiY29tYmluZSIgb3IgImNvbmNhdGVuYXRlIiB0aG9zZSB2YXJpYWJsZXMgd2l0aGluIGBqb2luYC4KCkZvciBleGFtcGxlLCB0byBqb2luIGBmbGlnaHRzYCBhbmQgYHdlYXRoZXJgLCB3ZSBuZWVkIHRvIHVzZSBgeWVhcmAsIGBtb250aGAsIGBkYXlgLCBgaG91cmAsIGFuZCBgb3JpZ2luYC4KYGBge3Igam9pbjR9CmZsaWdodHNfd2VhdGhlcl9qb2luZWQgPC0gZmxpZ2h0cyAlPiUgCiAgaW5uZXJfam9pbih3ZWF0aGVyLCBieSA9IGMoInllYXIiLCAibW9udGgiLCAiZGF5IiwgImhvdXIiLCAib3JpZ2luIikpCm5hbWVzKHdlYXRoZXIpCm5hbWVzKGZsaWdodHMpCm5hbWVzKGZsaWdodHNfd2VhdGhlcl9qb2luZWQpCmBgYAoKIyMjIExlYXJuaW5nIENoZWNrIDMuMTMKKkxvb2tpbmcgYXQgRmlndXJlIDMuNywgd2hlbiBqb2luaW5nIGBmbGlnaHRzYCBhbmQgYHdlYXRoZXJgIChvciwgaW4gb3RoZXIgd29yZHMsIG1hdGNoaW5nIHRoZSBob3VybHkgd2VhdGhlciB2YWx1ZXMgd2l0aCBlYWNoIGZsaWdodCksIHdoeSBkbyB3ZSBuZWVkIHRvIGpvaW4gYnkgYWxsIG9mIGB5ZWFyYCwgYG1vbnRoYCwgYGRheWAsIGBob3VyYCwgYW5kIGBvcmlnaW5gLCBhbmQgbm90IGp1c3QgYGhvdXJgPyoKCioqQW5zd2VyOioqCldlIG5lZWQgdG8gbWF0Y2ggb24gYWxsIGZpdmUgb2YgdGhvc2UgdmFyaWFibGVzIGJlY2F1c2UgZWFjaCBvYnNlcnZhdGlvbiBpcyB1bmlxdWVseSBpZGVudGlmaWVkIGJ5IHRob3NlIHZhcmlhYmxlcy4gTWFueSBvYnNlcnZhdGlvbnMgaGF2ZSB0aGUgc2FtZSBob3VyIGJ1dCBoYXZlIGEgZGlmZmVyZW50IG1vbnRoLCBkYXksIGFuZCBvcmlnaW4uIGBob3VyYCBpcyBqdXN0IGEgbnVtYmVyIHNvbWV3aGVyZSBiZXR3ZWVuIDEtMjMuIEl0IGlzIG9ubHkgd2lsbCBhbGwgdGhlIHZhcmlhYmxlcyBkbyB3ZSBnZXQgYSB1bmlxdWUgb2JzZXJ2YXRpb24uCgojIyMgTGVhcm5pbmcgQ2hlY2sgMy4xNAoqV2hhdCBzdXJwcmlzZXMgeW91IGFib3V0IHRoZSB0b3AgMTAgZGVzdGluYXRpb25zIGZyb20gTllDIGluIDIwMTMqCgoqKkFuc3dlcjoqKgoKSXQgaXNuJ3Qgc28gbXVjaCBzdXJwcmlzaW5nIGJ1dCB0aGVyZSBhcmUgb25seSB0d28gZGVzdGluYXRpb25zIHRoYXQgYXJlbid0IG9uIHRoZSBlYXN0IGNvYXN0LCBMQVggYW5kIFNGTy4gSSBzdXBwb3NlIE9SRCBpcyBjb25zaWRlcmVkIG1pZC13ZXN0LCBidXQgYXMgc29tZW9uZSBmcm9tIE9yZWdvbiwgSSBjb25zaWRlciBDaGljYWdvIGVhc3QgY29hc3QuCgojIyMgUHJhY3RpY2UgMy44OiBPdGhlciB2ZXJicwpPdGhlciBjb21tb25seSB1c2VkIHZlcmJzIGluIHRoZSBgZHBseXJgIHBhY2thZ2UgaW5jbHVkZSBgc2VsZWN0KClgIGZvciByZXR1cm5pbmcgb25seSBhIHN1YnNldCBvZiB2YXJpYWJsZXMvY29sdW1ucywgYHJlbmFtZSgpYCBmb3IgY2hhbmdpbmcgdGhlIG5hbWVzIG9mIHZhcmlhYmxlcywgYW5kIGB0b3BfbigpYCBmb3IgcmV0dXJuaW5nIG9ubHkgdGhlIHRvcCB2YWx1ZXMgb2YgYSB2YXJpYWJsZS4KCiMjIyBQcmFjdGljZSAzLjguMTogYHNlbGVjdGAgdmFyaWFibGVzCmBzZWxlY3RgIGFsbG93cyB1cyB0byByZXR1cm4gb25seSB0aG9zZSB2YXJpYWJsZXMvY29sdW1ucyBmcm9tIGEgZGF0YSBmcmFtZS4gRm9yIGV4YW1wbGU6CmBgYHtyIHNlbGVjdDF9CmZsaWdodHMgJT4lIAogIHNlbGVjdChjYXJyaWVyLCBmbGlnaHQpCmBgYApIZXJlIHdlIHNlZSB0aGUgdmFyaWFibGVzIGBjYXJyaWVyYCBhbmQgYGZsaWdodGAgd2l0aCBlYWNoIG9mIHRoZSAzMzYsNzc2IG9ic2VydmF0aW9ucyBvciByb3dzIGJ1dCBub25lIG9mIHRoZSBvdGhlciB2YXJpYWJsZXMuCgpUbyBkZXNlbGVjdCBhIHZhcmlhYmxlLCB0aGUgYC1gIHN5bWJvbCBjYW4gYmUgdXNlZDoKYGBge3Igc2VsZWN0ZGVzZWxlY3R9CmZsaWdodHNfbm9feWVhciA8LSBmbGlnaHRzICU+JSAKICBzZWxlY3QoLXllYXIpCmFzX3RpYmJsZShmbGlnaHRzX25vX3llYXIpCmBgYApIZXJlIHdlIHNlZSBhbGwgb2YgdGhlIHZhcmlhYmxlcyBleGNlcHQgZm9yIGB5ZWFyYAoKV2UgY2FuIGFsc28gc2VsZWN0IHJhbmdlcyBvZiB2YXJpYWJsZXM6CmBgYHtyIHNlbGVjdHJhbmdlfQpmbGlnaHRzX3JhbmdlIDwtIGZsaWdodHMgJT4lIAogIHNlbGVjdChtb250aDpkYXksIGFycl90aW1lOnNjaGVkX2Fycl90aW1lKQpmbGlnaHRzX3JhbmdlCmBgYAoKYHNlbGVjdGAgYWxzbyBhbGxvd3MgdXMgdG8gcmVvcmRlciB2YXJpYWJsZXM6CmBgYHtyIHNlbGVjdHJlb3JkZXJ9CmZsaWdodHNfcmVvcmRlcmVkIDwtIGZsaWdodHMgJT4lIAogIHNlbGVjdCh5ZWFyLCBtb250aCwgZGF5LCBob3VyLCBtaW51dGUsIHRpbWVfaG91ciwgZXZlcnl0aGluZygpKQpmbGlnaHRzX3Jlb3JkZXJlZApgYGAKSGVyZSB3ZSBzZWUgY2VydGFpbiBzZWxlY3RlZCB2YXJpYWJsZXMgZmlyc3QgYW5kIHRoZW4gYGV2ZXJ5dGhpbmcoKWAgZWxzZSBhcHBlbmRlZCBhZnRlcndhcmQuCgpIZWxwZXIgZnVuY3Rpb25zLCBzdWNoIGFzIGBldmVyeXRoaW5nKClgIGFyZSBjb25kaXRpb25hbC4gT3RoZXIgZXhhbXBsZXMgaW5jbHVkZSBgc3RhcnRzX3dpdGgoKWAsIGBlbmRzX3dpdGgoKWAsIGFuZCBgY29udGFpbnMoKWAuIEZvciBleGFtcGxlOgpgYGB7ciBzZWxlY3RzdGFydHN3aXRofQpmbGlnaHRzX2JlZ2luX2EgPC0gZmxpZ2h0cyAlPiUKICBzZWxlY3Qoc3RhcnRzX3dpdGgoImEiKSkKZmxpZ2h0c19iZWdpbl9hCmBgYAoKT3IKYGBge3Igc2VsZWN0ZW5kc3dpdGh9CmZsaWdodHNfZGVsYXlzIDwtZmxpZ2h0cyAlPiUgCiAgc2VsZWN0KGVuZHNfd2l0aCgiZGVsYXkiKSkKZmxpZ2h0c19kZWxheXMKYGBgCgpPcgpgYGB7ciBzZWxlY3R0aW1lfQpmbGlnaHRzX3RpbWUgPC0gZmxpZ2h0cyAlPiUgCiAgc2VsZWN0KGNvbnRhaW5zKCJ0aW1lIikpCmZsaWdodHNfdGltZQpgYGAKCiMjIyBQcmFjdGljZSAzLjguMjogYHJlbmFtZWAgdmFyaWFibGVzClRoZSB2ZXJiIGByZW5hbWVgIGlzIGludHVpdGl2ZSBpbiB0aGF0IGl0IHdpbGwgcmVuYW1lIGEgdmFyaWFibGUgd2l0aCBhbm90aGVyIG5hbWUuIE9uZSB0aGluZyB0byBub3RlIGlzIHRoZSBzaW5nbGUgYD1gIGFzIG9wcG9zZWQgdG8gdGhlIGA9PWAgd2UndmUgc2VlbiBiZWZvcmUuCgpgYGB7ciByZW5hbWV0aW1lc30KZmxpZ2h0c190aW1lX25ldyA8LWZsaWdodHMgJT4lIAogIHNlbGVjdChjb250YWlucygidGltZSIpKSAlPiUgCiAgcmVuYW1lKGRlcGFydHVyZV90aW1lID0gZGVwX3RpbWUsCiAgICAgICAgIGFycml2YWxfdGltZSA9IGFycl90aW1lKQpmbGlnaHRzX3RpbWVfbmV3CmBgYAoKIyMjIFByYWN0aWNlIDMuOC4zOiBgdG9wX25gIHZhbHVlcyBvZiBhIHZhcmlhYmxlCmB0b3BfbmAgYWxsb3dzIHVzIHRvIHJldHVybiB0aGUgdG9wIHJvd3Mgb2YgcG9zaXRpdmUgYG5gIG9yIHRoZSBib3R0b20gcm93cyBvZiBuZWdhdGl2ZSBgbmAuIFRoZSBkZWZhdWx0IHZhcmlhYmxlLCBvciBgd3RgLCBpcyB0aGUgbGFzdCB2YXJpYWJsZSBpbiB0aGUgZGF0YSBmcmFtZS4KYGBge3IgdG9wbmRlc3RzfQpuYW1lZF9kZXN0ICU+JSAKICB0b3BfbihuPTEwLCB3dCA9IG51bV9mbGlnaHRzKSAKYGBgCkhlcmUgd2Ugc2VlIHRoZSBkYXRhIGZyYW1lIGBuYW1lZF9kZXN0YCB3aXRoIHRoZSB0b3AgMTAgZGVzdGluYXRpb25zLCBvcmRlcmVkIGJ5IGBudW1fZmxpZ2h0c2AuIAoKV2UgY2FuIGZ1dGhlciBjaGFuZ2UgdGhlIG91dHB1dCBoZXJlOgpgYGB7ciB0b3BuZGVzdGFycmFuZ2VkfQpuYW1lZF9kZXN0ICU+JSAKICB0b3BfbihuPTEwLCB3dCA9IG51bV9mbGlnaHRzKSAlPiUgCiAgYXJyYW5nZShkZXNjKG51bV9mbGlnaHRzKSkKYGBgCgojIyMgTGVhcm5pbmcgQ2hlY2sgMy4xNgoqV2hhdCBhcmUgc29tZSB3YXlzIHRvIHNlbGVjdCBhbGwgdGhyZWUgb2YgdGhlIGBkZXN0YCwgYGFpcl90aW1lYCwgYW5kIGBkaXN0YW5jZWAgdmFyaWFibGVzIGZyb20gYGZsaWdodHNgPyBHaXZlIHRoZSBjb2RlIHNob3dpbmcgaG93IHRvIGRvIHRoaXMgaW4gYXQgbGVhc3QgdGhyZWUgZGlmZmVyZW50IHdheXMuKgoKKipBbnN3ZXI6KioKTWV0aG9kIDE6CmBgYHtyIGxjNDE2XzF9CmxjNDE2XzEgPC0gZmxpZ2h0cyAlPiUgCiAgc2VsZWN0KGRlc3QsIGFpcl90aW1lLCBkaXN0YW5jZSkKbGM0MTZfMQpgYGAKCk1ldGhvZCAyOgpgYGB7ciBsYzQxNl8yfQpsYzQxNl8yIDwtIGZsaWdodHMgJT4lIAogIHNlbGVjdChkZXN0OmRpc3RhbmNlKQpsYzQxNl8yCmBgYAoKTWV0aG9kIDM6CmBgYHtyIGxjNDE2XzN9CmxjNDE2XzMgPC1mbGlnaHRzICU+JSAKICBzZWxlY3QoLSh5ZWFyOm9yaWdpbiksIC0oaG91cjpnYWluKSkKbGM0MTZfMwpgYGAKCiMjIyBMZWFybmluZyBDaGVjayAzLjE3CipIb3cgY291bGQgb25lIHVzZSBgc3RhcnRzX3dpdGhgLCBgZW5kc193aXRoYCwgYW5kIGBjb250YWluc2AgdG8gc2VsZWN0IGNvbHVtbnMgZnJvbSB0aGUgYGZsaWdodHNgIGRhdGEgZnJhbWU/IFByb3ZpZGUgdGhyZWUgZGlmZmVyZW50IGV4YW1wbGVzIGluIHRvdGFsOiBvbmUgZm9yIGBzdGFydHNfd2l0aGAsIG9uZSBmb3IgYGVuZHNfd2l0aGAsIGFuZCBvbmUgZm9yIGBjb250YWluc2AqCgoqKkFuc3dlcjoqKgpgc3RhcnRzX3dpdGhgbWV0aG9kOgpgYGB7ciBsYzQxN18xfQpsYzQxN18xIDwtIGZsaWdodHMgJT4lIAogIHNlbGVjdChzdGFydHNfd2l0aCgiZCIpKQpsYzQxN18xCmBgYAoKYGVuZHNfd2l0aGAgbWV0aG9kOgpgYGB7ciBsYzQxN18yfQpsYzQxN18yIDwtIGZsaWdodHMgJT4lIAogIHNlbGVjdChlbmRzX3dpdGgoInkiKSkKbGM0MTdfMgpgYGAKCmBjb250YWluc2AgbWV0aG9kOgpgYGB7ciBsYzQxN18zfQpsYzQxN18zIDwtIGZsaWdodHMgJT4lIAogIHNlbGVjdChjb250YWlucygidGltZSIpKQpsYzQxN18zCmBgYAoKCiMjIyBMZWFybmluZyBDaGVjayAzLjE4CipXaHkgbWlnaHQgd2Ugd2FudCB0byB1c2UgdGhlIGBzZWxlY3RgIGZ1bmN0aW9uIG9uIGEgZGF0YSBmcmFtZT8qCgoqKkFuc3dlcjoqKgpUbyBsb29rIGF0IG9ubHkgY2VydGFpbiB2YXJpYWJsZXMuIFRoaXMgY2FuIG1ha2UgaXQgZWFzaWVyIGZvciB1cyB0byByZWFkIGEgbGFyZ2UgZGF0YSBmcmFtZSB3aXRoIG1hbnkgdmFyaWFibGVzLgoKIyMjIExlYXJuaW5nIENoZWNrIDMuMTkKKkNyZWF0ZSBhIG5ldyBkYXRhIGZyYW1lIHRoYXQgc2hvd3MgdGhlIHRvcCA1IGFpcnBvcnRzIHdpdGggdGhlIGxhcmdlc3QgYXJyaXZhbCBkZWxheXMgZnJvbSBOWUMgaW4gMjAxMy4qCgoqKkFuc3dlcjoqKgpNZXRob2QgMToKYGBge3IgbGM0MTl9CnRvcDVfYWlycG9ydHNfd2l0aF9kZWxheXMgPC0gZmxpZ2h0cyAlPiUgCiAgc2VsZWN0KG9yaWdpbiwgYXJyX2RlbGF5KSAlPiUgCiAgdG9wX24obiA9IDUsIHd0ID0gYXJyX2RlbGF5KSAlPiUgCiAgYXJyYW5nZShkZXNjKGFycl9kZWxheSkpCnRvcDVfYWlycG9ydHNfd2l0aF9kZWxheXMKYGBgCgpNZXRob2QyOgpgYGB7ciBsYzQxOV8xfQp0b3A1X2FpcnBvcnRzX3dpdGhfZGVsYXlzMiA8LWZsaWdodHMgJT4lIAogIHNlbGVjdChvcmlnaW4sIGFycl9kZWxheSkgJT4lIAogIGFycmFuZ2UoZGVzYyhhcnJfZGVsYXkpKSAlPiUgCiAgc2xpY2UoMTo1KQp0b3A1X2FpcnBvcnRzX3dpdGhfZGVsYXlzMgpgYGAKCiMjIyBMZWFybmluZyBDaGVjayAzLjIwCipVc2luZyB0aGUgZGF0YXNldHMgaW5jbHVkZWQgaW4gdGhlIGBueWNmbGlnaHRzMTNgIHBhY2thZ2UsIGNvbXB1dGUgdGhlIGF2YWlsYWJsZSBzZWF0IG1pbGVzIGZvciBlYWNoIGFpcmxpbmUgc29ydGVkIGluIGRlc2NlbmRpbmcgb3JkZXIuIEFmdGVyIGNvbXBsZXRpbmcgYWxsIHRoZSBuZWNlc3NhcnkgZGF0YSB3cmFuZ2xpbmcgc3RlcHMsIHRoZSByZXN1bHRpbmcgZGF0YSBmcmFtZSBzaG91bGQgaGF2ZSAxNiByb3dzIChvbmUgZm9yIGVhY2ggYWlybGluZSkgYW5kIDIgY29sdW1ucyAoYWlybGluZSBuYW1lIGFuZCBhdmFpbGFibGUgc2VhdCBtaWxlcykuKgoKKipBbnN3ZXI6KioKRmlyc3QsIEknbGwgY3JlYXRlIGEgbmV3IGRhdGEgZnJhbWUgYGZsaWdodHNfd2l0aF9zZWF0c2AgdG8gam9pbiBgZmxpZ2h0c2AgYW5kIGBwbGFuZXNgIGJ5IGB0YWlsbnVtYCBhbmQgdGhlbiBqb2luIGBhaXJsaW5lc2AgYnkgYGNhcnJpZXJgLiBUaGVuLCBJJ2xsIHJlbmFtZSBgbmFtZWAgdG8gYGFpcmxpbmVfbmFtZWAgZm9yIGNsYXJpdHkuIFRoZW4sIEknbGwgc2VsZWN0IHRoZSB2YXJpYWJsZXMgYGFpcmxpbmVfbmFtZWAsIGBkaXN0YW5jZWAsIGFuZCBgc2VhdHNgLiBOZXh0IEknbGwgY2FsY3VsYXRlIHRoZSBzZWF0IG1pbGVzIHdpdGggYG11dGF0ZWAuIApgYGB7ciBsYzQyMF8xcm59CmZsaWdodHNfd2l0aF9zZWF0cyA8LSBmbGlnaHRzICU+JSAKICBpbm5lcl9qb2luKHBsYW5lcywgYnkgPSAidGFpbG51bSIpICU+JSAKICBpbm5lcl9qb2luKGFpcmxpbmVzLCBieSA9ICJjYXJyaWVyIikgJT4lIAogIHJlbmFtZShhaXJsaW5lX25hbWUgPSBuYW1lKSAlPiUgCiAgc2VsZWN0KGFpcmxpbmVfbmFtZSwgZGlzdGFuY2UsIHNlYXRzKSAlPiUgCiAgbXV0YXRlKHNlYXRfbWlsZXMgPSAoZGlzdGFuY2Uqc2VhdHMpKQpmbGlnaHRzX3dpdGhfc2VhdHMKYGBgCkkgZGVjaWRlZCB0byBzdG9wIGhlcmUgc28gdGhhdCBJIGNvdWxkIGxvb2sgYXQgdGhlIGRhdGEgYmVmb3JlIGNvbnRpbnVpbmcgb24uCgpJIHRoZW4gY3JlYXRlZCBhbm90aGVyIGRhdGEgZnJhbWUgYHNlYXRtaWxlc19haXJsaW5lc2AgZnJvbSBgZmxpZ2h0c193aXRoX3NlYXRzYC4gSSBncm91cGVkIHRoZSBkYXRhIGJ5IGBhaXJsaW5lX25hbWVgIGFuZCB0aGVuIHVzZWQgYHN1bW1hcml6ZWAgYW5kIGBzdW0oKWAgdG8gYWRkIHVwIGFsbCB0aGUgYHNlYXRfbWlsZXNgIGJ5IGFpcmxpbmVfbmFtZS4gSSB0aGVuIHVzZWQgYGFycmFuZ2UoZGVzYygpKWAgdG8gc2hvdyB0aGUgdG90YWwgc2VhdF9taWxlcyBpbiBkZXNjZW5kaW5nIG9yZGVyLgpgYGB7ciBsYzQyMF8ycm59CnNlYXRtaWxlc19haXJsaW5lcyA8LWZsaWdodHNfd2l0aF9zZWF0cyAlPiUgCiAgZ3JvdXBfYnkoYWlybGluZV9uYW1lKSAlPiUgCiAgc3VtbWFyaXplKHNlYXRfbWlsZXMgPSBzdW0oc2VhdF9taWxlcywgbmEucm0gPSBUUlVFKSkgJT4lIAogIGFycmFuZ2UoZGVzYyhzZWF0X21pbGVzKSkKc2VhdG1pbGVzX2FpcmxpbmVzCmBgYApIZXJlIHdlIHNlZSB0aGF0IFVuaXRlZCwgRGVsdGEsIGFuZCBKZXRCbHVlIGhhZCB0aGUgbW9zdCBzZWF0IG1pbGVzIG9mIHRoZSBhaXJsaW5lcyBkZXBhcnRpbmcgTllDIGluIDIwMTMuCgojIyBDaGFwdGVyIDQ6IERhdGEgSW1wb3J0aW5nICYgIlRpZHkiIERhdGEKVGhpcyBjaGFwdGVyIGlzIGFib3V0IGltcG9ydGluZyBteSBvd24gZGF0YSBhbmQgbWFraW5nIHN1cmUgaXQgaXMgaW4gYSAidGlkeSIgZm9ybWF0LCBvciBvbmUtcm93LXBlci1vYnNlcnZhdGlvbi4KCiMjIyBQcmFjdGljZSA0LjEuMTogVXNpbmcgdGhlIGNvbnNvbGUKV2UgY2FuIHVzZSB0aGUgY29uc29sZSB0byBpbXBvcnQgYSBgLmNzdmAgZmlsZSB0aGF0IGlzIHB1Ymxpc2hlZCBvbmxpbmUuIFVzZSB0aGUgYHJlYWRyYCBwYWNrYWdlIHRvIGltcG9ydCB0aGUgZmlsZSBgZGVtX3Njb3JlLmNzdmAgZnJvbSB0aGUgd2Vic2l0ZSAoaHR0cHM6Ly9tb2Rlcm5kaXZlLmNvbS9kYXRhL2RlbV9zY29yZS5jc3YpLiBXZSdsbCB1c2UgdGhlIGZ1bmN0aW9uIGByZWFkX2NzdigpYCB0byBkbyBzby4KCmBgYHtyIGltcG9ydGNzdn0KZGVtX3Njb3JlIDwtIHJlYWRfY3N2KCJodHRwczovL21vZGVybmRpdmUuY29tL2RhdGEvZGVtX3Njb3JlLmNzdiIpCmRlbV9zY29yZQpgYGAKSGVyZSB3ZSBzZWUgYSBkYXRhIGZyYW1lIHdpdGggc2NvcmVzIGZvciBob3cgYXV0b2NyYXRpYyAoLTEwKSBvciBkZW1vY3JhdGljICgxMCkgYSBjb3VudHJ5IGlzIGJ5IHllYXIuIFRoZSB5ZWFycyBhcmUgaW4gYmFja3RpY2tzIGJlY2F1c2UgUiBkb2VzIG5vdCBhbGxvdyB2YXJpYWJsZSBuYW1lcyB0byBzdGFydCB3aXRoIGEgbnVtYmVyIG5vciBjb250YWluIHNwYWNlcy4KCiMjIyBQcmFjdGljZSA0LjEuMjogVXNpbmcgUlN0dWRpbydzIGludGVyZmFjZQpXZSBjYW4gYWxzbyByZWFkIGluIGRhdGEgZnJvbSBhbiBFeGNlbCBmaWxlIHNhdmVkIG9uIG91ciBjb21wdXRlci4gV2UnbGwgY2xpY2sgb24gIkZpbGVzIiBpbiB0aGUgYm90dG9tIHJpZ2h0aGFuZCBwYW5lIGluIFJTdHVkaW8uIFdlJ2xsIGNsaWNrIG9uICJIb21lIiBhbmQgdGhlbiBmaW5kIHdoZXJlIHdlIHNhdmVkIHRoZSBhYm92ZSBmaWxlLiBJIHNhdmVkIG1pbmUgdG8gbXkgZGVza3RvcCBhcyAiZGVtX3Njb3JlMi54bHN4Ii4gQ2xpY2sgb24gdGhlIGZpbGUgImRlbV9zY29yZTIueGxzeCIgYW5kIGNsaWNrICJJbXBvcnQgRGF0YXNldC4uLiIgYW5kIHRoZW4gY2xpY2sgIkltcG9ydCIgb24gdGhlIHBvcHVwIHNjcmVlbi4gUlN0dWRpbyB3aWxsIHRoZW4gaW1wb3J0IHRoZSBmaWxlIGFzIGEgZGF0YSBmcmFtZSBhbmQgZGlzcGxheSBpdC4KCiMjIyBQcmFjdGljZSA0LjI6IFRpZHkgZGF0YQpMZXQncyBleHBsb3JlIHRoZSBgZHJpbmtzYCBkYXRhIGZyYW1lIGluIHRoZSBgZml2ZXRoaXJ0eWVpZ2h0YCBwYWNrYWdlLgpgYGB7ciBkcmlua3MxfQpkcmlua3MKYGBgCkhlcmUgd2Ugc2VlIGEgdGliYmxlIG9mIGNvdW50cmllcyBhbmQgdGhlIGF2ZXJhZ2UgbnVtYmVyIG9mIHNlcnZpbmdzIG9mIGRpZmZlcmVudCBraW5kcyBvZiBhbGNvaG9sLiBMZXQncyBsb29rIGF0IG9ubHkgNCBjb3VudHJpZXM6IFVTQSwgQ2hpbmEsIEl0YWx5LCBhbmQgU2F1ZGkgQXJhYmlhLiBMZXQncyBsb29rIGlnbm9yZSB0aGUgdmFyaWFibGUgYHRvdGFsX2xpdHJlc19vZl9wdXJlX2FsY29ob2xgIGFuZCByZW5hbWUgdGhlIHZhcmlhYmxlcyBgYmVlcl9zZXJ2aW5nc2AsIGBzcGlyaXRfc2VydmluZ3NgLCBhbmQgYHdpbmVfc2VydmluZ3NgIHRvIGBiZWVyYCwgYHNwaXJpdGAsIGFuZCBgd2luZWAuCgpgYGB7ciBkcmlua3MyfQpkcmlua3M0IDwtIGRyaW5rcyAlPiUgCiAgZmlsdGVyKGNvdW50cnkgJWluJSBjKCJVU0EiLCAiQ2hpbmEiLCAiSXRhbHkiLCAiU2F1ZGkgQXJhYmlhIikpICU+JSAKICBzZWxlY3QoLXRvdGFsX2xpdHJlc19vZl9wdXJlX2FsY29ob2wpICU+JSAKICByZW5hbWUoYmVlciA9IGJlZXJfc2VydmluZ3MsIHNwaXJpdCA9IHNwaXJpdF9zZXJ2aW5ncywgd2luZSA9IHdpbmVfc2VydmluZ3MpCmRyaW5rczQKYGBgCgpIb3cgd291bGQgd2UgY3JlYXRlIGEgc2lkZS1ieS1zaWRlLCBvciAiZG9kZ2VkIiwgYmFycGxvdD8gV2VsbCwgd2UgY2FuJ3QgZG8gdGhhdCB5ZXQgYmVjYXVzZSB0aGUgZGF0YSBpc24ndCBpbiBhIHRpZHkgZm9ybWF0LiBJbiB0aGUgdGliYmxlIGFib3ZlLCB3ZSBzZWUgdGhhdCB0aGVyZSBhcmUgbXVsdGlwbGUgb2JzZXJ2YXRpb25zIChvbmUgZm9yIGJlZXIsIG9uZSBmb3Igc3Bpcml0cywgYW5kIG9uZSBmb3Igd2luZSkgZm9yIGVhY2ggY291bnRyeS4gSXQgc2hvdWxkIGxvb2tlIG1vcmUgbGlrZSBDb3VudHJ5LUNoaW5hLCBUeXBlLWJlZXIsIFNlcnZpbmdzLTc5OyBDb3VudHJ5LUNoaW5hLCBUeXBlLVNwaXJpdCwgU2VydmluZ3MtMTkyOyBhbmQgc28gb24uCgpUbyB0aWR5IHRoaXMgZGF0YSwgd2UgY2FuIHVzZSB0aGUgYGdhdGhlcigpYCBmdW5jdGlvbiBmcm9tIHRoZSBgdGlkeXJgIHBhY2thZ2UuIFRoZSBgZ2F0aGVyKClgIGZ1bmN0aW9uIGhhcyB0d28gYXJndW1lbnRzOiBga2V5YCBhbmQgYHZhbHVlYC4gYGtleWAgd2lsbCBsb29rIGF0IHRoZSBoZWFkZXIgcm93IGFuZCB3ZSdsbCBuYW1lIGl0IHdpdGggdGhlIGA9YCBvcGVyYXRvciBhcyBgdHlwZWAuIGBrZXlgIHdpbGwgdXNlIHRoZSBoZWFkZXIgcm93IHRvIHBvcHVsYXRlIHRoZSBvYnNlcnZhdGlvbiByb3dzIHVuZGVyIHRoZSBuZXcgdmFyaWFibGUgYHR5cGVgLiBgdmFsdWVgIHdpbGwgbG9vayBhdCB0aGUgcmVzdCBvZiB0aGUgcm93cyB0byBwb3B1bGF0ZSB0aGUgdGhlIG5ldyB2YXJpYWJsZSBgc2VydmluZ3NgLiBBZGRpbmcgaW4gYC1jb3VudHJ5YCB3aWxsIHRlbGwgYGdhdGhlcigpYCBub3QgdG8gdGlkeSB0aGF0IHZhcmlhYmxlLgpgYGB7ciBkcmlua3MzLXRpZHl9CmRyaW5rczRfdGlkeSA8LSBkcmlua3M0ICU+JSAKICBnYXRoZXIoa2V5ID0gdHlwZSwgdmFsdWUgPSBzZXJ2aW5ncywgLWNvdW50cnkpCmRyaW5rczRfdGlkeQoKIyMgQW5vdGhlciB3YXkgdG8gd3JpdGUgaXQgd291bGQgYmU6CiMjIGRyaW5rczRfdGlkeSA8LSBkcmlua3M0ICU+JSAKIyMgICAgZ2F0aGVyKGtleSA9IHR5cGUsIHZhbHVlID0gc2VydmluZ3MsIGMoYmVlciwgc3Bpcml0LCB3aW5lKSkKIyMgCiMjIG9yCiMjIAojIyBkcmlua3M0X3RpZHkgPC0gZHJpbmtzNCAlPiUgCiMjICAgIGdhdGhlcih0eXBlLCBzZXJ2aW5ncywgLWNvdW50cnkpCmBgYAoKTm93IHRoYXQgb3VyIGRhdGEgaXMgdGlkeSwgbGV0J3MgcGxvdCBpdDoKYGBge3IgZHJpbmtzdGlkeXBsb3QsIHdhcm5pbmc9RkFMU0V9CmRyaW5rczRfdGlkeSAlPiUgCiAgZ2dwbG90KAogICAgYWVzKGNvdW50cnksIHNlcnZpbmdzLCBmaWxsID0gdHlwZSkpICsKICBnZW9tX2NvbChwb3NpdGlvbiA9ICJkb2RnZSIpCiAgCmBgYAoKIyMjIExlYXJuaW5nIENoZWNrIDQuMQoqV2hhdCBhcmUgY29tbW9uIGNoYXJhY3RlcmlzdGljcyBvZiAidGlkeSIgZGF0YSBmcmFtZXM/KgoKKipBbnN3ZXI6KioKT25lIG9ic2VydmF0aW9uIHBlciByb3csIHZhcmlhYmxlcyhjaGFyYWN0ZXJpc3RpY3Mgb3IgbWVhc3VyZW1lbnRzKSBhcmUgaW4gc2VwYXJhdGUgY29sdW1ucywgYW5kIHZhbHVlcyBhcmUgaW4gcm93cyBiZWxvdyB2YXJpYWJsZXMuIEluIHRhYmxlIDQuMSwgd2Ugc2F3IGBEYXRlYCwgYEJvZWluZyBzdG9jayBwcmljZWAsIGBBbWF6b24gc3RvY2sgcHJpY2VgLCBhbmQgYEdvb2dsZSBzdG9jayBwcmljZWAuIFdlIHdvdWxkIHdhbnQgdGhlIHZhcmlhYmxlcyB0byBiZSBgRGF0ZWAsIGBOYW1lYCwgYW5kIGBQcmljZWAuICJ0aWR5IiBkYXRhIGZyYW1lcyBhcmUgb2Z0ZW4gbmFycm93IGFuZCBsb25nLCBub3Qgd2lkZS4KCiMjIyBMZWFybmluZyBDaGVjayA0LjIKKldoYXQgbWFrZXMgInRpZHkiIGRhdGEgZnJhbWVzIHVzZWZ1bCBmb3Igb3JnYW5pemluZyBkYXRhPyoKCioqQW5zd2VyOioqCldlIGNhbiB1c2UgdGhlIHRpZHl2ZXJzZSB0b29scyB0byBhbmFseXplIHRoZSBkYXRhLiBMb29raW5nIGF0IHRoZSBwbG90IGFib3ZlLCB3ZSBzZWUgdGhhdCB3ZSBuZWVkZWQgdG8gaGF2ZSB0aGUgZGF0YSBpbiBhIHRpZHkgZm9ybWF0IGluIG9yZGVyIHRvIHBsb3QgaXQuCgojIyMgTGVhcm5pbmcgQ2hlY2sgNC4zCipUYWtlIGEgbG9vayBhdCBgYWlybGluZV9zYWZldHlgIGRhdGEgZnJhbWUgaW5jbHVkZWQgaW4gdGhlIGBmaXZldGhpcnR5ZWlnaHRgIHBhY2thZ2UuIFJlbW92ZSB0aGUgdmFyaWFibGVzIGBpbmNsX3JlZ19zdWJzaWRpYXJpZXNgIGFuZCBgYXZhaWxfc2VhdF9rbV9wZXJfd2Vla2AuIFRpZHkgdGhlIGRhdGEgdG8gaW5jbHVkZSBuZXcgdmFyaWFibGVzIGBpbmNpZGVudF90eXBlX3llYXJzYCBhbmQgYGNvdW50YC4qCgoqKkFuc3dlcjoqKgpgYGB7ciBsYzQzLTFybn0KIyMgTGV0J3MgbG9vayBhdCB0aGUgZGF0YSBmcmFtZToKYWlybGluZV9zYWZldHkKCiMjIE5vdyBsZXQncyByZW1vdmUgdGhvc2UgdHdvIHZhcmlhYmxlczoKYWlybGluZV9zYWZldHkyIDwtIGFpcmxpbmVfc2FmZXR5ICU+JSAKICBzZWxlY3QoLWMoaW5jbF9yZWdfc3Vic2lkaWFyaWVzLCBhdmFpbF9zZWF0X2ttX3Blcl93ZWVrKSkKYWlybGluZV9zYWZldHkyCgojIyBOb3cgbGV0J3MgdGlkeToKYWlybGluZV9zYWZldHkyX3RpZHkgPC0gYWlybGluZV9zYWZldHkyICU+JSAKICBnYXRoZXIoaW5jaWRlbnRfdHlwZV95ZWFycywgY291bnQsIC1haXJsaW5lKQphaXJsaW5lX3NhZmV0eTJfdGlkeQpgYGAKCiMjIyA0LjMgQ2FzZSBzdHVkeTogRGVtb2NyYWN5IGVuIEd1YXRlbWFsYQpMZXQncyB1c2UgYGRlbV9zY29yZWAgdG8gbG9vayBhdCBHdWF0ZW1hbGEuCgpgYGB7ciBndWF0ZTF9Cmd1YXRlX2RlbSA8LSBkZW1fc2NvcmUgJT4lIAogIGZpbHRlcihjb3VudHJ5ID09ICJHdWF0ZW1hbGEiKQpndWF0ZV9kZW0KYGBgCgpMZXQncyBwbG90IGEgdGltZSBzZXJpZXMgb2YgR3VhdGVtYWxhJ3Mgc2NvcmUncyBvdmVyIHRoZSBmb3J0eSB5ZWFyIHBlcmlvZCBmcm9tIDE5NTItMTk5Mi4gTG9va2luZyBhdCB0aGUgZGF0YSBmcmFtZSBhYm92ZSwgd2Ugc2VlIHRoYXQgdGhlIGRhdGEgZnJhbWUgaXMgdmVyeSB3aWRlLCBub3QgbG9uZyBhbmQgbmFycm93LiBMZXQncyB0aWR5IGl0LgpgYGB7ciBndWF0ZV90aWR5fQpndWF0ZV9kZW1fdGlkeSA8LSBndWF0ZV9kZW0gJT4lIAogIGdhdGhlcih5ZWFyLCBkZW1vY3JhY3lfc2NvcmUsIC1jb3VudHJ5KQpndWF0ZV9kZW1fdGlkeQpgYGAKClRoZSBgeWVhcmAgdmFyaWFibGUgaXMgYSBgY2hyYCB0eXBlIHZhcmlhYmxlLiBMZXQncyBjaGFuZ2UgaXQgdG8gYSBudW1lcmljYWwgdmFsdWU6CmBgYHtyIGd1YXRlX3RpZHlfeWVhcn0KZ3VhdGVfZGVtX3RpZHkyIDwtIGd1YXRlX2RlbV90aWR5ICU+JSAKICBtdXRhdGUoeWVhciA9IGFzLm51bWVyaWMoeWVhcikpCmd1YXRlX2RlbV90aWR5MgpgYGAKCk5vdyBsZXQncyBwbG90IGl0OgpgYGB7ciBndWF0ZV90aWR5X3Bsb3R9CiAgZ2dwbG90KGRhdGEgPSBndWF0ZV9kZW1fdGlkeTIsCiAgICAgICAgIG1hcHBpbmcgPSBhZXMoeCA9IHllYXIsIHkgPSBkZW1vY3JhY3lfc2NvcmUpKSArCiAgZ2VvbV9saW5lKCkgKwogIGxhYnMoeCA9ICJZZWFyIiwgeSA9ICJEZW1vY3JhY3kgU2NvcmUiKQpgYGAKCiMjIyBMZWFybmluZyBDaGVjayA0LjQKKkNvbnZlcnQgdGhlIGBkZW1fc2NvcmVgIGRhdGEgZnJhbWUgaW50byBhIHRpZHkgZGF0YSBmcmFtZSBhbmQgYXNzaWduIHRoZSBuYW1lIG9mIGBkZW1fc2NvcmVfdGlkeWAgdG8gdGhlIHJlc3VsdGluZyBsb25nLWZvcm1hdHRlZCBkYXRhIGZyYW1lLioKCioqQW5zd2VyOioqCmBgYHtyIGxjNDRybn0KZGVtX3Njb3JlX3RpZHkgPC0gZGVtX3Njb3JlICU+JSAKICBnYXRoZXIoeWVhciwgZGVtb2NyYWN5X3Njb3JlLCAtY291bnRyeSkgJT4lIAogIG11dGF0ZSh5ZWFyID0gYXMubnVtZXJpYyh5ZWFyKSkKZGVtX3Njb3JlX3RpZHkKYGBgCgojIyMgTGVhcm5pbmcgQ2hlY2sgNC41CipSZWFkIGluIHRoZSBsaWZlIGV4cGVjdGFuY3kgZGF0YSBzdG9yZWQgYXQgKGh0dHBzOi8vbW9kZXJuZGl2ZS5jb20vZGF0YS9sZV9tZXNzLmNzdikgYW5kIGNvbnZlcnQgaXQgdG8gYSB0aWR5IGRhdGEgZnJhbWUuKgoKKipBbnN3ZXI6KioKYGBge3IgbGM0NXJufQpsaWZlX2V4cGVjdGFuY3kgPC0gcmVhZF9jc3YoImh0dHBzOi8vbW9kZXJuZGl2ZS5jb20vZGF0YS9sZV9tZXNzLmNzdiIpCmxpZmVfZXhwZWN0YW5jeQoKbGlmZV9leHBfdGlkeSA8LSBsaWZlX2V4cGVjdGFuY3kgJT4lIAogIGdhdGhlcih5ZWFyLCBhZ2UsIC1jb3VudHJ5KQpsaWZlX2V4cF90aWR5CmBgYAoKCiMjIENvbmNsdXNpb24KVGhpcyBzZXJ2ZXMgYXMgdGhlIGNvbmNsdXNpb24gZm9yIG15IHdvcmsgd2l0aCBNb2Rlcm5EaXZlLiBNeSBnb2FsIHdhcyB0byBsZWFybiBlbm91Z2ggb2YgdGhlIGJhc2ljcyBvZiBSIGFuZCBSc3R1ZGlvIHRvIGJlIGFibGUgdG8gdHJhbnNpdGlvbiB0byBUaWR5IFRleHQgTWluaW5nLiAKCgoK</div>



</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- tabsets -->

<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});

$(document).ready(function () {
  $('.tabset-dropdown > .nav-tabs > li').click(function () {
    $(this).parent().toggleClass('nav-tabs-open')
  });
});
</script>

<!-- code folding -->
<script>
$(document).ready(function () {
  window.initializeSourceEmbed("moderndive_checks.Rmd");
});
</script>


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
